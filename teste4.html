<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <title>Spinner dentro de Dialog</title>
        <style>
        /* Spinner usando o próprio dialog com medidas proporcionais */
        dialog {
            width: min(15vmin, 15vmax); /* Largura proporcional à menor dimensão da viewport */
            height: min(15vmin, 15vmax); /* Altura proporcional à menor dimensão da viewport */
            border: min(2vmin, 2vmax) solid gainsboro; /* Borda proporcional */
            border-top: min(2vmin, 2vmax) solid burlywood; /* Cor da parte superior para o efeito */
            border-radius: 50%; /* Arredonda as bordas para ser um círculo */
            animation: spin 2s linear infinite; /* Animação de rotação */
            padding: 0;
            background-color: transparent; /* Mantém o fundo transparente */
        }

        /* Animação de rotação */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Personaliza o backdrop */
        dialog::backdrop {
            background-color: rgba(0, 0, 0, 0.5); /* Escurece a tela quando o dialog está aberto */
        }

    </style>
    </head>
    <body>

        <!-- Dialog HTML utilizado como spinner -->
        <dialog id="spinnerDialog"></dialog>

        <!-- Botão para simular tarefa longa -->
        <button onclick="runLongTask()">Rodar tarefa longa</button>

        <script>
        function runLongTask() {
            const dialog = document.getElementById('spinnerDialog');
            
            // Abre o dialog
            dialog.showModal();

            // Simula uma tarefa longa com um timeout de 3 segundos
            setTimeout(() => {
                // Fecha o dialog após a tarefa
                dialog.close();
            }, 3000); // Simula uma tarefa de 3 segundos
        }
    </script>

    </body>
</html>
