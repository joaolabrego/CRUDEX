/**********************************************************************************
Criar banco-de-dados cruda
**********************************************************************************/
USE [master]
SET NOCOUNT ON
IF EXISTS(SELECT 1 FROM sys.databases where name = 'cruda')
    DROP DATABASE cruda
GO
CREATE DATABASE [cruda]
    CONTAINMENT = NONE
    ON PRIMARY
    (NAME = N'cruda', FILENAME = N'D:\CRUDA-C#\CRUDA-CORE\CRUDA\db\cruda.mdf', SIZE = 8192KB, MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB)
    LOG ON
    (NAME = N'cruda_log', FILENAME = N'D:\CRUDA-C#\CRUDA-CORE\CRUDA\db\cruda.ldf', SIZE = 8192KB, MAXSIZE = 2048GB, FILEGROWTH = 65536KB)
    WITH CATALOG_COLLATION = DATABASE_DEFAULT, LEDGER = OFF
GO
ALTER DATABASE[cruda] SET COMPATIBILITY_LEVEL = 160
GO
IF(1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
    EXEC[cruda].[dbo].[sp_fulltext_database] @action = 'enable'
GO
ALTER DATABASE[cruda] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE[cruda] SET ANSI_NULLS OFF
GO
ALTER DATABASE[cruda] SET ANSI_PADDING OFF
GO
ALTER DATABASE[cruda] SET ANSI_WARNINGS OFF
GO
ALTER DATABASE[cruda] SET ARITHABORT OFF
GO
ALTER DATABASE[cruda] SET AUTO_CLOSE OFF
GO
ALTER DATABASE[cruda] SET AUTO_SHRINK OFF
GO
ALTER DATABASE[cruda] SET AUTO_UPDATE_STATISTICS ON
GO
ALTER DATABASE[cruda] SET CURSOR_CLOSE_ON_COMMIT OFF
GO
ALTER DATABASE[cruda] SET CURSOR_DEFAULT  GLOBAL
GO
ALTER DATABASE[cruda] SET CONCAT_NULL_YIELDS_NULL OFF
GO
ALTER DATABASE[cruda] SET NUMERIC_ROUNDABORT OFF
GO
ALTER DATABASE[cruda] SET QUOTED_IDENTIFIER OFF
GO
ALTER DATABASE[cruda] SET RECURSIVE_TRIGGERS OFF
GO
ALTER DATABASE[cruda] SET  DISABLE_BROKER
GO
ALTER DATABASE[cruda] SET AUTO_UPDATE_STATISTICS_ASYNC OFF
GO
ALTER DATABASE[cruda] SET DATE_CORRELATION_OPTIMIZATION OFF
GO
ALTER DATABASE[cruda] SET TRUSTWORTHY OFF
GO
ALTER DATABASE[cruda] SET ALLOW_SNAPSHOT_ISOLATION ON
GO
ALTER DATABASE[cruda] SET PARAMETERIZATION SIMPLE
GO
ALTER DATABASE[cruda] SET READ_COMMITTED_SNAPSHOT OFF
GO
ALTER DATABASE[cruda] SET HONOR_BROKER_PRIORITY OFF
GO
ALTER DATABASE[cruda] SET RECOVERY SIMPLE
GO
ALTER DATABASE[cruda] SET  MULTI_USER
GO
ALTER DATABASE[cruda] SET PAGE_VERIFY CHECKSUM
GO
ALTER DATABASE[cruda] SET DB_CHAINING OFF
GO
ALTER DATABASE[cruda] SET FILESTREAM(NON_TRANSACTED_ACCESS = OFF)
GO
ALTER DATABASE[cruda] SET TARGET_RECOVERY_TIME = 60 SECONDS
GO
ALTER DATABASE[cruda] SET DELAYED_DURABILITY = DISABLED
GO
ALTER DATABASE[cruda] SET ACCELERATED_DATABASE_RECOVERY = OFF
GO
ALTER DATABASE[cruda] SET QUERY_STORE = ON
GO
ALTER DATABASE[cruda] SET QUERY_STORE(OPERATION_MODE = READ_WRITE, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 30), DATA_FLUSH_INTERVAL_SECONDS = 900, INTERVAL_LENGTH_MINUTES = 60, MAX_STORAGE_SIZE_MB = 1000, QUERY_CAPTURE_MODE = AUTO, SIZE_BASED_CLEANUP_MODE = AUTO, MAX_PLANS_PER_QUERY = 200, WAIT_STATS_CAPTURE_MODE = ON)
GO
/**********************************************************************************
Início da criação dos scripts
**********************************************************************************/
USE [cruda]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE SCHEMA cruda AUTHORIZATION [dbo]
GO
/**********************************************************************************
Criar stored procedure [dbo].[Config]
**********************************************************************************/
IF(SELECT object_id('[dbo].[Config]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [dbo].[Config] AS PRINT 1')
GO
ALTER PROCEDURE [dbo].[Config](@SystemName VARCHAR(25)
							  ,@DatabaseName VARCHAR(25) = NULL
							  ,@TableName VARCHAR(25) = NULL) AS
BEGIN
	DECLARE @ErrorMessage VARCHAR(250)

	SET NOCOUNT ON
	SET TRANSACTION ISOLATION LEVEL READ COMMITTED
	BEGIN TRY
		IF @SystemName IS NULL BEGIN
			SET @ErrorMessage = 'Nome de sistema é requerido.';
			THROW 51000, @ErrorMessage, 1
		END
		-- 0 [Systems]
		SELECT 	'RecordSystem' AS [ClassName]
				,[Id]
				,[Name]
				,[Description]
				,[ClientName]
				,[MaxRetryLogins]
				,[IsOffAir]
			INTO [dbo].[#Systems]
			FROM [dbo].[Systems]
			WHERE [Name] = @SystemName
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = 'Sistema "' + @SystemName + '" não cadastrado.';
			THROW 51000, @ErrorMessage, 1
		END
		IF (SELECT IsOffAir FROM [dbo].[#Systems]) = 1 BEGIN
			SET @ErrorMessage = 'Sistema "' + @SystemName + '" fora do ar.';
			THROW 51000, @ErrorMessage, 1
		END
		ALTER TABLE [dbo].[#Systems] DROP COLUMN [IsOffAir]
		IF @DatabaseName IS NULL
			RETURN
		ALTER TABLE [dbo].[#Systems] ADD PRIMARY KEY CLUSTERED([Id])
		IF @DatabaseName = 'all' BEGIN
			SET @DatabaseName = NULL
			SET @TableName = NULL
		END

		-- 1 [Databases]
		SELECT 	'RecordDatabase' AS [ClassName]
				,[D].[Id]
				,[D].[Name]
				,[D].[Description]
				,[D].[Alias]
				,[D].[ServerName]
				,[D].[HostName]
				,[D].[Port]
				,[D].[Logon]
				,[D].[Password]
				,[D].[Folder]
			INTO [dbo].[#Databases]
			FROM [dbo].[Databases] [D]
				INNER JOIN [dbo].[SystemsDatabases] [SD] ON [SD].[DatabaseId] = [D].[id]
				INNER JOIN [dbo].[#Systems] [S] ON [S].[Id] = [SD].[SystemId]
			WHERE [D].[Name] = ISNULL(@DatabaseName, [D].[Name])
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = 'Banco(s)-de-dados não cadastrado(s).';
			THROW 51000, @ErrorMessage, 1
		END
		ALTER TABLE [dbo].[#Databases] ADD PRIMARY KEY CLUSTERED([Id])
		IF @DatabaseName IS NULL BEGIN
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [ServerName]
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [HostName]
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [Port]
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [Logon]
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [Password]
			ALTER TABLE [dbo].[#Databases] DROP COLUMN [Folder]
		END

		-- 2 [Tables]
		SELECT	'RecordTable' AS [ClassName]
				,[T].[Id]
				,[DT].[DatabaseId]
				,[T].[Name]
				,[T].[Alias]
				,[T].[Description]
				,[T].[ParentTableId]
				,[T].[IsPaged]
			INTO [dbo].[#Tables]
			FROM [dbo].[Tables] [T]
				INNER JOIN [dbo].[DatabasesTables] [DT] ON [DT].[TableId] = [T].[Id]
				INNER JOIN [dbo].[#Databases] [D] ON [D].[Id] = [DT].[DatabaseId]
			WHERE [T].[Name] = ISNULL(@TableName, [T].[Name])
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = 'Tabela(s) não cadastrada(s).';
			THROW 51000, @ErrorMessage, 1
		END
		ALTER TABLE [dbo].[#Tables] ADD PRIMARY KEY CLUSTERED([Id])

		IF @DatabaseName IS NULL BEGIN
			-- 3 [Columns]
			SELECT	'RecordColumn' AS [ClassName]
					,[C].[Id]
					,[C].[TableId]
					,[C].[Sequence]
					,[C].[DomainId]
					,[C].[ReferenceTableId]
					,[C].[Name]
					,[C].[Description]
					,[C].[Title]
					,[C].[Caption]
				    ,[C].[Default]
				    ,[C].[Minimum]
				    ,[C].[Maximum]
					,[C].[IsPrimarykey]
					,[C].[IsAutoIncrement]
					,[C].[IsRequired]
					,[C].[IsListable]
					,[C].[IsFilterable]
					,[C].[IsEditable]
					,[C].[IsBrowseable]			
					,[C].[IsEncrypted]
				INTO [dbo].[#Columns]
				FROM [dbo].[Columns] [C]
					INNER JOIN [dbo].[#Tables] [T] ON [T].[Id]= [C].[TableId] 
			IF @@ROWCOUNT = 0 BEGIN
				SET @ErrorMessage = 'Colunas de tabelas não cadastradas.';
				THROW 51000, @ErrorMessage, 1
			END
			ALTER TABLE [dbo].[#Columns] ADD PRIMARY KEY CLUSTERED([Id])
			CREATE INDEX [#ColumnsDomainId] ON [dbo].[#Columns]([DomainId])

			-- 4 [Domains]
			SELECT	'RecordDomain' AS [ClassName]
					,[D].[Id]
					,[D].[TypeId]
					,[D].[MaskId]
					,[D].[Name]
					,[D].[Length]
					,[D].[Decimals]
					,[D].[ValidValues]
					,[D].[Default]
					,[D].[Minimum]
					,[D].[Maximum]
					,[D].[Codification]
				INTO [dbo].[#Domains]
				FROM [dbo].[Domains] [D]
				WHERE EXISTS(SELECT TOP 1 1 FROM [dbo].[#Columns] WHERE [DomainId] = [D].[Id])
			IF @@ROWCOUNT = 0 BEGIN
				SET @ErrorMessage = 'Domínios de colunas não cadastrados.';
				THROW 51000, @ErrorMessage, 1
			END
			ALTER TABLE [dbo].[#Domains] ADD PRIMARY KEY NONCLUSTERED([Id])
			CREATE INDEX [#DomainsTypeId] ON [dbo].[#Domains]([TypeId])

			-- 5 [Types]
			SELECT 	'RecordType' AS [ClassName]
					,[T].[Id]
					,[T].[CategoryId]
					,[T].[Name]
				    ,[T].[Minimum]
					,[T].[Maximum]
					,[T].[AskLength]
					,[T].[AskDecimals]
					,[T].[AskPrimarykey]
					,[T].[AskAutoincrement]
					,[T].[AskFilterable]
					,[T].[AskBrowseable]
					,[T].[AskCodification]
					,[T].[AskFormula]
					,[T].[AllowMaxLength]
					,[T].[IsActive]
				INTO [dbo].[#Types]
				FROM [dbo].[Types] [T]
				WHERE EXISTS(SELECT TOP 1 1 FROM [dbo].[#Domains] WHERE [TypeId] = [T].[Id])
			IF @@ROWCOUNT = 0 BEGIN
				SET @ErrorMessage = 'Tipos de domínios não cadastrados.';
				THROW 51000, @ErrorMessage, 1
			END
			CREATE INDEX [#TypesCategoryId] ON [dbo].[#Types]([CategoryId])

			-- 6 [Categories]
			SELECT 	'RecordCategory' AS [ClassName]
					,[C].[Id]
					,[C].[Name]
					,[C].[HtmlInputType]
					,[C].[HtmlInputAlign]
					,[C].[AskEncrypted]
					,[C].[AskMask]
					,[C].[AskListable]
					,[C].[AskDefault]
					,[C].[AskMinimum]
					,[C].[AskMaximum]
				INTO [dbo].[#Categories]
				FROM [dbo].[Categories] [C]
				WHERE EXISTS(SELECT TOP 1 1 FROM [dbo].[#Types] WHERE [CategoryId] = [C].[Id])
			IF @@ROWCOUNT = 0 BEGIN
			   SET @ErrorMessage = 'Categoria(s) de tipos não cadastrada(s).';
			   THROW 51000, @ErrorMessage, 1
			END

			-- 7 [Menus]
			SELECT 	'RecordMenu' AS [ClassName]
					,[M].[Id]
					,[M].[SystemId]
					,[M].[Sequence]
					,[M].[Caption]
					,[M].[Message]
					,[M].[Action]
					,[M].[ParentMenuId]
				INTO [dbo].[#Menus]
				FROM [dbo].[Menus] [M]
					INNER JOIN [dbo].[#Systems] [S] ON [S].[Id] = [M].[SystemId]
			IF @@ROWCOUNT = 0 BEGIN
			   SET @ErrorMessage = 'Menu(s) de sistema não cadastrado(s).';
			   THROW 51000, @ErrorMessage, 1
			END

			-- 8 [Indexes]
			SELECT 	'RecordIndex' AS [ClassName]
					,[I].[Id]
					,[I].[TableId]
					,[I].[Name]
					,[I].[IsUnique]
				INTO [dbo].[#Indexes]
				FROM [dbo].[Indexes] [I]
					INNER JOIN [dbo].[#Tables] [T] ON [T].[Id] = [I].[TableId]
			ALTER TABLE [dbo].[#Indexes] ADD PRIMARY KEY NONCLUSTERED([Id])

			-- 9 [Indexkeys]
			SELECT 	'RecordIndexkey' AS [ClassName]
					,[IK].[Id]
					,[IK].[IndexId]
					,[IK].[Sequence]
					,[IK].[ColumnId]
					,[IK].[IsDescending]
				INTO [dbo].[#Indexkeys]
				FROM [dbo].[Indexkeys] [IK]
					INNER JOIN [dbo].[#Indexes] [I] ON [I].[Id] = [IK].IndexId
			-- 10 [Masks]
			SELECT 	'RecordMask' AS [ClassName]
					,[M].[Id]
					,[M].[Name]
					,[M].[Mask]
				INTO [dbo].[#Masks]
				FROM [dbo].[Masks] [M]
				WHERE EXISTS(SELECT TOP 1 1 FROM [dbo].[#Domains] WHERE [MaskId] = [M].[Id])
		END

		-- Results
		SELECT * FROM [dbo].[#Systems] ORDER BY [Name] -- 0 [#Systems]
		IF @DatabaseName IS NULL BEGIN
			SELECT * FROM [dbo].[#Databases] ORDER BY [Name] -- 1 [#Databases]
			SELECT * FROM [dbo].[#Tables] ORDER BY [DatabaseId], [Name] -- 2 [#Tables]
			SELECT * FROM [dbo].[#Columns] ORDER BY [TableId], [Sequence] -- 3 [#Columns]
			SELECT * FROM [dbo].[#Domains] ORDER BY [Name] -- 4 [#Domains]
			SELECT * FROM [dbo].[#Types] ORDER BY [Name] -- 5 [#Types]
			SELECT * FROM [dbo].[#Categories] ORDER BY [Name] -- 6 [#Categories]
			SELECT * FROM [dbo].[#Menus] ORDER BY [SystemId], [Sequence] -- 7 [#Menus]
			SELECT * FROM [dbo].[#Indexes] ORDER BY [Name] -- 8 [#Indexes]
			SELECT * FROM [dbo].[#Indexkeys] ORDER BY [IndexId], [Sequence] -- 9 [#Indexkeys]
			SELECT * FROM [dbo].[#Masks] ORDER BY [Id] -- 10 [#Masks]
		END ELSE BEGIN
			SELECT * FROM [dbo].[#Databases] ORDER BY [Name] -- 1 [#Databases]
			SELECT * FROM [dbo].[#Tables] ORDER BY [DatabaseId], [Name] -- 2 [#Tables]
		END

		RETURN CAST(1 AS BIT)
	END TRY
	BEGIN CATCH
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[GenerateId]
**********************************************************************************/
IF(SELECT object_id('[dbo].[GenerateId]','P')) IS NULL
	EXEC('CREATE PROCEDURE [dbo].[GenerateId] AS PRINT 1')
GO
ALTER PROCEDURE [dbo].[GenerateId](@SystemName VARCHAR(25)
								  ,@DatabaseName VARCHAR(25)
								  ,@TableName VARCHAR(25)) AS
BEGIN
	DECLARE @TRANCOUNT INT = @@TRANCOUNT

	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED

		DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure GenerateId: '
				,@SystemId BIGINT
				,@DatabaseId BIGINT
				,@TableId BIGINT
				,@NextId BIGINT

		BEGIN TRANSACTION
		SAVE TRANSACTION [SavePoint]
		SELECT @SystemId = [Id]
			FROM [dbo].[Systems]
			WHERE [Name] = @SystemName
		IF @SystemId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Sistema não encontrado';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT @DatabaseId = [Id]
			FROM [dbo].[Databases]
			WHERE [Name] = @DatabaseName
		IF @DatabaseId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Banco-de-dados não encontrado';
			THROW 51000, @ErrorMessage, 1
		END
		IF NOT EXISTS(SELECT 1
						FROM [dbo].[SystemsDatabases]
						WHERE [SystemId] = @SystemId
							  AND [DatabaseId] = @DatabaseId) BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Banco-de-dados não pertence ao sistema especificado';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT @TableId = [Id]
			   ,@NextId = [CurrentId] + 1
			FROM [dbo].[Tables]
			WHERE [Name] = @TableName
		IF @TableId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Tabela não encontrada';
			THROW 51000, @ErrorMessage, 1
		END
		IF NOT EXISTS(SELECT 1
						FROM [dbo].[DatabasesTables]
						WHERE [DatabaseId] = @DatabaseId
							  AND [TableId] = @TableId) BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Tabela não pertence ao banco-de-dados especificado';
			THROW 51000, @ErrorMessage, 1
		END
		UPDATE [dbo].[Tables] 
			SET [CurrentId] = @NextId
			WHERE [Id] = @TableId
		COMMIT TRANSACTION

		RETURN @NextId
	END TRY
	BEGIN CATCH
		IF @@TRANCOUNT > @TRANCOUNT BEGIN
			ROLLBACK TRANSACTION [SavePoint]
			COMMIT TRANSACTION
		END;
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[Login]
**********************************************************************************/
IF(SELECT object_id('[dbo].[Login]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [dbo].[Login] AS PRINT 1')
GO
ALTER PROCEDURE [dbo].[Login](@Parameters VARCHAR(MAX)) AS BEGIN
	DECLARE @TRANCOUNT INT = @@TRANCOUNT

	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED
		BEGIN TRANSACTION
		SAVE TRANSACTION [SavePoint]

		DECLARE	@ErrorMessage VARCHAR(256)

		IF ISJSON(@Parameters) = 0 BEGIN
			SET @ErrorMessage = 'Parâmetro login não está no formato JSON';
			THROW 51000, @ErrorMessage, 1
		END
	
		DECLARE	@Action VARCHAR(15) = CAST(JSON_VALUE(@Parameters, '$.Action') AS VARCHAR(15))
				,@LoginId BIGINT = CAST(JSON_VALUE(@Parameters, '$.LoginId') AS BIGINT)
				,@SystemName VARCHAR(25) = CAST(JSON_VALUE(@Parameters, '$.SystemName') AS VARCHAR(25))
				,@UserName VARCHAR(25) = CAST(JSON_VALUE(@Parameters, '$.UserName') AS VARCHAR(25))
				,@Password VARCHAR(256) = CAST(JSON_VALUE(@Parameters, '$.Password') AS VARCHAR(256))
				,@PublicKey VARCHAR(256) = CAST(JSON_VALUE(@Parameters, '$.PublicKey') AS VARCHAR(256))
				,@PasswordAux VARCHAR(256)
				,@SystemId BIGINT
				,@SystemIdAux BIGINT
				,@UserId BIGINT
				,@UserIdAux BIGINT
				,@MaxRetryLogins TINYINT
				,@RetryLogins TINYINT
				,@IsLogged BIT
				,@IsActive BIT
				,@IsOffAir BIT
	
		IF @Action IS NULL BEGIN
			SET @ErrorMessage = 'Ação de login é requerida';
			THROW 51000, @ErrorMessage, 1
		END
		IF @Action NOT IN ('login','logout','authenticate') BEGIN
			SET @ErrorMessage = 'Ação de login é inválida';
			THROW 51000, @ErrorMessage, 1
		END
		IF @SystemName IS NULL BEGIN
			SET @ErrorMessage = 'Sistema é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT @SystemId = [Id]
			   ,@MaxRetryLogins = [MaxRetryLogins]
			   ,@IsOffAir = [IsOffAir]
			FROM [dbo].[Systems]
			WHERE [Name] = @SystemName
		IF @SystemId IS NULL BEGIN
			SET @ErrorMessage = 'Sistema não cadastrado';
			THROW 51000, @ErrorMessage, 1
		END
		IF @IsOffAir = 1 BEGIN
			SET @ErrorMessage = 'Sistema fora do ar';
			THROW 51000, @ErrorMessage, 1
		END
		IF @UserName IS NULL BEGIN
			SET @ErrorMessage = 'Usuário é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT	@UserId = [Id]
				,@RetryLogins = [RetryLogins]
				,@IsActive = [IsActive]
				,@PasswordAux = [Password]
			FROM [dbo].[Users]
			WHERE [Name] = @UserName
		IF @UserId IS NULL BEGIN
			SET @ErrorMessage = 'Usuário não cadastrado';
			THROW 51000, @ErrorMessage, 1
		END
		IF @IsActive = 0 BEGIN
			SET @ErrorMessage = 'Usuário está inativo';
			THROW 51000, @ErrorMessage, 1
		END
		IF @RetryLogins >= @MaxRetryLogins BEGIN
			SET @ErrorMessage = 'Usuário está bloqueado';
			THROW 51000, @ErrorMessage, 1
		END
		IF NOT EXISTS(SELECT TOP 1 1
						FROM [dbo].[SystemsUsers]
						WHERE [SystemId] = @SystemId
							  AND [UserId] =  @UserId) BEGIN
			SET @ErrorMessage = 'Usuário não autorizado';
			THROW 51000, @ErrorMessage, 1
		END
		IF @Password IS NULL BEGIN
			SET @ErrorMessage = 'Senha é requerida';
			THROW 51000, @ErrorMessage, 1
		END
		IF CAST(@PasswordAux AS VARCHAR(MAX)) <> CAST(@Password AS VARCHAR(MAX)) BEGIN
			SET @RetryLogins = @RetryLogins + 1
			UPDATE [dbo].[Users] 
				SET [RetryLogins] = @RetryLogins
				WHERE [Id] = @UserId
			COMMIT TRANSACTION 
			IF @RetryLogins = @MaxRetryLogins
				SET @ErrorMessage = 'Usuário está bloqueado';
			ELSE
				SET @ErrorMessage = 'Senha é inválida (' + CAST(@MaxRetryLogins -  @RetryLogins AS VARCHAR(3)) + ' tentativas restantes)';
			THROW 51000, @ErrorMessage, 1
		END
		IF @action = 'login' BEGIN
			IF @PublicKey IS NULL BEGIN
				SET @ErrorMessage = 'Chave pública é requerida';
				THROW 51000, @ErrorMessage, 1
			END
			EXEC @LoginId = [dbo].[GenerateId] 'cruda', 'cruda', 'Logins'
			INSERT [dbo].[Logins]([Id],
								  [SystemId],
								  [UserId],
								  [PublicKey],
								  [IsLogged],
								  [CreatedAt],
								  [CreatedBy])
						  VALUES (ISNULL(@LoginId, 1),
								  @SystemId,
								  @UserId,
								  @PublicKey,
								  1,
								  GETDATE(),
								  @UserName)
		END ELSE IF @LoginId IS NULL BEGIN
			SET @ErrorMessage = 'Id de login é requerido';
			THROW 51000, @ErrorMessage, 1
		END ELSE BEGIN
			SELECT @SystemIdAux = [SystemId],
				   @UserIdAux = [UserId],
				   @IsLogged = [IsLogged]
				FROM [dbo].[Logins]
				WHERE [Id] = @LoginId
			IF @SystemIdAux IS NULL BEGIN
				SET @ErrorMessage = 'Login não cadastrado';
				THROW 51000, @ErrorMessage, 1
			END
			IF @SystemId <> @SystemIdAux BEGIN
				SET @ErrorMessage = 'Sistema é inválido para este login';
				THROW 51000, @ErrorMessage, 1
			END
			IF @UserId <> @UserIdAux BEGIN
				SET @ErrorMessage = 'Usuário é inválido para este login';
				THROW 51000, @ErrorMessage, 1
			END
			IF @IsLogged = 0 BEGIN
				SET @ErrorMessage = 'Login já encerrado';
				THROW 51000, @ErrorMessage, 1
			END
			IF @action = 'logout'
				UPDATE [dbo].[Logins]
					SET [IsLogged] = 0,
						[UpdatedAt] = GETDATE(),
						[UpdatedBy] = @UserName
					WHERE [Id] = @LoginId
		END
		UPDATE [dbo].[Users]
			SET [RetryLogins] = 0
			WHERE [Id] = @UserId
		COMMIT TRANSACTION 

		RETURN @LoginId
	END TRY
	BEGIN CATCH
		IF @@TRANCOUNT > @TRANCOUNT BEGIN
			ROLLBACK TRANSACTION [SavePoint]
			COMMIT TRANSACTION
		END;
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[GetPublicKey]
**********************************************************************************/
IF(SELECT object_id('[dbo].[GetPublicKey]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [dbo].[GetPublicKey] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[GetPublicKey](@LoginId BIGINT) AS BEGIN
	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED

		DECLARE @ErrorMessage VARCHAR(256)

		IF @LoginId IS NULL BEGIN
			SET @ErrorMessage = 'Parâmetro @LoginId é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT [PublicKey]
			FROM [dbo].[Logins]
			WHERE [Id] = @LoginId
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = 'Valor @LoginId é inexistente';
			THROW 51000, @ErrorMessage, 1
		END

		RETURN @LoginId
	END TRY
	BEGIN CATCH
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar function [dbo].[NumberInWordsOfHundreds]
**********************************************************************************/
IF(SELECT object_id('[dbo].[NumberInWordsOfHundreds]', 'FN')) IS NULL
	EXEC('CREATE FUNCTION [dbo].[NumberInWordsOfHundreds]() RETURNS VARCHAR(MAX) AS BEGIN RETURN '''' END')
GO
ALTER FUNCTION [dbo].[NumberInWordsOfHundreds](@Value AS SMALLINT
											  ,@EnglishOrPortuguese BIT)
RETURNS VARCHAR(MAX) AS  
BEGIN 
	DECLARE @ThirdDigit INT = @Value / 100,
			@SecondDigit INT = CAST(@Value / 10 AS INT) % 10,
			@FirstDigit INT = @Value % 10,
			@And VARCHAR(10),
			@Result VARCHAR(MAX) = '',
			@Separator VARCHAR(5)
	DECLARE @Units TABLE (Id INT, Nome VARCHAR(50))
	DECLARE @Dozens TABLE (Id INT, Nome VARCHAR(50))
	DECLARE @Hundreds TABLE (Id INT, Nome VARCHAR(50))

	IF @EnglishOrPortuguese = 1 BEGIN
		SET @And = ' e '
		INSERT @Units
			VALUES(0, ''),
				  (1, 'Um'),
				  (2, 'Dois'),
				  (3, 'Três'),
				  (4, 'Quatro'),
				  (5, 'Cinco'),
				  (6, 'Seis'),
				  (7, 'Sete'),
				  (8, 'Oito'),
				  (9, 'Nove'),
				  (10, 'Dez'),
				  (11, 'Onze'),
				  (12, 'Doze'),
				  (13, 'Treze'),
				  (14, 'Quatorze'),
				  (15, 'Quinze'),
				  (16, 'Dezesseis'),
				  (17, 'Dezessete'),
				  (18, 'Dezoito'),
				  (19, 'Dezenove')
			
		INSERT @Dozens
			VALUES(0, ''),
				  (1, 'Dez'),
				  (2, 'Vinte'),
				  (3, 'Trinta'),
				  (4, 'Quarenta'),
				  (5, 'Cinquenta'),
				  (6, 'Sessenta'),
				  (7, 'Setenta'),
				  (8, 'Oitenta'),
				  (9, 'Noventa')
			
		INSERT @Hundreds
			VALUES(0, ''),
				  (1, 'Cento'),
				  (2, 'Duzentos'),
				  (3, 'Trezentos'),
				  (4, 'Quatrocentos'),
				  (5, 'Quinhentos'),
				  (6, 'Seiscentos'),
				  (7, 'Setecentos'),
				  (8, 'Oitocentos'),
				  (9, 'Novecentos')
	END ELSE BEGIN
		SET @And = ' and '
		INSERT @Units
			VALUES(0, ''),
				  (1, 'One'),
				  (2, 'Two'),
				  (3, 'Three'),
				  (4, 'Four'),
				  (5, 'Five'),
				  (6, 'Six'),
				  (7, 'Seven'),
				  (8, 'Eight'),
				  (9, 'Nine'),
				  (10, 'Ten'),
				  (11, 'Eleven'),
				  (12, 'Twelve'),
				  (13, 'Thirteen'),
				  (14, 'Fourteen'),
				  (15, 'Fifteen'),
				  (16, 'Sixteen'),
				  (17, 'Seventeen'),
				  (18, 'Eighteen'),
				  (19, 'Nineteen')
			
		INSERT @Dozens
			VALUES(0, ''),
				  (1, 'Ten'),
				  (2, 'Twenty'),
				  (3, 'Thirty'),
				  (4, 'Forty'),
				  (5, 'Fifty'),
				  (6, 'Sixty'),
				  (7, 'Seventy'),
				  (8, 'Eighty'),
				  (9, 'Ninety')
			
		INSERT @Hundreds
			VALUES(0, ''),
				  (1, 'One Hundred'),
				  (2, 'Two Hundred'),
				  (3, 'Three Hundred'),
				  (4, 'Four Hundred'),
				  (5, 'Five Hundred'),
				  (6, 'Six Hundred'),
				  (7, 'Seven Hundred'),
				  (8, 'Eight Hundred'),
				  (9, 'Nine Hundred')
	END
	SET  @Separator = CASE WHEN @EnglishOrPortuguese = 1 THEN @And ELSE ' ' END
	IF @Value < 20 BEGIN
		SET @Result = (SELECT Nome FROM @Units WHERE Id = @Value)
	END ELSE IF @Value < 100 BEGIN
		SET @Result = (SELECT Nome FROM @Dozens WHERE Id = @SecondDigit) +
						 CASE WHEN @FirstDigit = 0 THEN '' ELSE CASE WHEN @EnglishOrPortuguese = 1 THEN @And ELSE '-' END + (SELECT Nome FROM @Units WHERE Id = @FirstDigit) END
	END ELSE IF @Value = 100 BEGIN
		SET @Result = CASE WHEN @EnglishOrPortuguese = 1 THEN 'Cem' ELSE 'One Hundred' END
	END ELSE IF @Value % 100 = 0 BEGIN
		SET @Result = (SELECT Nome FROM @Hundreds WHERE Id = @ThirdDigit)
	END ELSE BEGIN
		SET @Result = (SELECT Nome FROM @Hundreds WHERE Id = @ThirdDigit) +
						 CASE WHEN @Value < 20
							  THEN @Separator + (SELECT Nome FROM @Units WHERE Id = @SecondDigit * 10 + @FirstDigit)
						      ELSE @Separator + (SELECT Nome FROM @Dozens WHERE Id = @SecondDigit) + CASE WHEN @FirstDigit = 0 
																										  THEN '' 
																										  ELSE CASE WHEN @EnglishOrPortuguese = 1 THEN @And ELSE '-' END + (SELECT Nome FROM @Units WHERE Id = @FirstDigit)
																									 END
						 END
	END

	RETURN @Result
END
GO
/**********************************************************************************
Criar function [dbo].[NumberInWords]
**********************************************************************************/
IF(SELECT object_id('[dbo].[NumberInWords]', 'FN')) IS NULL
	EXEC('CREATE FUNCTION [dbo].[NumberInWords]() RETURNS VARCHAR(MAX) AS BEGIN RETURN '''' END')
GO
ALTER FUNCTION [dbo].[NumberInWords](@Value AS DECIMAL(18,2)
								    ,@EnglishOrPortuguese BIT = 1
									,@CurrencyInSingular VARCHAR(50) = NULL
									,@CurrencyInPlural VARCHAR(50) = NULL
									,@CentsInSingular VARCHAR(50) = NULL
									,@CentsInPlural VARCHAR(50) = NULL)
RETURNS VARCHAR(MAX) AS  
BEGIN 
	DECLARE @Power INT = 0,
		    @Separator VARCHAR(5) = '',
		    @PartialValue BIGINT,
		    @Digito INT = 0,
		    @LastDigit INT,
			@Result VARCHAR(MAX) = '',
			@Minus VARCHAR(10) = '',
			@Of VARCHAR(10),
			@And VARCHAR(10),
			@ValueOfHundreds INT = 0,
			@ValueOfThousands INT = 0
	DECLARE @Powers TABLE (Id INT, NomeSingular VARCHAR(50), NomePlural VARCHAR(50))

	IF @EnglishOrPortuguese = 1 BEGIN
		IF @CurrencyInSingular IS NULL
			SET @CurrencyInSingular = 'Real'
		IF @CurrencyInPlural IS NULL
			SET @CurrencyInPlural = 'Reais'
		IF @CentsInSingular IS NULL
			SET @CentsInSingular = 'Centavo'
		IF @CentsInPlural IS NULL
			SET @CentsInPlural = 'Centavos'
		SET @Of = ' de '
		SET @And = ' e '
		IF @Value < 0 BEGIN
			SET @Value = -@Value
			SET @Minus = 'Menos'
		END	
		INSERT @Powers
			VALUES(0,'', ''),
				  (1,'Mil', 'Mil'),
				  (2,'Milhão', 'Milhões'),
				  (3,'Bilhão', 'Bilhões'),
				  (4,'Trilhão', 'Trilhões'),
				  (5,'Quatrilhão', 'Quatrilhões'),
				  (6,'Quintilhão', 'Quintilhões'),
				  (7,'Sextilhão', 'Sextilhões'),
				  (8,'Septilhão', 'Septilhões'),
				  (9,'Octilhão', 'Octilhões'),
				  (10,'Nonilhão', 'Nonilhões'),
				  (11,'Decilhão', 'Decilhões'),
			      (12,'Undecilhão', 'Undecilhões'),
				  (13,'Duodecilhão', 'Duodecilhões'),
				  (14,'Tredecilhão', 'Tredecilhões')
	END ELSE BEGIN
		IF @CurrencyInSingular IS NULL
			SET @CurrencyInSingular = 'Dollar'
		IF @CurrencyInPlural IS NULL
			SET @CurrencyInPlural = 'Dollars'
		IF @CentsInSingular IS NULL
			SET @CentsInSingular = 'Cent'
		IF @CentsInPlural IS NULL
			SET @CentsInPlural = 'Cents'
		SET @Of = ' of '
		SET @And = ' and '
		IF @Value < 0 BEGIN
			SET @Value = -@Value
			SET @Minus = 'Minus'
		END	
		INSERT @Powers
			VALUES(0,'', ''),
				  (1,'Thousand', 'Thousand'),
				  (2,'Million', 'Million'),
				  (3,'Billion', 'Billion'),
				  (4,'Trillion', 'Trillion'),
				  (5,'Quadrillion', 'Quadrillion'),
				  (6,'Quintillion', 'Quintillion'),
				  (7,'Sextillion', 'Sextillion'),
				  (8,'Septillion', 'Septillion'),
				  (9,'Octillion', 'Octillion'),
				  (10,'Nonillion', 'Nonillion'),
				  (11,'Decillion', 'Decillion'),
				  (12,'Undecillion', 'Undecillion'),
				  (13,'Duodecillion', 'Duodecillion'),
				  (14,'Tredecillion', 'Tredecillion')
	END
	SET @PartialValue = FLOOR(@Value)
	WHILE @PartialValue > 0 BEGIN
		SET @LastDigit = @Digito
		SET @Digito = @PartialValue % 1000
		IF @Power = 0 BEGIN
			SET @ValueOfHundreds = @Digito
		END ELSE IF @Power = 1 BEGIN
			SET @ValueOfThousands = @Digito
		END
		IF @Digito = 1 BEGIN
			 SET @Result = [cruda].[NumberInWordsOfHundreds](@Digito, @EnglishOrPortuguese) + ' ' + 
							  (SELECT NomeSingular FROM @Powers WHERE Id = @Power) + 
							  @Separator + @Result
		END ELSE IF @Digito > 0 BEGIN
			 SET @Result = [cruda].[NumberInWordsOfHundreds](@Digito, @EnglishOrPortuguese) + ' ' + 
							  (SELECT NomePlural FROM @Powers WHERE Id = @Power) + 
							  @Separator + @Result
		END
		SET @PartialValue = @PartialValue / 1000
		IF @Digito > 0 BEGIN
			IF (@Power = 0) BEGIN
				SET @Separator = CASE WHEN @EnglishOrPortuguese = 1 THEN @And ELSE ', ' END
			END ELSE BEGIN
				SET @Separator = ', '
			END
		END
		SET @Power = @Power + 1
	END
	SET @Result = RTRIM(@Result)
	IF @Result = '' BEGIN
		IF @Value = 0 BEGIN
			SET @Result = 'Zero ' + @CurrencyInPlural
		END
	END ELSE IF @Digito = 1 BEGIN
		IF @Power < 2 BEGIN
			SET @Result = @Result + ' ' + @CurrencyInSingular
		END ELSE IF @Power = 2 BEGIN
			SET @Result = @Result + ' ' + @CurrencyInPlural
		END ELSE BEGIN
			SET @Result = @Result + CASE WHEN @ValueOfHundreds > 0 OR @ValueOfThousands > 0 THEN ' ' ELSE @Of END + @CurrencyInPlural
		END
	END ELSE IF @Power <= 2 BEGIN
		SET @Result = @Result + ' ' + @CurrencyInPlural
	END ELSE BEGIN
		SET @Result = @Result + CASE WHEN @ValueOfHundreds > 0 OR @ValueOfThousands > 0 THEN ' ' ELSE @Of END + @CurrencyInPlural
	END
	SET @PartialValue = FLOOR(@Value * 100) % 100
	IF @PartialValue > 0 BEGIN
		IF @PartialValue = 1 BEGIN
			IF @Result = '' BEGIN
				SET @Result = [cruda].[NumberInWordsOfHundreds](@PartialValue, @EnglishOrPortuguese) + ' ' + @CentsInSingular + @Of + @CurrencyInSingular
			END ELSE BEGIN
				SET @Result = @Result + @And + [cruda].[NumberInWordsOfHundreds](@PartialValue, @EnglishOrPortuguese) + ' ' + @CentsInSingular 
			END
		END ELSE BEGIN
			IF @Result = '' BEGIN
				SET @Result = [cruda].[NumberInWordsOfHundreds](@PartialValue, @EnglishOrPortuguese) + ' ' + @CentsInPlural + @Of + @CurrencyInPlural
			END ELSE BEGIN
				SET @Result = @Result + @And + [cruda].[NumberInWordsOfHundreds](@PartialValue, @EnglishOrPortuguese) + ' ' + @CentsInPlural
			END
		END
	END		

	RETURN @Minus + ' ' + @Result
END
GO
/**********************************************************************************
Criar stored procedure [cruda].[IsEquals]
**********************************************************************************/
IF (SELECT object_id('[cruda].[IsEquals]', 'FN')) IS NULL
    EXEC('CREATE FUNCTION [cruda].[IsEquals]() RETURNS BIT AS BEGIN RETURN 1 END')
GO

ALTER FUNCTION [cruda].[IsEquals](
    @LeftValue NVARCHAR(MAX),
    @RightValue NVARCHAR(4000),
    @TypeValue VARCHAR(25)
)
RETURNS BIT AS 
BEGIN
    IF @LeftValue IS NULL AND @RightValue IS NULL
        RETURN 1;
    IF @LeftValue IS NULL OR @RightValue IS NULL
        RETURN 0;
	
    -- Compara��es num�ricas
	IF @TypeValue = 'int'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS int) = TRY_CAST(@RightValue AS int) THEN 1 ELSE 0 END;
	IF @TypeValue = 'smallint'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS smallint) = TRY_CAST(@RightValue AS smallint) THEN 1 ELSE 0 END;
	IF @TypeValue = 'tinyint'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS tinyint) = TRY_CAST(@RightValue AS tinyint) THEN 1 ELSE 0 END;
	IF @TypeValue = 'bigint'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS bigint) = TRY_CAST(@RightValue AS bigint) THEN 1 ELSE 0 END;

	-- Compara��es decimais e monet�rias
	IF @TypeValue = 'decimal'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS decimal(38, 18)) = TRY_CAST(@RightValue AS decimal(38, 18)) THEN 1 ELSE 0 END;
	IF @TypeValue = 'numeric'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS numeric(38, 18)) = TRY_CAST(@RightValue AS numeric(38, 18)) THEN 1 ELSE 0 END;
	IF @TypeValue = 'float'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS float) = TRY_CAST(@RightValue AS float) THEN 1 ELSE 0 END;
	IF @TypeValue = 'real'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS real) = TRY_CAST(@RightValue AS real) THEN 1 ELSE 0 END;
	IF @TypeValue = 'money'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS money) = TRY_CAST(@RightValue AS money) THEN 1 ELSE 0 END;
	IF @TypeValue = 'smallmoney'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS smallmoney) = TRY_CAST(@RightValue AS smallmoney) THEN 1 ELSE 0 END;
    
    -- Compara��o de strings
	IF @TypeValue IN ('varchar', 'char', 'text', 'nvarchar', 'nchar', 'ntext')
        RETURN CASE WHEN @LeftValue = @RightValue THEN 1 ELSE 0 END;

    -- Compara��es de datas
	IF @TypeValue = 'date'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS date) = TRY_CAST(@RightValue AS date) THEN 1 ELSE 0 END;
	IF @TypeValue = 'datetime'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS datetime) = TRY_CAST(@RightValue AS datetime) THEN 1 ELSE 0 END;
	IF @TypeValue = 'datetime2'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS datetime2) = TRY_CAST(@RightValue AS datetime2) THEN 1 ELSE 0 END;
	IF @TypeValue = 'smalldatetime'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS smalldatetime) = TRY_CAST(@RightValue AS smalldatetime) THEN 1 ELSE 0 END;
	IF @TypeValue = 'datetimeoffset'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS datetimeoffset) = TRY_CAST(@RightValue AS datetimeoffset) THEN 1 ELSE 0 END;
	IF @TypeValue = 'time'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS time) = TRY_CAST(@RightValue AS time) THEN 1 ELSE 0 END;

    -- Compara��es de tipos especiais
    IF @TypeValue = 'bit'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS BIT) = TRY_CAST(@RightValue AS BIT) THEN 1 ELSE 0 END;
    IF @TypeValue = 'sysname'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS SYSNAME) = TRY_CAST(@RightValue AS SYSNAME) THEN 1 ELSE 0 END;
    IF @TypeValue = 'uniqueidentifier'
        RETURN CASE WHEN TRY_CAST(@LeftValue AS UNIQUEIDENTIFIER) = TRY_CAST(@RightValue AS UNIQUEIDENTIFIER) THEN 1 ELSE 0 END;

    -- Compara��o final como VARBINARY(MAX) (fallback)
    RETURN CASE WHEN TRY_CAST(@LeftValue AS VARBINARY(MAX)) = TRY_CAST(@RightValue AS VARBINARY(MAX)) THEN 1 ELSE 0 END;
END
GO
/**********************************************************************************
Criar tabela [cruda].[Transactions]
**********************************************************************************/
IF (SELECT object_id('[cruda].[Transactions]', 'U')) IS NOT NULL
    DROP TABLE [cruda].[Transactions]
CREATE TABLE [cruda].[Transactions]([Id] [int] IDENTITY(1,1) NOT NULL
                                   ,[LoginId] [bigint] NOT NULL
                                   ,[IsConfirmed] [bit] NULL
                                   ,[CreatedAt] datetime NOT NULL
                                   ,[CreatedBy] varchar(25) NOT NULL
                                   ,[UpdatedAt] datetime NULL
                                   ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [cruda].[Transactions] ADD CONSTRAINT PK_Transactions PRIMARY KEY CLUSTERED([Id])
CREATE INDEX [IDX_Transactions_LoginId_IsConfirmed] ON [cruda].[Transactions]([LoginId], [IsConfirmed])
GO
/**********************************************************************************
Criar tabela [cruda].[Operations]
**********************************************************************************/
IF (SELECT object_id('[cruda].[Operations]', 'U')) IS NOT NULL
    DROP TABLE [cruda].[Operations]
CREATE TABLE [cruda].[Operations]([Id] [int] IDENTITY(1,1) NOT NULL
                                 ,[TransactionId] [int] NOT NULL
                                 ,[TableName] [varchar](25) NOT NULL
                                 ,[Action] [varchar](15) NOT NULL
                                 ,[LastRecord] [varchar](max) NULL
                                 ,[ActualRecord] [varchar](max) NOT NULL
                                 ,[IsConfirmed] [bit] NULL
                                 ,[CreatedAt] datetime NOT NULL
                                 ,[CreatedBy] varchar(25) NOT NULL
                                 ,[UpdatedAt] datetime NULL
                                 ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [cruda].[Operations] ADD CONSTRAINT PK_Operations PRIMARY KEY CLUSTERED([Id])
CREATE INDEX [IDX_Operations_TransactionId_TableName_Action_IsConfirmed] ON [cruda].[Operations]([TransactionId], [TableName], [Action], [IsConfirmed])
GO
ALTER TABLE [cruda].[Operations] WITH CHECK 
    ADD CONSTRAINT [FK_Operations_Transactions] 
    FOREIGN KEY([TransactionId]) 
    REFERENCES [cruda].[Transactions] ([Id])
GO
ALTER TABLE [cruda].[Operations] CHECK CONSTRAINT [FK_Operations_Transactions]
GO
/**********************************************************************************
Criar stored procedure [cruda].TransactionBegin]
**********************************************************************************/
IF(SELECT object_id('[cruda].[TransactionBegin]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [cruda].[TransactionBegin] AS PRINT 1')
GO
ALTER PROCEDURE[cruda].[TransactionBegin](@LoginId BIGINT
										 ,@UserName VARCHAR(25)) AS BEGIN
	DECLARE @TRANCOUNT INT = @@TRANCOUNT

	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED
		
		DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TransactionBegin]: '
				,@TransactionId	INT

		BEGIN TRANSACTION
		SAVE TRANSACTION [SavePoint]
		IF @LoginId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		INSERT [cruda].[Transactions] ([LoginId]
									  ,[IsConfirmed]
									  ,[CreatedAt]
									  ,[CreatedBy])
								VALUES (@LoginId
									   ,NULL
									   ,GETDATE()
									   ,@UserName)
		SET @TransactionId = @@IDENTITY
		COMMIT TRANSACTION

		RETURN CAST(@TransactionId AS INT)
	END TRY
	BEGIN CATCH
		IF @@TRANCOUNT > @TRANCOUNT BEGIN
			ROLLBACK TRANSACTION [SavePoint]
			COMMIT TRANSACTION
		END;
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [cruda].[TransactionCommit]
**********************************************************************************/
IF(SELECT object_id('[cruda].[TransactionCommit]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [cruda].[TransactionCommit] AS PRINT 1')
GO
ALTER PROCEDURE[cruda].[TransactionCommit](@TransactionId INT
										  ,@UserName VARCHAR(25)) AS BEGIN
	DECLARE @TRANCOUNT INT = @@TRANCOUNT

	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED

		DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TransactionCommit]: '
				,@LoginId BIGINT
				,@OperationId BIGINT
				,@TableName VARCHAR(25)
				,@IsConfirmed BIT
				,@CreatedBy VARCHAR(25)
				,@sql VARCHAR(MAX)

		BEGIN TRANSACTION
		SAVE TRANSACTION [SavePoint]
		IF @TransactionId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Valor de @TransactionId é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT @LoginId = [LoginId]
			  ,@IsConfirmed = [IsConfirmed]
			  ,@CreatedBy = [CreatedBy]
			FROM [cruda].[Transactions]
			WHERE [Id] = @TransactionId
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Transação inexistente';
			THROW 51000, @ErrorMessage, 1
		END
		IF @IsConfirmed IS NOT NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
			THROW 51000, @ErrorMessage, 1
		END
		IF @UserName <> @CreatedBy BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
			THROW 51000, @ErrorMessage, 1
		END
		WHILE 1 = 1 BEGIN
			SELECT TOP 1 @OperationId = [Id]
						,@TableName = [TableName]
				FROM [cruda].[Operations]
				WHERE [TransactionId] = @TransactionId
						AND [IsConfirmed] IS NULL
			IF @@ROWCOUNT = 0
				BREAK
			SET @sql = '[dbo].[' + @TableName + 'Commit] @LoginId = ' + CAST(@LoginId AS VARCHAR) + ', @OperationId = ' + CAST(@OperationId AS VARCHAR)
			EXEC @sql
		END
		UPDATE [cruda].[Transactions]
			SET [IsConfirmed] = 1
				,[UpdatedBy] = @UserName
				,[UpdatedAt] = GETDATE()
			WHERE [Id] = @TransactionId
		COMMIT TRANSACTION

		RETURN 1
	END TRY
	BEGIN CATCH
		IF @@TRANCOUNT > @TRANCOUNT BEGIN
			ROLLBACK TRANSACTION [SavePoint]
			COMMIT TRANSACTION
		END;
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [cruda].[TransactionRollback]
**********************************************************************************/
IF(SELECT object_id('[cruda].[TransactionRollback]', 'P')) IS NULL
	EXEC('CREATE PROCEDURE [cruda].[TransactionRollback] AS PRINT 1')
GO
ALTER PROCEDURE[cruda].[TransactionRollback](@TransactionId INT
											,@UserName VARCHAR(25)) AS BEGIN
	DECLARE @TRANCOUNT INT = @@TRANCOUNT

	BEGIN TRY
		SET NOCOUNT ON
		SET TRANSACTION ISOLATION LEVEL READ COMMITTED

		DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TransactionRollback]: '
				,@OperationId INT
				,@CreatedBy VARCHAR(25)
				,@IsConfirmed BIT

		BEGIN TRANSACTION
		SAVE TRANSACTION [SavePoint]
		IF @TransactionId IS NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Valor de @TransactionId é requerido';
			THROW 51000, @ErrorMessage, 1
		END
		SELECT @IsConfirmed = [IsConfirmed]
			  ,@CreatedBy = [CreatedBy]
			FROM [cruda].[Transactions]
			WHERE [Id] = @TransactionId
		IF @@ROWCOUNT = 0 BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Transação inexistente';
			THROW 51000, @ErrorMessage, 1
		END
		IF @IsConfirmed IS NOT NULL BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
			THROW 51000, @ErrorMessage, 1
		END
		IF @UserName <> @CreatedBy BEGIN
			SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
			THROW 51000, @ErrorMessage, 1
		END
		WHILE 1 = 1 BEGIN
			SELECT TOP 1 @OperationId = [Id]
						,@CreatedBy = [CreatedBy]
				FROM [cruda].[Operations]
				WHERE [TransactionId] = @TransactionId
						AND [IsConfirmed] IS NULL
			IF @@ROWCOUNT = 0
				BREAK
			IF @UserName <> @CreatedBy BEGIN
				SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
				THROW 51000, @ErrorMessage, 1
			END
			UPDATE [cruda].[Operations]
				SET [IsConfirmed] = 0
					,[UpdatedBy] = @UserName
					,[UpdatedAt] = GETDATE()
				WHERE [Id] = @OperationId
		END
		UPDATE [cruda].[Transactions]
			SET [IsConfirmed] = 0
				,[UpdatedBy] = @UserName
				,[UpdatedAt] = GETDATE()
			WHERE [Id] = @TransactionId
		COMMIT TRANSACTION

		RETURN 1
	END TRY
	BEGIN CATCH
		IF @@TRANCOUNT > @TRANCOUNT BEGIN
			ROLLBACK TRANSACTION [SavePoint]
			COMMIT TRANSACTION
		END;
		THROW
	END CATCH
END
GO
/**********************************************************************************
Criar tabela [dbo].[Categories]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Categories]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Categories]
CREATE TABLE [dbo].[Categories]([Id] tinyint NOT NULL DEFAULT CAST('5' AS tinyint) CHECK ([Id] >= CAST('1' AS tinyint) AND [Id] <= CAST('255' AS tinyint))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[HtmlInputType] varchar(10) NULL
                                    ,[HtmlInputAlign] varchar(6) NULL
                                    ,[AskEncrypted] bit NOT NULL
                                    ,[AskMask] bit NOT NULL
                                    ,[AskListable] bit NOT NULL
                                    ,[AskDefault] bit NOT NULL
                                    ,[AskMinimum] bit NOT NULL
                                    ,[AskMaximum] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Categories] ADD CONSTRAINT PK_Categories PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Categories_Name] ON [dbo].[Categories]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Types]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Types]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Types]
CREATE TABLE [dbo].[Types]([Id] tinyint NOT NULL CHECK ([Id] >= CAST('1' AS tinyint) AND [Id] <= CAST('255' AS tinyint))
                                    ,[CategoryId] tinyint NOT NULL CHECK ([CategoryId] >= CAST('0' AS tinyint) AND [CategoryId] <= CAST('255' AS tinyint))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Minimum] nvarchar(MAX) NULL
                                    ,[Maximum] nvarchar(MAX) NULL
                                    ,[AskLength] bit NOT NULL
                                    ,[AskDecimals] bit NOT NULL
                                    ,[AskPrimarykey] bit NOT NULL
                                    ,[AskAutoincrement] bit NOT NULL
                                    ,[AskFilterable] bit NOT NULL
                                    ,[AskBrowseable] bit NOT NULL
                                    ,[AskCodification] bit NOT NULL
                                    ,[AskFormula] bit NOT NULL
                                    ,[AllowMaxLength] bit NOT NULL
                                    ,[IsActive] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Types] ADD CONSTRAINT PK_Types PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Types_Name] ON [dbo].[Types]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Masks]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Masks]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Masks]
CREATE TABLE [dbo].[Masks]([Id] int NOT NULL CHECK ([Id] >= CAST('-2147483648' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Mask] varchar(MAX) NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Masks] ADD CONSTRAINT PK_Masks PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Masks_Name] ON [dbo].[Masks]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Domains]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Domains]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Domains]
CREATE TABLE [dbo].[Domains]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[TypeId] tinyint NOT NULL CHECK ([TypeId] >= CAST('1' AS tinyint) AND [TypeId] <= CAST('255' AS tinyint))
                                    ,[MaskId] int NULL CHECK ([MaskId] >= CAST('-2147483648' AS int) AND [MaskId] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Length] smallint NULL CHECK ([Length] >= CAST('0' AS smallint) AND [Length] <= CAST('32767' AS smallint))
                                    ,[Decimals] tinyint NULL CHECK ([Decimals] >= CAST('0' AS tinyint) AND [Decimals] <= CAST('255' AS tinyint))
                                    ,[ValidValues] varchar(MAX) NULL
                                    ,[Default] nvarchar(MAX) NULL
                                    ,[Minimum] nvarchar(MAX) NULL
                                    ,[Maximum] nvarchar(MAX) NULL
                                    ,[Codification] varchar(5) NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Domains] ADD CONSTRAINT PK_Domains PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Domains_Name] ON [dbo].[Domains]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Systems]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Systems]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Systems]
CREATE TABLE [dbo].[Systems]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Description] varchar(50) NOT NULL
                                    ,[ClientName] varchar(15) NOT NULL
                                    ,[MaxRetryLogins] tinyint NOT NULL DEFAULT CAST('5' AS tinyint) CHECK ([MaxRetryLogins] >= CAST('1' AS tinyint) AND [MaxRetryLogins] <= CAST('255' AS tinyint))
                                    ,[IsOffAir] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Systems] ADD CONSTRAINT PK_Systems PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Systems_Name] ON [dbo].[Systems]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Menus]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Menus]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Menus]
CREATE TABLE [dbo].[Menus]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[SystemId] int NOT NULL CHECK ([SystemId] >= CAST('1' AS int) AND [SystemId] <= CAST('2147483647' AS int))
                                    ,[Sequence] smallint NOT NULL CHECK ([Sequence] >= CAST('1' AS smallint) AND [Sequence] <= CAST('32767' AS smallint))
                                    ,[Caption] varchar(20) NOT NULL
                                    ,[Message] varchar(50) NOT NULL
                                    ,[Action] varchar(50) NULL
                                    ,[ParentMenuId] int NULL CHECK ([ParentMenuId] >= CAST('1' AS int) AND [ParentMenuId] <= CAST('2147483647' AS int))
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Menus] ADD CONSTRAINT PK_Menus PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Menus_SystemId_Sequence] ON [dbo].[Menus]([SystemId] ASC, [Sequence] ASC)
CREATE UNIQUE INDEX [UNQ_Menus_SystemId_Caption] ON [dbo].[Menus]([SystemId] ASC, [Caption] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Users]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Users]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Users]
CREATE TABLE [dbo].[Users]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Password] varchar(256) NOT NULL
                                    ,[FullName] varchar(50) NOT NULL
                                    ,[RetryLogins] tinyint NOT NULL DEFAULT CAST('0' AS tinyint) CHECK ([RetryLogins] >= CAST('0' AS tinyint) AND [RetryLogins] <= CAST('255' AS tinyint))
                                    ,[IsActive] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Users] ADD CONSTRAINT PK_Users PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Users_Name] ON [dbo].[Users]([Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[SystemsUsers]
**********************************************************************************/
IF (SELECT object_id('[dbo].[SystemsUsers]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[SystemsUsers]
CREATE TABLE [dbo].[SystemsUsers]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[SystemId] int NOT NULL CHECK ([SystemId] >= CAST('1' AS int) AND [SystemId] <= CAST('2147483647' AS int))
                                    ,[UserId] int NOT NULL CHECK ([UserId] >= CAST('1' AS int) AND [UserId] <= CAST('2147483647' AS int))
                                    ,[Description] varchar(50) NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[SystemsUsers] ADD CONSTRAINT PK_SystemsUsers PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_SystemsUsers_SystemId_UserId] ON [dbo].[SystemsUsers]([SystemId] ASC, [UserId] ASC)
CREATE UNIQUE INDEX [UNQ_SystemsUsers_Description] ON [dbo].[SystemsUsers]([Description] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Databases]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Databases]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Databases]
CREATE TABLE [dbo].[Databases]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Description] varchar(50) NOT NULL
                                    ,[Alias] varchar(25) NOT NULL
                                    ,[ServerName] varchar(50) NULL
                                    ,[HostName] varchar(25) NULL
                                    ,[Port] int NULL CHECK ([Port] >= CAST('1' AS int) AND [Port] <= CAST('65535' AS int))
                                    ,[Logon] varchar(256) NULL
                                    ,[Password] varchar(256) NULL
                                    ,[Folder] varchar(256) NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Databases] ADD CONSTRAINT PK_Databases PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Databases_Name] ON [dbo].[Databases]([Name] ASC)
CREATE UNIQUE INDEX [UNQ_Databases_Alias] ON [dbo].[Databases]([Alias] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[SystemsDatabases]
**********************************************************************************/
IF (SELECT object_id('[dbo].[SystemsDatabases]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[SystemsDatabases]
CREATE TABLE [dbo].[SystemsDatabases]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[SystemId] int NOT NULL CHECK ([SystemId] >= CAST('1' AS int) AND [SystemId] <= CAST('2147483647' AS int))
                                    ,[DatabaseId] int NOT NULL CHECK ([DatabaseId] >= CAST('1' AS int) AND [DatabaseId] <= CAST('2147483647' AS int))
                                    ,[Description] varchar(50) NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[SystemsDatabases] ADD CONSTRAINT PK_SystemsDatabases PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_SystemsDatabases_SystemId_DatabaseId] ON [dbo].[SystemsDatabases]([SystemId] ASC, [DatabaseId] ASC)
CREATE UNIQUE INDEX [UNQ_SystemsDatabases_Description] ON [dbo].[SystemsDatabases]([Description] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Tables]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Tables]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Tables]
CREATE TABLE [dbo].[Tables]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Alias] varchar(25) NOT NULL
                                    ,[Description] varchar(50) NOT NULL
                                    ,[ParentTableId] int NULL CHECK ([ParentTableId] >= CAST('0' AS int) AND [ParentTableId] <= CAST('2147483647' AS int))
                                    ,[IsPaged] bit NOT NULL
                                    ,[CurrentId] int NOT NULL DEFAULT CAST('0' AS int) CHECK ([CurrentId] >= CAST('0' AS int) AND [CurrentId] <= CAST('2147483647' AS int))
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Tables] ADD CONSTRAINT PK_Tables PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Tables_Name] ON [dbo].[Tables]([Name] ASC)
CREATE UNIQUE INDEX [UNQ_Tables_Alias] ON [dbo].[Tables]([Alias] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[DatabasesTables]
**********************************************************************************/
IF (SELECT object_id('[dbo].[DatabasesTables]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[DatabasesTables]
CREATE TABLE [dbo].[DatabasesTables]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[DatabaseId] int NOT NULL CHECK ([DatabaseId] >= CAST('1' AS int) AND [DatabaseId] <= CAST('2147483647' AS int))
                                    ,[TableId] int NOT NULL CHECK ([TableId] >= CAST('1' AS int) AND [TableId] <= CAST('2147483647' AS int))
                                    ,[Description] varchar(50) NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[DatabasesTables] ADD CONSTRAINT PK_DatabasesTables PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_DatabasesTables_DatabaseId_TableId] ON [dbo].[DatabasesTables]([Id] ASC, [TableId] ASC)
CREATE UNIQUE INDEX [UNQ_DatabasesTables_Description] ON [dbo].[DatabasesTables]([Description] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Columns]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Columns]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Columns]
CREATE TABLE [dbo].[Columns]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[TableId] int NOT NULL CHECK ([TableId] >= CAST('1' AS int) AND [TableId] <= CAST('2147483647' AS int))
                                    ,[Sequence] smallint NOT NULL CHECK ([Sequence] >= CAST('1' AS smallint) AND [Sequence] <= CAST('32767' AS smallint))
                                    ,[DomainId] int NOT NULL CHECK ([DomainId] >= CAST('1' AS int) AND [DomainId] <= CAST('2147483647' AS int))
                                    ,[ReferenceTableId] int NULL CHECK ([ReferenceTableId] >= CAST('1' AS int) AND [ReferenceTableId] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(25) NOT NULL
                                    ,[Description] varchar(50) NOT NULL
                                    ,[Title] varchar(25) NOT NULL
                                    ,[Caption] varchar(25) NOT NULL
                                    ,[ValidValues] varchar(MAX) NULL
                                    ,[Default] nvarchar(MAX) NULL
                                    ,[Minimum] nvarchar(MAX) NULL
                                    ,[Maximum] nvarchar(MAX) NULL
                                    ,[IsPrimarykey] bit NULL
                                    ,[IsAutoIncrement] bit NULL
                                    ,[IsRequired] bit NOT NULL
                                    ,[IsListable] bit NULL
                                    ,[IsFilterable] bit NULL
                                    ,[IsEditable] bit NULL
                                    ,[IsBrowseable] bit NULL
                                    ,[IsEncrypted] bit NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Columns] ADD CONSTRAINT PK_Columns PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Columns_TableId_Name] ON [dbo].[Columns]([TableId] ASC, [Name] ASC)
CREATE UNIQUE INDEX [UNQ_Columns_TableId_Sequence] ON [dbo].[Columns]([TableId] ASC, [Sequence] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Indexes]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Indexes]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Indexes]
CREATE TABLE [dbo].[Indexes]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[DatabaseId] int NOT NULL CHECK ([DatabaseId] >= CAST('1' AS int) AND [DatabaseId] <= CAST('2147483647' AS int))
                                    ,[TableId] int NOT NULL CHECK ([TableId] >= CAST('1' AS int) AND [TableId] <= CAST('2147483647' AS int))
                                    ,[Name] varchar(50) NOT NULL
                                    ,[IsUnique] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Indexes] ADD CONSTRAINT PK_Indexes PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Indexes_DatabaseId_Name] ON [dbo].[Indexes]([DatabaseId] ASC, [Name] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Indexkeys]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Indexkeys]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Indexkeys]
CREATE TABLE [dbo].[Indexkeys]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[IndexId] int NOT NULL CHECK ([IndexId] >= CAST('1' AS int) AND [IndexId] <= CAST('2147483647' AS int))
                                    ,[Sequence] smallint NOT NULL CHECK ([Sequence] >= CAST('1' AS smallint) AND [Sequence] <= CAST('32767' AS smallint))
                                    ,[ColumnId] int NOT NULL CHECK ([ColumnId] >= CAST('1' AS int) AND [ColumnId] <= CAST('2147483647' AS int))
                                    ,[IsDescending] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Indexkeys] ADD CONSTRAINT PK_Indexkeys PRIMARY KEY CLUSTERED ([Id])
CREATE UNIQUE INDEX [UNQ_Indexkeys_IndexId_Sequence] ON [dbo].[Indexkeys]([IndexId] ASC, [Sequence] ASC)
CREATE UNIQUE INDEX [UNQ_Indexkeys_IndexId_ColumnId] ON [dbo].[Indexkeys]([IndexId] ASC, [ColumnId] ASC)
GO
/**********************************************************************************
Criar tabela [dbo].[Logins]
**********************************************************************************/
IF (SELECT object_id('[dbo].[Logins]', 'U')) IS NOT NULL
    DROP TABLE [dbo].[Logins]
CREATE TABLE [dbo].[Logins]([Id] int NOT NULL CHECK ([Id] >= CAST('1' AS int) AND [Id] <= CAST('2147483647' AS int))
                                    ,[SystemId] int NOT NULL CHECK ([SystemId] >= CAST('1' AS int) AND [SystemId] <= CAST('2147483647' AS int))
                                    ,[UserId] int NOT NULL CHECK ([UserId] >= CAST('1' AS int) AND [UserId] <= CAST('2147483647' AS int))
                                    ,[PublicKey] varchar(256) NOT NULL
                                    ,[IsLogged] bit NOT NULL
                                    ,[CreatedAt] datetime NOT NULL
                                    ,[CreatedBy] varchar(25) NOT NULL
                                    ,[UpdatedAt] datetime NULL
                                    ,[UpdatedBy] varchar(25) NULL)
ALTER TABLE [dbo].[Logins] ADD CONSTRAINT PK_Logins PRIMARY KEY CLUSTERED ([Id])
CREATE  INDEX [IDX_Logins_SystemId_UserId_IsLogged] ON [dbo].[Logins]([SystemId] ASC, [UserId] ASC, [IsLogged] ASC)
GO
/**********************************************************************************
Criar referências de [dbo].[Types]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Types_Categories')
    ALTER TABLE [dbo].[Types] DROP CONSTRAINT FK_Types_Categories
GO
ALTER TABLE [dbo].[Types] WITH CHECK 
    ADD CONSTRAINT [FK_Types_Categories] 
    FOREIGN KEY([CategoryId]) 
    REFERENCES [dbo].[Categories] ([Id])
GO
ALTER TABLE [dbo].[Types] CHECK CONSTRAINT [FK_Types_Categories]
GO
/**********************************************************************************
Criar referências de [dbo].[Domains]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Domains_Types')
    ALTER TABLE [dbo].[Domains] DROP CONSTRAINT FK_Domains_Types
GO
ALTER TABLE [dbo].[Domains] WITH CHECK 
    ADD CONSTRAINT [FK_Domains_Types] 
    FOREIGN KEY([TypeId]) 
    REFERENCES [dbo].[Types] ([Id])
GO
ALTER TABLE [dbo].[Domains] CHECK CONSTRAINT [FK_Domains_Types]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Domains_Masks')
    ALTER TABLE [dbo].[Domains] DROP CONSTRAINT FK_Domains_Masks
GO
ALTER TABLE [dbo].[Domains] WITH CHECK 
    ADD CONSTRAINT [FK_Domains_Masks] 
    FOREIGN KEY([MaskId]) 
    REFERENCES [dbo].[Masks] ([Id])
GO
ALTER TABLE [dbo].[Domains] CHECK CONSTRAINT [FK_Domains_Masks]
GO
/**********************************************************************************
Criar referências de [dbo].[Menus]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Menus_Systems')
    ALTER TABLE [dbo].[Menus] DROP CONSTRAINT FK_Menus_Systems
GO
ALTER TABLE [dbo].[Menus] WITH CHECK 
    ADD CONSTRAINT [FK_Menus_Systems] 
    FOREIGN KEY([SystemId]) 
    REFERENCES [dbo].[Systems] ([Id])
GO
ALTER TABLE [dbo].[Menus] CHECK CONSTRAINT [FK_Menus_Systems]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Menus_Menus')
    ALTER TABLE [dbo].[Menus] DROP CONSTRAINT FK_Menus_Menus
GO
ALTER TABLE [dbo].[Menus] WITH CHECK 
    ADD CONSTRAINT [FK_Menus_Menus] 
    FOREIGN KEY([ParentMenuId]) 
    REFERENCES [dbo].[Menus] ([Id])
GO
ALTER TABLE [dbo].[Menus] CHECK CONSTRAINT [FK_Menus_Menus]
GO
/**********************************************************************************
Criar referências de [dbo].[SystemsUsers]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_SystemsUsers_Systems')
    ALTER TABLE [dbo].[SystemsUsers] DROP CONSTRAINT FK_SystemsUsers_Systems
GO
ALTER TABLE [dbo].[SystemsUsers] WITH CHECK 
    ADD CONSTRAINT [FK_SystemsUsers_Systems] 
    FOREIGN KEY([SystemId]) 
    REFERENCES [dbo].[Systems] ([Id])
GO
ALTER TABLE [dbo].[SystemsUsers] CHECK CONSTRAINT [FK_SystemsUsers_Systems]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_SystemsUsers_Users')
    ALTER TABLE [dbo].[SystemsUsers] DROP CONSTRAINT FK_SystemsUsers_Users
GO
ALTER TABLE [dbo].[SystemsUsers] WITH CHECK 
    ADD CONSTRAINT [FK_SystemsUsers_Users] 
    FOREIGN KEY([UserId]) 
    REFERENCES [dbo].[Users] ([Id])
GO
ALTER TABLE [dbo].[SystemsUsers] CHECK CONSTRAINT [FK_SystemsUsers_Users]
GO
/**********************************************************************************
Criar referências de [dbo].[SystemsDatabases]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_SystemsDatabases_Systems')
    ALTER TABLE [dbo].[SystemsDatabases] DROP CONSTRAINT FK_SystemsDatabases_Systems
GO
ALTER TABLE [dbo].[SystemsDatabases] WITH CHECK 
    ADD CONSTRAINT [FK_SystemsDatabases_Systems] 
    FOREIGN KEY([SystemId]) 
    REFERENCES [dbo].[Systems] ([Id])
GO
ALTER TABLE [dbo].[SystemsDatabases] CHECK CONSTRAINT [FK_SystemsDatabases_Systems]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_SystemsDatabases_Databases')
    ALTER TABLE [dbo].[SystemsDatabases] DROP CONSTRAINT FK_SystemsDatabases_Databases
GO
ALTER TABLE [dbo].[SystemsDatabases] WITH CHECK 
    ADD CONSTRAINT [FK_SystemsDatabases_Databases] 
    FOREIGN KEY([DatabaseId]) 
    REFERENCES [dbo].[Databases] ([Id])
GO
ALTER TABLE [dbo].[SystemsDatabases] CHECK CONSTRAINT [FK_SystemsDatabases_Databases]
GO
/**********************************************************************************
Criar referências de [dbo].[DatabasesTables]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_DatabasesTables_Databases')
    ALTER TABLE [dbo].[DatabasesTables] DROP CONSTRAINT FK_DatabasesTables_Databases
GO
ALTER TABLE [dbo].[DatabasesTables] WITH CHECK 
    ADD CONSTRAINT [FK_DatabasesTables_Databases] 
    FOREIGN KEY([DatabaseId]) 
    REFERENCES [dbo].[Databases] ([Id])
GO
ALTER TABLE [dbo].[DatabasesTables] CHECK CONSTRAINT [FK_DatabasesTables_Databases]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_DatabasesTables_Tables')
    ALTER TABLE [dbo].[DatabasesTables] DROP CONSTRAINT FK_DatabasesTables_Tables
GO
ALTER TABLE [dbo].[DatabasesTables] WITH CHECK 
    ADD CONSTRAINT [FK_DatabasesTables_Tables] 
    FOREIGN KEY([TableId]) 
    REFERENCES [dbo].[Tables] ([Id])
GO
ALTER TABLE [dbo].[DatabasesTables] CHECK CONSTRAINT [FK_DatabasesTables_Tables]
GO
/**********************************************************************************
Criar referências de [dbo].[Columns]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Columns_Tables')
    ALTER TABLE [dbo].[Columns] DROP CONSTRAINT FK_Columns_Tables
GO
ALTER TABLE [dbo].[Columns] WITH CHECK 
    ADD CONSTRAINT [FK_Columns_Tables] 
    FOREIGN KEY([TableId]) 
    REFERENCES [dbo].[Tables] ([Id])
GO
ALTER TABLE [dbo].[Columns] CHECK CONSTRAINT [FK_Columns_Tables]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Columns_Domains')
    ALTER TABLE [dbo].[Columns] DROP CONSTRAINT FK_Columns_Domains
GO
ALTER TABLE [dbo].[Columns] WITH CHECK 
    ADD CONSTRAINT [FK_Columns_Domains] 
    FOREIGN KEY([DomainId]) 
    REFERENCES [dbo].[Domains] ([Id])
GO
ALTER TABLE [dbo].[Columns] CHECK CONSTRAINT [FK_Columns_Domains]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Columns_Tables')
    ALTER TABLE [dbo].[Columns] DROP CONSTRAINT FK_Columns_Tables
GO
ALTER TABLE [dbo].[Columns] WITH CHECK 
    ADD CONSTRAINT [FK_Columns_Tables] 
    FOREIGN KEY([ReferenceTableId]) 
    REFERENCES [dbo].[Tables] ([Id])
GO
ALTER TABLE [dbo].[Columns] CHECK CONSTRAINT [FK_Columns_Tables]
GO
/**********************************************************************************
Criar referências de [dbo].[Indexes]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Indexes_Databases')
    ALTER TABLE [dbo].[Indexes] DROP CONSTRAINT FK_Indexes_Databases
GO
ALTER TABLE [dbo].[Indexes] WITH CHECK 
    ADD CONSTRAINT [FK_Indexes_Databases] 
    FOREIGN KEY([DatabaseId]) 
    REFERENCES [dbo].[Databases] ([Id])
GO
ALTER TABLE [dbo].[Indexes] CHECK CONSTRAINT [FK_Indexes_Databases]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Indexes_Tables')
    ALTER TABLE [dbo].[Indexes] DROP CONSTRAINT FK_Indexes_Tables
GO
ALTER TABLE [dbo].[Indexes] WITH CHECK 
    ADD CONSTRAINT [FK_Indexes_Tables] 
    FOREIGN KEY([TableId]) 
    REFERENCES [dbo].[Tables] ([Id])
GO
ALTER TABLE [dbo].[Indexes] CHECK CONSTRAINT [FK_Indexes_Tables]
GO
/**********************************************************************************
Criar referências de [dbo].[Indexkeys]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Indexkeys_Indexes')
    ALTER TABLE [dbo].[Indexkeys] DROP CONSTRAINT FK_Indexkeys_Indexes
GO
ALTER TABLE [dbo].[Indexkeys] WITH CHECK 
    ADD CONSTRAINT [FK_Indexkeys_Indexes] 
    FOREIGN KEY([IndexId]) 
    REFERENCES [dbo].[Indexes] ([Id])
GO
ALTER TABLE [dbo].[Indexkeys] CHECK CONSTRAINT [FK_Indexkeys_Indexes]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Indexkeys_Columns')
    ALTER TABLE [dbo].[Indexkeys] DROP CONSTRAINT FK_Indexkeys_Columns
GO
ALTER TABLE [dbo].[Indexkeys] WITH CHECK 
    ADD CONSTRAINT [FK_Indexkeys_Columns] 
    FOREIGN KEY([ColumnId]) 
    REFERENCES [dbo].[Columns] ([Id])
GO
ALTER TABLE [dbo].[Indexkeys] CHECK CONSTRAINT [FK_Indexkeys_Columns]
GO
/**********************************************************************************
Criar referências de [dbo].[Logins]
**********************************************************************************/
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Logins_Systems')
    ALTER TABLE [dbo].[Logins] DROP CONSTRAINT FK_Logins_Systems
GO
ALTER TABLE [dbo].[Logins] WITH CHECK 
    ADD CONSTRAINT [FK_Logins_Systems] 
    FOREIGN KEY([SystemId]) 
    REFERENCES [dbo].[Systems] ([Id])
GO
ALTER TABLE [dbo].[Logins] CHECK CONSTRAINT [FK_Logins_Systems]
GO
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME = 'FK_Logins_Users')
    ALTER TABLE [dbo].[Logins] DROP CONSTRAINT FK_Logins_Users
GO
ALTER TABLE [dbo].[Logins] WITH CHECK 
    ADD CONSTRAINT [FK_Logins_Users] 
    FOREIGN KEY([UserId]) 
    REFERENCES [dbo].[Users] ([Id])
GO
ALTER TABLE [dbo].[Logins] CHECK CONSTRAINT [FK_Logins_Users]
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Categories]
**********************************************************************************/
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS tinyint)
                                ,CAST('string' AS varchar(25))
                                ,CAST('text' AS varchar(10))
                                ,CAST('left' AS varchar(6))
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS tinyint)
                                ,CAST('numeric' AS varchar(25))
                                ,CAST('text' AS varchar(10))
                                ,CAST('right' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS tinyint)
                                ,CAST('date' AS varchar(25))
                                ,CAST('text' AS varchar(10))
                                ,CAST('right' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS tinyint)
                                ,CAST('datetime' AS varchar(25))
                                ,CAST('text' AS varchar(10))
                                ,CAST('right' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS tinyint)
                                ,CAST('boolean' AS varchar(25))
                                ,CAST('checkbox' AS varchar(10))
                                ,CAST('center' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS tinyint)
                                ,CAST('time' AS varchar(25))
                                ,CAST('text' AS varchar(10))
                                ,CAST('right' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS tinyint)
                                ,CAST('text' AS varchar(25))
                                ,CAST('textarea' AS varchar(10))
                                ,CAST('left' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS tinyint)
                                ,CAST('image' AS varchar(25))
                                ,CAST('image' AS varchar(10))
                                ,CAST('left' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS tinyint)
                                ,CAST('binary' AS varchar(25))
                                ,CAST('file' AS varchar(10))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Categories] ([Id]
                                ,[Name]
                                ,[HtmlInputType]
                                ,[HtmlInputAlign]
                                ,[AskEncrypted]
                                ,[AskMask]
                                ,[AskListable]
                                ,[AskDefault]
                                ,[AskMinimum]
                                ,[AskMaximum]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS tinyint)
                                ,CAST('undefined' AS varchar(25))
                                ,CAST('textarea' AS varchar(10))
                                ,CAST('left' AS varchar(6))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Types]
**********************************************************************************/
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('bigint' AS varchar(25))
                                ,CAST('-9007199254740990' AS nvarchar(MAX))
                                ,CAST('9007199254740990' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS tinyint)
                                ,CAST('9' AS tinyint)
                                ,CAST('binary' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS tinyint)
                                ,CAST('5' AS tinyint)
                                ,CAST('bit' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('char' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS tinyint)
                                ,CAST('3' AS tinyint)
                                ,CAST('date' AS varchar(25))
                                ,CAST('01/01/0001' AS nvarchar(MAX))
                                ,CAST('31/12/9999' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS tinyint)
                                ,CAST('4' AS tinyint)
                                ,CAST('datetime' AS varchar(25))
                                ,CAST('01/01/1753 00:00:00.000' AS nvarchar(MAX))
                                ,CAST('31/12/9999 23:59:59.997' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS tinyint)
                                ,CAST('4' AS tinyint)
                                ,CAST('datetime2' AS varchar(25))
                                ,CAST('01/01/0001 00:00:00.0000000' AS nvarchar(MAX))
                                ,CAST('31/12/9999 23:59:59.9999999' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS tinyint)
                                ,CAST('4' AS tinyint)
                                ,CAST('datetimeoffset' AS varchar(25))
                                ,CAST('01/01/0001 00:00:00.0000000' AS nvarchar(MAX))
                                ,CAST('31/12/9999 23:59:59.9999999' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('decimal' AS varchar(25))
                                ,CAST('-9007199254740990' AS nvarchar(MAX))
                                ,CAST('9007199254740990' AS nvarchar(MAX))
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('float' AS varchar(25))
                                ,CAST('-9007199254740990' AS nvarchar(MAX))
                                ,CAST('9007199254740990' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS tinyint)
                                ,CAST('7' AS tinyint)
                                ,CAST('geography' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS tinyint)
                                ,CAST('7' AS tinyint)
                                ,CAST('geometry' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('hierarchyid' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS tinyint)
                                ,CAST('8' AS tinyint)
                                ,CAST('image' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('int' AS varchar(25))
                                ,CAST('-2147483648' AS nvarchar(MAX))
                                ,CAST('2147483647' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('money' AS varchar(25))
                                ,CAST('-922337203685477' AS nvarchar(MAX))
                                ,CAST('922337203685477' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('17' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('nchar' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('18' AS tinyint)
                                ,CAST('7' AS tinyint)
                                ,CAST('ntext' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('19' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('numeric' AS varchar(25))
                                ,CAST('-9007199254740990' AS nvarchar(MAX))
                                ,CAST('9007199254740990' AS nvarchar(MAX))
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('20' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('nvarchar' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('21' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('real' AS varchar(25))
                                ,CAST('-9007199254740990' AS nvarchar(MAX))
                                ,CAST('9007199254740990' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('22' AS tinyint)
                                ,CAST('4' AS tinyint)
                                ,CAST('smalldatetime' AS varchar(25))
                                ,CAST('01/01/1900' AS nvarchar(MAX))
                                ,CAST('06/06/2079' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('23' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('smallint' AS varchar(25))
                                ,CAST('-32768' AS nvarchar(MAX))
                                ,CAST('32767' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('24' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('smallmoney' AS varchar(25))
                                ,CAST('214748' AS nvarchar(MAX))
                                ,CAST('214748' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('25' AS tinyint)
                                ,CAST('10' AS tinyint)
                                ,CAST('sql_variant' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('26' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('sysname' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('27' AS tinyint)
                                ,CAST('7' AS tinyint)
                                ,CAST('text' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('28' AS tinyint)
                                ,CAST('6' AS tinyint)
                                ,CAST('time' AS varchar(25))
                                ,CAST('00:00:00.0000000' AS nvarchar(MAX))
                                ,CAST('23:59:59.9999999' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('29' AS tinyint)
                                ,CAST('4' AS tinyint)
                                ,CAST('timestamp' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('30' AS tinyint)
                                ,CAST('2' AS tinyint)
                                ,CAST('tinyint' AS varchar(25))
                                ,CAST('0' AS nvarchar(MAX))
                                ,CAST('255' AS nvarchar(MAX))
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('31' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('uniqueidentifier' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('32' AS tinyint)
                                ,CAST('9' AS tinyint)
                                ,CAST('varbinary' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('33' AS tinyint)
                                ,CAST('1' AS tinyint)
                                ,CAST('varchar' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Types] ([Id]
                                ,[CategoryId]
                                ,[Name]
                                ,[Minimum]
                                ,[Maximum]
                                ,[AskLength]
                                ,[AskDecimals]
                                ,[AskPrimarykey]
                                ,[AskAutoincrement]
                                ,[AskFilterable]
                                ,[AskBrowseable]
                                ,[AskCodification]
                                ,[AskFormula]
                                ,[AllowMaxLength]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('34' AS tinyint)
                                ,CAST('7' AS tinyint)
                                ,CAST('xml' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Masks]
**********************************************************************************/
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('BigInteger' AS varchar(25))
                                ,CAST('#.###.###.###.###.###' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('Integer' AS varchar(25))
                                ,CAST('#.###.###.###' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('SmallInteger' AS varchar(25))
                                ,CAST('##.###' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('TinyInteger' AS varchar(25))
                                ,CAST('###' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('ShortInteger' AS varchar(25))
                                ,CAST('##.###' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Masks] ([Id]
                                ,[Name]
                                ,[Mask]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('DateTime' AS varchar(25))
                                ,CAST('dd/MM/yyyy hh:mm:ss' AS varchar(MAX))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Domains]
**********************************************************************************/
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('15' AS tinyint)
                                ,CAST('1' AS int)
                                ,CAST('BigInteger' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('15' AS tinyint)
                                ,CAST('2' AS int)
                                ,CAST('Integer' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('15' AS tinyint)
                                ,CAST('5' AS int)
                                ,CAST('ShortInteger' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('-65536' AS nvarchar(MAX))
                                ,CAST('65535' AS nvarchar(MAX))
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('23' AS tinyint)
                                ,CAST('3' AS int)
                                ,CAST('SmallInteger' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('30' AS tinyint)
                                ,CAST('4' AS int)
                                ,CAST('TinyInteger' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('3' AS tinyint)
                                ,NULL
                                ,CAST('Boolean' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(15)' AS varchar(25))
                                ,CAST('15' AS smallint)
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(20)' AS varchar(25))
                                ,CAST('20' AS smallint)
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(25)' AS varchar(25))
                                ,CAST('25' AS smallint)
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(50)' AS varchar(25))
                                ,CAST('50' AS smallint)
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(256)' AS varchar(25))
                                ,CAST('256' AS smallint)
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Varchar(MAX)' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('JavaScript' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('JS' AS varchar(5))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('SQL' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('SQL' AS varchar(5))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('JSON' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('JSON' AS varchar(5))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('6' AS tinyint)
                                ,CAST('6' AS int)
                                ,CAST('DateTime' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('17' AS int)
                                ,CAST('20' AS tinyint)
                                ,NULL
                                ,CAST('Variant' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('18' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Codification' AS varchar(25))
                                ,CAST('5' AS smallint)
                                ,NULL
                                ,CAST('JSON;JS;SQL' AS varchar(MAX))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('19' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('HtmlInputType' AS varchar(25))
                                ,CAST('10' AS smallint)
                                ,NULL
                                ,CAST('text;checkbox;textarea;image;file' AS varchar(MAX))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('20' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('HtmlInputAlign' AS varchar(25))
                                ,CAST('6' AS smallint)
                                ,NULL
                                ,CAST('left;center;right' AS varchar(MAX))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Domains] ([Id]
                                ,[TypeId]
                                ,[MaskId]
                                ,[Name]
                                ,[Length]
                                ,[Decimals]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[Codification]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('21' AS int)
                                ,CAST('33' AS tinyint)
                                ,NULL
                                ,CAST('Action' AS varchar(25))
                                ,CAST('15' AS smallint)
                                ,NULL
                                ,CAST('create;read;update;delete;commit;rollback' AS varchar(MAX))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Systems]
**********************************************************************************/
INSERT INTO [dbo].[Systems] ([Id]
                                ,[Name]
                                ,[Description]
                                ,[ClientName]
                                ,[MaxRetryLogins]
                                ,[IsOffAir]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('cruda' AS varchar(25))
                                ,CAST('CRUD Automático' AS varchar(50))
                                ,CAST('DAYCOVAL' AS varchar(15))
                                ,CAST('5' AS tinyint)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Menus]
**********************************************************************************/
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('Cadastros' AS varchar(20))
                                ,CAST('Cadastros' AS varchar(50))
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('1' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('Usuários' AS varchar(20))
                                ,CAST('Cadastro de Usuários' AS varchar(50))
                                ,CAST('browse/cruda/Users' AS varchar(50))
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('1' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('Tabelas' AS varchar(20))
                                ,CAST('Cadastro de tabelas' AS varchar(50))
                                ,CAST('browse/cruda/Tables' AS varchar(50))
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('1' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('Menus' AS varchar(20))
                                ,CAST('Cadastro de menus' AS varchar(50))
                                ,CAST('browse/cruda/Menus' AS varchar(50))
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('1' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('Sistemas' AS varchar(20))
                                ,CAST('Cadastro de sistemas' AS varchar(50))
                                ,CAST('browse/cruda/Systems' AS varchar(50))
                                ,CAST('3' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('1' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('Banco de Dados' AS varchar(20))
                                ,CAST('Cadastro de bancos de dados' AS varchar(50))
                                ,CAST('browse/cruda/Databases' AS varchar(50))
                                ,CAST('3' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('1' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('Colunas' AS varchar(20))
                                ,CAST('Cadastro de colunas de tabelas' AS varchar(50))
                                ,CAST('browse/cruda/Columns' AS varchar(50))
                                ,CAST('7' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('1' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('Tipos' AS varchar(20))
                                ,CAST('Cadastro de tipos' AS varchar(50))
                                ,CAST('browse/cruda/Types' AS varchar(50))
                                ,CAST('7' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('1' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('Associações' AS varchar(20))
                                ,CAST('Associações entre tabelas' AS varchar(50))
                                ,NULL
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('1' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('Sistemas x BD' AS varchar(20))
                                ,CAST('Associação entre sistemas e bancos de dados' AS varchar(50))
                                ,CAST('browse/cruda/SystemsDatabases' AS varchar(50))
                                ,CAST('9' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('1' AS int)
                                ,CAST('55' AS smallint)
                                ,CAST('Usuários x Sistemas' AS varchar(20))
                                ,CAST('Associação entre usuários e sistemas' AS varchar(50))
                                ,CAST('browse/cruda/SystemsUsers' AS varchar(50))
                                ,CAST('9' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Menus] ([Id]
                                ,[SystemId]
                                ,[Sequence]
                                ,[Caption]
                                ,[Message]
                                ,[Action]
                                ,[ParentMenuId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('1' AS int)
                                ,CAST('60' AS smallint)
                                ,CAST('Sair' AS varchar(20))
                                ,CAST('Retornar ao login' AS varchar(50))
                                ,CAST('exit/login' AS varchar(50))
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Users]
**********************************************************************************/
INSERT INTO [dbo].[Users] ([Id]
                                ,[Name]
                                ,[Password]
                                ,[FullName]
                                ,[RetryLogins]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('adm' AS varchar(25))
                                ,CAST('adm' AS varchar(256))
                                ,CAST('Administrador' AS varchar(50))
                                ,CAST('0' AS tinyint)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Users] ([Id]
                                ,[Name]
                                ,[Password]
                                ,[FullName]
                                ,[RetryLogins]
                                ,[IsActive]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('labrego' AS varchar(25))
                                ,CAST('diva' AS varchar(256))
                                ,CAST('João da Rocha Labrego' AS varchar(50))
                                ,CAST('0' AS tinyint)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[SystemsUsers]
**********************************************************************************/
INSERT INTO [dbo].[SystemsUsers] ([Id]
                                ,[SystemId]
                                ,[UserId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('cruda x adm' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[SystemsUsers] ([Id]
                                ,[SystemId]
                                ,[UserId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('1' AS int)
                                ,CAST('2' AS int)
                                ,CAST('cruda x labrego' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Databases]
**********************************************************************************/
INSERT INTO [dbo].[Databases] ([Id]
                                ,[Name]
                                ,[Description]
                                ,[Alias]
                                ,[ServerName]
                                ,[HostName]
                                ,[Port]
                                ,[Logon]
                                ,[Password]
                                ,[Folder]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('cruda' AS varchar(25))
                                ,CAST('CRUD Automático' AS varchar(50))
                                ,CAST('cruda' AS varchar(25))
                                ,CAST('NOTEBOOK-DELL' AS varchar(50))
                                ,CAST('localhost' AS varchar(25))
                                ,CAST('1433' AS int)
                                ,CAST('sa' AS varchar(256))
                                ,CAST('diva' AS varchar(256))
                                ,CAST('D:\CRUDA-C#\CRUDA-CORE\CRUDA\db\' AS varchar(256))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[SystemsDatabases]
**********************************************************************************/
INSERT INTO [dbo].[SystemsDatabases] ([Id]
                                ,[SystemId]
                                ,[DatabaseId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('cruda x cruda' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Tables]
**********************************************************************************/
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('Categories' AS varchar(25))
                                ,CAST('Category' AS varchar(25))
                                ,CAST('Categorias de tipos de dados' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('10' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('Types' AS varchar(25))
                                ,CAST('Type' AS varchar(25))
                                ,CAST('Tipos' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('34' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('Masks' AS varchar(25))
                                ,CAST('Mask' AS varchar(25))
                                ,CAST('Máscaras de Edição' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('6' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('Domains' AS varchar(25))
                                ,CAST('Domain' AS varchar(25))
                                ,CAST('Domínios' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('21' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('Systems' AS varchar(25))
                                ,CAST('System' AS varchar(25))
                                ,CAST('Sistemas' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('Menus' AS varchar(25))
                                ,CAST('Menu' AS varchar(25))
                                ,CAST('Menus' AS varchar(50))
                                ,CAST('5' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('12' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('Users' AS varchar(25))
                                ,CAST('User' AS varchar(25))
                                ,CAST('Usuários' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('2' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('SystemsUsers' AS varchar(25))
                                ,CAST('SystemUser' AS varchar(25))
                                ,CAST('Sistemas x Usuários' AS varchar(50))
                                ,CAST('5' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('2' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('Databases' AS varchar(25))
                                ,CAST('Database' AS varchar(25))
                                ,CAST('Bancos-de-Dados' AS varchar(50))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('SystemsDatabases' AS varchar(25))
                                ,CAST('SystemDatabase' AS varchar(25))
                                ,CAST('Sistemas x Bancos-de-Dados' AS varchar(50))
                                ,CAST('5' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('Tables' AS varchar(25))
                                ,CAST('Table' AS varchar(25))
                                ,CAST('Tabelas' AS varchar(50))
                                ,CAST('9' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('16' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('DatabasesTables' AS varchar(25))
                                ,CAST('DatabaseTable' AS varchar(25))
                                ,CAST('Bancos-de-Dados x Tabelas' AS varchar(50))
                                ,CAST('9' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('16' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('Columns' AS varchar(25))
                                ,CAST('Column' AS varchar(25))
                                ,CAST('Colunas' AS varchar(50))
                                ,CAST('11' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('123' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('Indexes' AS varchar(25))
                                ,CAST('Index' AS varchar(25))
                                ,CAST('Índices' AS varchar(50))
                                ,CAST('11' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('23' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('Indexkeys' AS varchar(25))
                                ,CAST('Indexkey' AS varchar(25))
                                ,CAST('Chaves de índices' AS varchar(50))
                                ,CAST('14' AS int)
                                ,CAST('1' AS bit)
                                ,CAST('34' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Tables] ([Id]
                                ,[Name]
                                ,[Alias]
                                ,[Description]
                                ,[ParentTableId]
                                ,[IsPaged]
                                ,[CurrentId]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('Logins' AS varchar(25))
                                ,CAST('Login' AS varchar(25))
                                ,CAST('Logins de Acesso aos Sistemas' AS varchar(50))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS int)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[DatabasesTables]
**********************************************************************************/
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('cruda x Categories' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('1' AS int)
                                ,CAST('2' AS int)
                                ,CAST('cruda x Types' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('1' AS int)
                                ,CAST('3' AS int)
                                ,CAST('cruda x Masks' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('1' AS int)
                                ,CAST('4' AS int)
                                ,CAST('cruda x Domains' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('cruda x Systems' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('1' AS int)
                                ,CAST('6' AS int)
                                ,CAST('cruda x Menus' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('1' AS int)
                                ,CAST('7' AS int)
                                ,CAST('cruda x Users' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('1' AS int)
                                ,CAST('8' AS int)
                                ,CAST('cruda x SystemsUsers' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('cruda x Databases' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('1' AS int)
                                ,CAST('10' AS int)
                                ,CAST('cruda x SystemsDatabases' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('cruda x Tables' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('1' AS int)
                                ,CAST('12' AS int)
                                ,CAST('cruda x DatabasesTables' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('1' AS int)
                                ,CAST('13' AS int)
                                ,CAST('cruda x Columns' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('1' AS int)
                                ,CAST('14' AS int)
                                ,CAST('cruda x Indexes' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('1' AS int)
                                ,CAST('15' AS int)
                                ,CAST('cruda x Indexkeys' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[DatabasesTables] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Description]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('1' AS int)
                                ,CAST('16' AS int)
                                ,CAST('cruda x Logins' AS varchar(50))
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Columns]
**********************************************************************************/
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('5' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('Id da categoria' AS varchar(50))
                                ,CAST('Categoria' AS varchar(25))
                                ,CAST('Categoria' AS varchar(25))
                                ,NULL
                                ,CAST('5' AS nvarchar(MAX))
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('1' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome da categoria' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('1' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('19' AS int)
                                ,NULL
                                ,CAST('HtmlInputType' AS varchar(25))
                                ,CAST('Tipo do input HTML' AS varchar(50))
                                ,CAST('Tipo input HTML' AS varchar(25))
                                ,CAST('Tipo input HTML' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('1' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('20' AS int)
                                ,NULL
                                ,CAST('HtmlInputAlign' AS varchar(25))
                                ,CAST('Alinhamento do input HTML' AS varchar(50))
                                ,CAST('Alinhamento input HTML' AS varchar(25))
                                ,CAST('Alinhamento input HTML' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('1' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskEncrypted' AS varchar(25))
                                ,CAST('Tipo pede criptografia?' AS varchar(50))
                                ,CAST('Pede criptografia?' AS varchar(25))
                                ,CAST('Pede criptografia?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('1' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskMask' AS varchar(25))
                                ,CAST('Tipo pede máscara?' AS varchar(50))
                                ,CAST('Pede máscara?' AS varchar(25))
                                ,CAST('Pede máscara?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('1' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskListable' AS varchar(25))
                                ,CAST('Tipo pede listável?' AS varchar(50))
                                ,CAST('Pede listável?' AS varchar(25))
                                ,CAST('Pede listável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('1' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskDefault' AS varchar(25))
                                ,CAST('Tipo pede valor padrão?' AS varchar(50))
                                ,CAST('Pede valor padrão?' AS varchar(25))
                                ,CAST('Pede valor padrão?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('1' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskMinimum' AS varchar(25))
                                ,CAST('Tipo pede valor mínimo?' AS varchar(50))
                                ,CAST('Pede valor mínimo?' AS varchar(25))
                                ,CAST('Pede valor mínimo?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('1' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskMaximum' AS varchar(25))
                                ,CAST('Tipo pede valor máximo?' AS varchar(50))
                                ,CAST('Pede valor máximo?' AS varchar(25))
                                ,CAST('Pede valor máximo?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('2' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('5' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do tipo' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('2' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('5' AS int)
                                ,CAST('1' AS int)
                                ,CAST('CategoryId' AS varchar(25))
                                ,CAST('Categoria do tipo' AS varchar(50))
                                ,CAST('Categoria' AS varchar(25))
                                ,CAST('Categoria' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('2' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do tipo' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('2' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Minimum' AS varchar(25))
                                ,CAST('Valor mínimo do tipo' AS varchar(50))
                                ,CAST('Mínimo' AS varchar(25))
                                ,CAST('Mínimo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('2' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Maximum' AS varchar(25))
                                ,CAST('Valor máximo do tipo' AS varchar(50))
                                ,CAST('Máximo' AS varchar(25))
                                ,CAST('Máximo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('2' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskLength' AS varchar(25))
                                ,CAST('Tipo pede tamanho?' AS varchar(50))
                                ,CAST('Pede Tamanho?' AS varchar(25))
                                ,CAST('Pede Tamanho?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('17' AS int)
                                ,CAST('2' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskDecimals' AS varchar(25))
                                ,CAST('Tipo pede decimais?' AS varchar(50))
                                ,CAST('Pede decimais?' AS varchar(25))
                                ,CAST('Pede decimais?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('18' AS int)
                                ,CAST('2' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskPrimarykey' AS varchar(25))
                                ,CAST('Tipo pede chave-primária?' AS varchar(50))
                                ,CAST('Pede chave-primária?' AS varchar(25))
                                ,CAST('Pede chave-primária?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('19' AS int)
                                ,CAST('2' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskAutoincrement' AS varchar(25))
                                ,CAST('Tipo pede autoincremento?' AS varchar(50))
                                ,CAST('Pede autoincremento?' AS varchar(25))
                                ,CAST('Pede autoincremento?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('20' AS int)
                                ,CAST('2' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskFilterable' AS varchar(25))
                                ,CAST('Tipo pede filtrável?' AS varchar(50))
                                ,CAST('Pede filtrável?' AS varchar(25))
                                ,CAST('Pede filtrável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('21' AS int)
                                ,CAST('2' AS int)
                                ,CAST('55' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskBrowseable' AS varchar(25))
                                ,CAST('Tipo pede navegável?' AS varchar(50))
                                ,CAST('Pede navegável?' AS varchar(25))
                                ,CAST('Pede navegável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('22' AS int)
                                ,CAST('2' AS int)
                                ,CAST('60' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskCodification' AS varchar(25))
                                ,CAST('Tipo pede codificação?' AS varchar(50))
                                ,CAST('Pede codificação?' AS varchar(25))
                                ,CAST('Pede codificação?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('23' AS int)
                                ,CAST('2' AS int)
                                ,CAST('65' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AskFormula' AS varchar(25))
                                ,CAST('Tipo pede fórmula?' AS varchar(50))
                                ,CAST('Pede fórmula?' AS varchar(25))
                                ,CAST('Pede fórmula?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('24' AS int)
                                ,CAST('2' AS int)
                                ,CAST('70' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('AllowMaxLength' AS varchar(25))
                                ,CAST('Tipo permite MAX no tamanho?' AS varchar(50))
                                ,CAST('Permite MAX?' AS varchar(25))
                                ,CAST('Permite MAX?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('25' AS int)
                                ,CAST('2' AS int)
                                ,CAST('75' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsActive' AS varchar(25))
                                ,CAST('Tipo é ativo?' AS varchar(50))
                                ,CAST('É ativo?' AS varchar(25))
                                ,CAST('É ativo?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('26' AS int)
                                ,CAST('3' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID da máscara de edição' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('27' AS int)
                                ,CAST('3' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome da máscara' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('28' AS int)
                                ,CAST('3' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('12' AS int)
                                ,NULL
                                ,CAST('Mask' AS varchar(25))
                                ,CAST('Máscara de edição' AS varchar(50))
                                ,CAST('Máscara' AS varchar(25))
                                ,CAST('Máscara' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('29' AS int)
                                ,CAST('4' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do domínio' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('30' AS int)
                                ,CAST('4' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('5' AS int)
                                ,CAST('2' AS int)
                                ,CAST('TypeId' AS varchar(25))
                                ,CAST('ID do tipo do domínio' AS varchar(50))
                                ,CAST('Tipo' AS varchar(25))
                                ,CAST('Tipo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('31' AS int)
                                ,CAST('4' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('3' AS int)
                                ,CAST('MaskId' AS varchar(25))
                                ,CAST('Id da máscara de edição do domínio' AS varchar(50))
                                ,CAST('Máscara' AS varchar(25))
                                ,CAST('Máscara' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('32' AS int)
                                ,CAST('4' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do domínio' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('33' AS int)
                                ,CAST('4' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('4' AS int)
                                ,NULL
                                ,CAST('Length' AS varchar(25))
                                ,CAST('Tamanho do domínio' AS varchar(50))
                                ,CAST('Tamanho' AS varchar(25))
                                ,CAST('Tamanho' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('34' AS int)
                                ,CAST('4' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('5' AS int)
                                ,NULL
                                ,CAST('Decimals' AS varchar(25))
                                ,CAST('Decimais do domínio' AS varchar(50))
                                ,CAST('Decimais' AS varchar(25))
                                ,CAST('Decimais' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('35' AS int)
                                ,CAST('4' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('12' AS int)
                                ,NULL
                                ,CAST('ValidValues' AS varchar(25))
                                ,CAST('Valores válidos' AS varchar(50))
                                ,CAST('Valores válidos' AS varchar(25))
                                ,CAST('Valores válidos' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('36' AS int)
                                ,CAST('4' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Default' AS varchar(25))
                                ,CAST('Valor padrão do domínio' AS varchar(50))
                                ,CAST('Padrão' AS varchar(25))
                                ,CAST('Padrão' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('37' AS int)
                                ,CAST('4' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Minimum' AS varchar(25))
                                ,CAST('Valor mínimo do domínio' AS varchar(50))
                                ,CAST('Mínimo' AS varchar(25))
                                ,CAST('Mínimo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('38' AS int)
                                ,CAST('4' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Maximum' AS varchar(25))
                                ,CAST('Valor máximo do domínio' AS varchar(50))
                                ,CAST('Máximo' AS varchar(25))
                                ,CAST('Máximo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('39' AS int)
                                ,CAST('4' AS int)
                                ,CAST('55' AS smallint)
                                ,CAST('18' AS int)
                                ,NULL
                                ,CAST('Codification' AS varchar(25))
                                ,CAST('Codificação do domínio' AS varchar(50))
                                ,CAST('Codificação' AS varchar(25))
                                ,CAST('Codificação' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('40' AS int)
                                ,CAST('5' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do sistema' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('41' AS int)
                                ,CAST('5' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do sistema' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('42' AS int)
                                ,CAST('5' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição do sistema' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('43' AS int)
                                ,CAST('5' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('7' AS int)
                                ,NULL
                                ,CAST('ClientName' AS varchar(25))
                                ,CAST('Cliente do sistema' AS varchar(50))
                                ,CAST('Cliente' AS varchar(25))
                                ,CAST('Cliente' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('44' AS int)
                                ,CAST('5' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('5' AS int)
                                ,NULL
                                ,CAST('MaxRetryLogins' AS varchar(25))
                                ,CAST('Máximo de tentativas de logins' AS varchar(50))
                                ,CAST('Máximo de logins' AS varchar(25))
                                ,CAST('Máximo de logins' AS varchar(25))
                                ,NULL
                                ,CAST('5' AS nvarchar(MAX))
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('45' AS int)
                                ,CAST('5' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsOffAir' AS varchar(25))
                                ,CAST('Sistema fora-do-ar' AS varchar(50))
                                ,CAST('Fora-do-ar' AS varchar(25))
                                ,CAST('Fora-do-ar' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('46' AS int)
                                ,CAST('6' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do menu' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('47' AS int)
                                ,CAST('6' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('SystemId' AS varchar(25))
                                ,CAST('ID do sistema do menu' AS varchar(50))
                                ,CAST('Sistema' AS varchar(25))
                                ,CAST('Sistema' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('48' AS int)
                                ,CAST('6' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('4' AS int)
                                ,NULL
                                ,CAST('Sequence' AS varchar(25))
                                ,CAST('Sequência do menu' AS varchar(50))
                                ,CAST('Sequência' AS varchar(25))
                                ,CAST('Sequência' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('49' AS int)
                                ,CAST('6' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('8' AS int)
                                ,NULL
                                ,CAST('Caption' AS varchar(25))
                                ,CAST('Opção do menu' AS varchar(50))
                                ,CAST('Opção' AS varchar(25))
                                ,CAST('Opção' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('50' AS int)
                                ,CAST('6' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Message' AS varchar(25))
                                ,CAST('Mensagem do menu' AS varchar(50))
                                ,CAST('Mensagem' AS varchar(25))
                                ,CAST('Mensagem' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('51' AS int)
                                ,CAST('6' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Action' AS varchar(25))
                                ,CAST('Ação do menu' AS varchar(50))
                                ,CAST('Ação' AS varchar(25))
                                ,CAST('Ação' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('52' AS int)
                                ,CAST('6' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('6' AS int)
                                ,CAST('ParentMenuId' AS varchar(25))
                                ,CAST('ID do menu-pai' AS varchar(50))
                                ,CAST('Menu-pai' AS varchar(25))
                                ,CAST('Menu-pai' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('53' AS int)
                                ,CAST('7' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do usuário' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('54' AS int)
                                ,CAST('7' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do usuário' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('55' AS int)
                                ,CAST('7' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('11' AS int)
                                ,NULL
                                ,CAST('Password' AS varchar(25))
                                ,CAST('Senha do usuário' AS varchar(50))
                                ,CAST('Senha' AS varchar(25))
                                ,CAST('Senha' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('56' AS int)
                                ,CAST('7' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('FullName' AS varchar(25))
                                ,CAST('Nome completo do usuário' AS varchar(50))
                                ,CAST('Nome completo' AS varchar(25))
                                ,CAST('Nome completo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('57' AS int)
                                ,CAST('7' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('5' AS int)
                                ,NULL
                                ,CAST('RetryLogins' AS varchar(25))
                                ,CAST('Tentativas de login' AS varchar(50))
                                ,CAST('Tentativas de login' AS varchar(25))
                                ,CAST('Tentativas de login' AS varchar(25))
                                ,NULL
                                ,CAST('0' AS nvarchar(MAX))
                                ,CAST('0' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('58' AS int)
                                ,CAST('7' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsActive' AS varchar(25))
                                ,CAST('Ativo?' AS varchar(50))
                                ,CAST('Ativo?' AS varchar(25))
                                ,CAST('Ativo?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('59' AS int)
                                ,CAST('8' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do sistema x usuário' AS varchar(50))
                                ,CAST('Sistema' AS varchar(25))
                                ,CAST('Sistema' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('60' AS int)
                                ,CAST('8' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('SystemId' AS varchar(25))
                                ,CAST('ID do sistema' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('61' AS int)
                                ,CAST('8' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('7' AS int)
                                ,CAST('UserId' AS varchar(25))
                                ,CAST('ID do usuário' AS varchar(50))
                                ,CAST('Usuário' AS varchar(25))
                                ,CAST('Usuário' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('62' AS int)
                                ,CAST('8' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição do siistema x usuário' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('63' AS int)
                                ,CAST('9' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do banco-de-dados' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('64' AS int)
                                ,CAST('9' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do banco-de-dados' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('65' AS int)
                                ,CAST('9' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição do banco-de-dados' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('66' AS int)
                                ,CAST('9' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Alias' AS varchar(25))
                                ,CAST('Alias  do banco-de-dados' AS varchar(50))
                                ,CAST('Alias' AS varchar(25))
                                ,CAST('Alias' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('67' AS int)
                                ,CAST('9' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('ServerName' AS varchar(25))
                                ,CAST('String de conexão do banco-de-dados' AS varchar(50))
                                ,CAST('String de Conexão' AS varchar(25))
                                ,CAST('String de Conexão' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('68' AS int)
                                ,CAST('9' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('HostName' AS varchar(25))
                                ,CAST('Hospedeiro do banco-de-dados' AS varchar(50))
                                ,CAST('Hospedeiro' AS varchar(25))
                                ,CAST('Hospedeiro' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('69' AS int)
                                ,CAST('9' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('3' AS int)
                                ,NULL
                                ,CAST('Port' AS varchar(25))
                                ,CAST('Porta TCP/IP do banco-de-dados' AS varchar(50))
                                ,CAST('Porta TCP/IP' AS varchar(25))
                                ,CAST('Porta TCP/IP' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('70' AS int)
                                ,CAST('9' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('11' AS int)
                                ,NULL
                                ,CAST('Logon' AS varchar(25))
                                ,CAST('Usuário do banco-de-dados' AS varchar(50))
                                ,CAST('Usuário' AS varchar(25))
                                ,CAST('Usuário' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('71' AS int)
                                ,CAST('9' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('11' AS int)
                                ,NULL
                                ,CAST('Password' AS varchar(25))
                                ,CAST('Senha do banco-de-dados' AS varchar(50))
                                ,CAST('Senha' AS varchar(25))
                                ,CAST('Senha' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('72' AS int)
                                ,CAST('9' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('11' AS int)
                                ,NULL
                                ,CAST('Folder' AS varchar(25))
                                ,CAST('Pasta diretório do banco-de-dados' AS varchar(50))
                                ,CAST('Pasta' AS varchar(25))
                                ,CAST('Pasta' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('73' AS int)
                                ,CAST('10' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do sistema x banco-de-dados' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('74' AS int)
                                ,CAST('10' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('SystemId' AS varchar(25))
                                ,CAST('ID do sistema' AS varchar(50))
                                ,CAST('Sistema' AS varchar(25))
                                ,CAST('Sistema' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('75' AS int)
                                ,CAST('10' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('DatabaseId' AS varchar(25))
                                ,CAST('ID do banco-de-dados' AS varchar(50))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('76' AS int)
                                ,CAST('10' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição do sistema x banco-de-dados' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('77' AS int)
                                ,CAST('11' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID da tabela' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('78' AS int)
                                ,CAST('11' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome da tabela' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('79' AS int)
                                ,CAST('11' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Alias' AS varchar(25))
                                ,CAST('Alias da tabela' AS varchar(50))
                                ,CAST('Alias' AS varchar(25))
                                ,CAST('Alias' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('80' AS int)
                                ,CAST('11' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição da tabela' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('81' AS int)
                                ,CAST('11' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('ParentTableId' AS varchar(25))
                                ,CAST('Id da tabela-pai' AS varchar(50))
                                ,CAST('Tabela-pai' AS varchar(25))
                                ,CAST('Tabela-pai' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('0' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('82' AS int)
                                ,CAST('11' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsPaged' AS varchar(25))
                                ,CAST('Consulta é paginada?' AS varchar(50))
                                ,CAST('Paginado?' AS varchar(25))
                                ,CAST('Paginado?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('83' AS int)
                                ,CAST('11' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('CurrentId' AS varchar(25))
                                ,CAST('Id atual' AS varchar(50))
                                ,CAST('Id atual' AS varchar(25))
                                ,CAST('Id atual' AS varchar(25))
                                ,NULL
                                ,CAST('0' AS nvarchar(MAX))
                                ,CAST('0' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('84' AS int)
                                ,CAST('12' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do banco-de-dados x tabela' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('85' AS int)
                                ,CAST('12' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('DatabaseId' AS varchar(25))
                                ,CAST('ID do banco-de-dados' AS varchar(50))
                                ,CAST('Sistema' AS varchar(25))
                                ,CAST('Sistema' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('86' AS int)
                                ,CAST('12' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('TableId' AS varchar(25))
                                ,CAST('ID da tabela' AS varchar(50))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('87' AS int)
                                ,CAST('12' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição do banco-de-dados x tabela' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('88' AS int)
                                ,CAST('13' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID da coluna' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('89' AS int)
                                ,CAST('13' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('TableId' AS varchar(25))
                                ,CAST('Tabela' AS varchar(50))
                                ,CAST('Tabela' AS varchar(25))
                                ,CAST('Tabela' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('90' AS int)
                                ,CAST('13' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('4' AS int)
                                ,NULL
                                ,CAST('Sequence' AS varchar(25))
                                ,CAST('Sequência' AS varchar(50))
                                ,CAST('Sequência' AS varchar(25))
                                ,CAST('Sequência' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('91' AS int)
                                ,CAST('13' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('4' AS int)
                                ,CAST('DomainId' AS varchar(25))
                                ,CAST('Domínio da coluna' AS varchar(50))
                                ,CAST('Domínio' AS varchar(25))
                                ,CAST('Domínio' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('92' AS int)
                                ,CAST('13' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('ReferenceTableId' AS varchar(25))
                                ,CAST('Tabela-referência' AS varchar(50))
                                ,CAST('Referência' AS varchar(25))
                                ,CAST('Referência' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('93' AS int)
                                ,CAST('13' AS int)
                                ,CAST('30' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome da coluna' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('94' AS int)
                                ,CAST('13' AS int)
                                ,CAST('35' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Description' AS varchar(25))
                                ,CAST('Descrição da Coluna' AS varchar(50))
                                ,CAST('Descrição' AS varchar(25))
                                ,CAST('Descrição' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('95' AS int)
                                ,CAST('13' AS int)
                                ,CAST('40' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Title' AS varchar(25))
                                ,CAST('Título da Coluna' AS varchar(50))
                                ,CAST('Título' AS varchar(25))
                                ,CAST('Título' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('96' AS int)
                                ,CAST('13' AS int)
                                ,CAST('45' AS smallint)
                                ,CAST('9' AS int)
                                ,NULL
                                ,CAST('Caption' AS varchar(25))
                                ,CAST('Legenda da Coluna' AS varchar(50))
                                ,CAST('Legenda' AS varchar(25))
                                ,CAST('Legenda' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('97' AS int)
                                ,CAST('13' AS int)
                                ,CAST('50' AS smallint)
                                ,CAST('12' AS int)
                                ,NULL
                                ,CAST('ValidValues' AS varchar(25))
                                ,CAST('Valores válidos' AS varchar(50))
                                ,CAST('Valores válidos' AS varchar(25))
                                ,CAST('Valores válidos' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('98' AS int)
                                ,CAST('13' AS int)
                                ,CAST('55' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Default' AS varchar(25))
                                ,CAST('Valor padrão da coluna' AS varchar(50))
                                ,CAST('Padrão' AS varchar(25))
                                ,CAST('Padrão' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('99' AS int)
                                ,CAST('13' AS int)
                                ,CAST('60' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Minimum' AS varchar(25))
                                ,CAST('Valor mínimo da coluna' AS varchar(50))
                                ,CAST('Mínimo' AS varchar(25))
                                ,CAST('Mínimo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('100' AS int)
                                ,CAST('13' AS int)
                                ,CAST('65' AS smallint)
                                ,CAST('17' AS int)
                                ,NULL
                                ,CAST('Maximum' AS varchar(25))
                                ,CAST('Valor máximo da coluna' AS varchar(50))
                                ,CAST('Máximo' AS varchar(25))
                                ,CAST('Máximo' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('101' AS int)
                                ,CAST('13' AS int)
                                ,CAST('70' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsPrimarykey' AS varchar(25))
                                ,CAST('Coluna é chave-primária?' AS varchar(50))
                                ,CAST('É chave-primária?' AS varchar(25))
                                ,CAST('É chave-primária?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('102' AS int)
                                ,CAST('13' AS int)
                                ,CAST('75' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsAutoIncrement' AS varchar(25))
                                ,CAST('Coluna é autoincremento?' AS varchar(50))
                                ,CAST('É autoincremento?' AS varchar(25))
                                ,CAST('É autoincremento?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('103' AS int)
                                ,CAST('13' AS int)
                                ,CAST('80' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsRequired' AS varchar(25))
                                ,CAST('Coluna é requerida?' AS varchar(50))
                                ,CAST('É requerida?' AS varchar(25))
                                ,CAST('É requerida?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('104' AS int)
                                ,CAST('13' AS int)
                                ,CAST('85' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsListable' AS varchar(25))
                                ,CAST('Coluna é listável?' AS varchar(50))
                                ,CAST('É listável?' AS varchar(25))
                                ,CAST('É listável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('105' AS int)
                                ,CAST('13' AS int)
                                ,CAST('90' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsFilterable' AS varchar(25))
                                ,CAST('Coluna é filtrável?' AS varchar(50))
                                ,CAST('É filtrável?' AS varchar(25))
                                ,CAST('É filtrável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('106' AS int)
                                ,CAST('13' AS int)
                                ,CAST('95' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsEditable' AS varchar(25))
                                ,CAST('Coluna é editável?' AS varchar(50))
                                ,CAST('É editável?' AS varchar(25))
                                ,CAST('É editável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('107' AS int)
                                ,CAST('13' AS int)
                                ,CAST('100' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsBrowseable' AS varchar(25))
                                ,CAST('Coluna é navegável?' AS varchar(50))
                                ,CAST('É navegável?' AS varchar(25))
                                ,CAST('É navegável?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('108' AS int)
                                ,CAST('13' AS int)
                                ,CAST('105' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsEncrypted' AS varchar(25))
                                ,CAST('Coluna é encriptada?' AS varchar(50))
                                ,CAST('É encriptada?' AS varchar(25))
                                ,CAST('É encriptada?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('109' AS int)
                                ,CAST('14' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do índice' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('110' AS int)
                                ,CAST('14' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('DatabaseId' AS varchar(25))
                                ,CAST('ID do banco-de-dados do índice' AS varchar(50))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,CAST('Banco-de-dados' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('111' AS int)
                                ,CAST('14' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('TableId' AS varchar(25))
                                ,CAST('ID da tabela do índice' AS varchar(50))
                                ,CAST('Tabela' AS varchar(25))
                                ,CAST('Tabela' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('112' AS int)
                                ,CAST('14' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('10' AS int)
                                ,NULL
                                ,CAST('Name' AS varchar(25))
                                ,CAST('Nome do índice' AS varchar(50))
                                ,CAST('Nome' AS varchar(25))
                                ,CAST('Nome' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('113' AS int)
                                ,CAST('14' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsUnique' AS varchar(25))
                                ,CAST('É índice único?' AS varchar(50))
                                ,CAST('É único?' AS varchar(25))
                                ,CAST('É único?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('114' AS int)
                                ,CAST('15' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID da chave de índice' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('115' AS int)
                                ,CAST('15' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('14' AS int)
                                ,CAST('IndexId' AS varchar(25))
                                ,CAST('ID do índice da chave' AS varchar(50))
                                ,CAST('Índice' AS varchar(25))
                                ,CAST('Índice' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('116' AS int)
                                ,CAST('15' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('4' AS int)
                                ,NULL
                                ,CAST('Sequence' AS varchar(25))
                                ,CAST('Sequência da chave' AS varchar(50))
                                ,CAST('Sequência' AS varchar(25))
                                ,CAST('Sequência' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('117' AS int)
                                ,CAST('15' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('13' AS int)
                                ,CAST('ColumnId' AS varchar(25))
                                ,CAST('ID da coluna-chave do índice' AS varchar(50))
                                ,CAST('Coluna' AS varchar(25))
                                ,CAST('Coluna' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('118' AS int)
                                ,CAST('15' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsDescending' AS varchar(25))
                                ,CAST('Ordem descedente da chave?' AS varchar(50))
                                ,CAST('Descendente?' AS varchar(25))
                                ,CAST('Descendente?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('119' AS int)
                                ,CAST('16' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('1' AS int)
                                ,NULL
                                ,CAST('Id' AS varchar(25))
                                ,CAST('ID do Login de Acesso' AS varchar(50))
                                ,CAST('ID' AS varchar(25))
                                ,CAST('ID' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('120' AS int)
                                ,CAST('16' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('SystemId' AS varchar(25))
                                ,CAST('ID do Sistema' AS varchar(50))
                                ,CAST('Sistema' AS varchar(25))
                                ,CAST('Sistema' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('121' AS int)
                                ,CAST('16' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('1' AS int)
                                ,CAST('7' AS int)
                                ,CAST('UserId' AS varchar(25))
                                ,CAST('ID do usuário' AS varchar(50))
                                ,CAST('Usuário' AS varchar(25))
                                ,CAST('Usuário' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,CAST('1' AS nvarchar(MAX))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('122' AS int)
                                ,CAST('16' AS int)
                                ,CAST('20' AS smallint)
                                ,CAST('11' AS int)
                                ,NULL
                                ,CAST('PublicKey' AS varchar(25))
                                ,CAST('Chave pública do usuário' AS varchar(50))
                                ,CAST('Chave pública' AS varchar(25))
                                ,CAST('Chave pública' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('0' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('0' AS bit)
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Columns] ([Id]
                                ,[TableId]
                                ,[Sequence]
                                ,[DomainId]
                                ,[ReferenceTableId]
                                ,[Name]
                                ,[Description]
                                ,[Title]
                                ,[Caption]
                                ,[ValidValues]
                                ,[Default]
                                ,[Minimum]
                                ,[Maximum]
                                ,[IsPrimarykey]
                                ,[IsAutoIncrement]
                                ,[IsRequired]
                                ,[IsListable]
                                ,[IsFilterable]
                                ,[IsEditable]
                                ,[IsBrowseable]
                                ,[IsEncrypted]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('123' AS int)
                                ,CAST('16' AS int)
                                ,CAST('25' AS smallint)
                                ,CAST('6' AS int)
                                ,NULL
                                ,CAST('IsLogged' AS varchar(25))
                                ,CAST('Logado?' AS varchar(50))
                                ,CAST('Logado?' AS varchar(25))
                                ,CAST('Logado?' AS varchar(25))
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,NULL
                                ,CAST('1' AS bit)
                                ,NULL
                                ,CAST('1' AS bit)
                                ,CAST('1' AS bit)
                                ,CAST('0' AS bit)
                                ,NULL
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Indexes]
**********************************************************************************/
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('UNQ_Categories_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('1' AS int)
                                ,CAST('2' AS int)
                                ,CAST('UNQ_Types_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('1' AS int)
                                ,CAST('3' AS int)
                                ,CAST('UNQ_Masks_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('1' AS int)
                                ,CAST('4' AS int)
                                ,CAST('UNQ_Domains_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('1' AS int)
                                ,CAST('5' AS int)
                                ,CAST('UNQ_Systems_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('1' AS int)
                                ,CAST('6' AS int)
                                ,CAST('UNQ_Menus_SystemId_Sequence' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('1' AS int)
                                ,CAST('6' AS int)
                                ,CAST('UNQ_Menus_SystemId_Caption' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('1' AS int)
                                ,CAST('7' AS int)
                                ,CAST('UNQ_Users_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('1' AS int)
                                ,CAST('8' AS int)
                                ,CAST('UNQ_SystemsUsers_SystemId_UserId' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('1' AS int)
                                ,CAST('8' AS int)
                                ,CAST('UNQ_SystemsUsers_Description' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('UNQ_Databases_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('1' AS int)
                                ,CAST('9' AS int)
                                ,CAST('UNQ_Databases_Alias' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('1' AS int)
                                ,CAST('10' AS int)
                                ,CAST('UNQ_SystemsDatabases_SystemId_DatabaseId' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('1' AS int)
                                ,CAST('10' AS int)
                                ,CAST('UNQ_SystemsDatabases_Description' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('UNQ_Tables_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('1' AS int)
                                ,CAST('11' AS int)
                                ,CAST('UNQ_Tables_Alias' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('17' AS int)
                                ,CAST('1' AS int)
                                ,CAST('12' AS int)
                                ,CAST('UNQ_DatabasesTables_DatabaseId_TableId' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('18' AS int)
                                ,CAST('1' AS int)
                                ,CAST('12' AS int)
                                ,CAST('UNQ_DatabasesTables_Description' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('19' AS int)
                                ,CAST('1' AS int)
                                ,CAST('13' AS int)
                                ,CAST('UNQ_Columns_TableId_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('20' AS int)
                                ,CAST('1' AS int)
                                ,CAST('13' AS int)
                                ,CAST('UNQ_Columns_TableId_Sequence' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('21' AS int)
                                ,CAST('1' AS int)
                                ,CAST('14' AS int)
                                ,CAST('UNQ_Indexes_DatabaseId_Name' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('22' AS int)
                                ,CAST('1' AS int)
                                ,CAST('15' AS int)
                                ,CAST('UNQ_Indexkeys_IndexId_Sequence' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('23' AS int)
                                ,CAST('1' AS int)
                                ,CAST('15' AS int)
                                ,CAST('UNQ_Indexkeys_IndexId_ColumnId' AS varchar(50))
                                ,CAST('1' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexes] ([Id]
                                ,[DatabaseId]
                                ,[TableId]
                                ,[Name]
                                ,[IsUnique]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('24' AS int)
                                ,CAST('1' AS int)
                                ,CAST('16' AS int)
                                ,CAST('IDX_Logins_SystemId_UserId_IsLogged' AS varchar(50))
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Inserir dados na tabela [dbo].[Indexkeys]
**********************************************************************************/
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('1' AS int)
                                ,CAST('1' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('2' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('2' AS int)
                                ,CAST('2' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('13' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('3' AS int)
                                ,CAST('3' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('27' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('4' AS int)
                                ,CAST('4' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('32' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('5' AS int)
                                ,CAST('5' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('41' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('6' AS int)
                                ,CAST('6' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('47' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('7' AS int)
                                ,CAST('6' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('48' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('8' AS int)
                                ,CAST('7' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('47' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('9' AS int)
                                ,CAST('7' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('49' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('10' AS int)
                                ,CAST('8' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('54' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('11' AS int)
                                ,CAST('9' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('60' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('12' AS int)
                                ,CAST('9' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('61' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('13' AS int)
                                ,CAST('10' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('62' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('14' AS int)
                                ,CAST('11' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('64' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('15' AS int)
                                ,CAST('12' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('66' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('16' AS int)
                                ,CAST('13' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('74' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('17' AS int)
                                ,CAST('13' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('75' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('18' AS int)
                                ,CAST('14' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('76' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('19' AS int)
                                ,CAST('15' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('78' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('20' AS int)
                                ,CAST('16' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('79' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('21' AS int)
                                ,CAST('17' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('84' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('22' AS int)
                                ,CAST('17' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('86' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('23' AS int)
                                ,CAST('18' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('87' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('24' AS int)
                                ,CAST('19' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('89' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('25' AS int)
                                ,CAST('19' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('93' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('26' AS int)
                                ,CAST('20' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('89' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('27' AS int)
                                ,CAST('20' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('90' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('28' AS int)
                                ,CAST('21' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('110' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('29' AS int)
                                ,CAST('21' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('112' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('30' AS int)
                                ,CAST('22' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('115' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('31' AS int)
                                ,CAST('22' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('116' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('32' AS int)
                                ,CAST('23' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('115' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('33' AS int)
                                ,CAST('23' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('117' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('34' AS int)
                                ,CAST('24' AS int)
                                ,CAST('5' AS smallint)
                                ,CAST('120' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('35' AS int)
                                ,CAST('24' AS int)
                                ,CAST('10' AS smallint)
                                ,CAST('121' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
INSERT INTO [dbo].[Indexkeys] ([Id]
                                ,[IndexId]
                                ,[Sequence]
                                ,[ColumnId]
                                ,[IsDescending]
                                ,[CreatedAt]
                                ,[CreatedBy]
                                ,[UpdatedAt]
                                ,[UpdatedBy])
                         VALUES (CAST('36' AS int)
                                ,CAST('24' AS int)
                                ,CAST('15' AS smallint)
                                ,CAST('123' AS int)
                                ,CAST('0' AS bit)
                                ,GETDATE()
                                ,'admnistrator'
                                ,NULL
                                ,NULL)
GO
/**********************************************************************************
Criar stored procedure [dbo].[CategoryValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[CategoryValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[CategoryValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[CategoryValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [CategoryValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.HtmlInputType'), JSON_QUERY(@LastRecord, '$.HtmlInputType'), 'varchar(10)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.HtmlInputAlign'), JSON_QUERY(@LastRecord, '$.HtmlInputAlign'), 'varchar(6)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskEncrypted'), JSON_QUERY(@LastRecord, '$.AskEncrypted'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskMask'), JSON_QUERY(@LastRecord, '$.AskMask'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskListable'), JSON_QUERY(@LastRecord, '$.AskListable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskDefault'), JSON_QUERY(@LastRecord, '$.AskDefault'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskMinimum'), JSON_QUERY(@LastRecord, '$.AskMinimum'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskMaximum'), JSON_QUERY(@LastRecord, '$.AskMaximum'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Categories]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [cruda].[IsEquals]([HtmlInputType], JSON_QUERY(@LastRecord, '$.HtmlInputType'), 'varchar(10)') = 1
                                  AND [cruda].[IsEquals]([HtmlInputAlign], JSON_QUERY(@LastRecord, '$.HtmlInputAlign'), 'varchar(6)') = 1
                                  AND [AskEncrypted] = JSON_QUERY(@LastRecord, '$.AskEncrypted')
                                  AND [AskMask] = JSON_QUERY(@LastRecord, '$.AskMask')
                                  AND [AskListable] = JSON_QUERY(@LastRecord, '$.AskListable')
                                  AND [AskDefault] = JSON_QUERY(@LastRecord, '$.AskDefault')
                                  AND [AskMinimum] = JSON_QUERY(@LastRecord, '$.AskMinimum')
                                  AND [AskMaximum] = JSON_QUERY(@LastRecord, '$.AskMaximum')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Categories alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('255' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 255';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Categories] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Categories';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Categories';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_HtmlInputType varchar(10) = CAST(JSON_QUERY(@ActualRecord, '$.HtmlInputType') AS varchar(10))
                   ,@W_HtmlInputAlign varchar(6) = CAST(JSON_QUERY(@ActualRecord, '$.HtmlInputAlign') AS varchar(6))
                   ,@W_AskEncrypted bit = CAST(JSON_QUERY(@ActualRecord, '$.AskEncrypted') AS bit)
                   ,@W_AskMask bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMask') AS bit)
                   ,@W_AskListable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskListable') AS bit)
                   ,@W_AskDefault bit = CAST(JSON_QUERY(@ActualRecord, '$.AskDefault') AS bit)
                   ,@W_AskMinimum bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMinimum') AS bit)
                   ,@W_AskMaximum bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMaximum') AS bit)

            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Categories] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Categories_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Categories] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Categories_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[CategoryPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[CategoryPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[CategoryPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[CategoryPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [CategoryPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[CategoryValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS tinyint) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Categories'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[CategoryCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[CategoryCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[CategoryCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[CategoryCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [CategoryCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Categories' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[CategoryValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Categories] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_HtmlInputType varchar(10) = CAST(JSON_QUERY(@ActualRecord, '$.HtmlInputType') AS varchar(10))
                   ,@W_HtmlInputAlign varchar(6) = CAST(JSON_QUERY(@ActualRecord, '$.HtmlInputAlign') AS varchar(6))
                   ,@W_AskEncrypted bit = CAST(JSON_QUERY(@ActualRecord, '$.AskEncrypted') AS bit)
                   ,@W_AskMask bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMask') AS bit)
                   ,@W_AskListable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskListable') AS bit)
                   ,@W_AskDefault bit = CAST(JSON_QUERY(@ActualRecord, '$.AskDefault') AS bit)
                   ,@W_AskMinimum bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMinimum') AS bit)
                   ,@W_AskMaximum bit = CAST(JSON_QUERY(@ActualRecord, '$.AskMaximum') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Categories] ([Id]
                                                ,[Name]
                                                ,[HtmlInputType]
                                                ,[HtmlInputAlign]
                                                ,[AskEncrypted]
                                                ,[AskMask]
                                                ,[AskListable]
                                                ,[AskDefault]
                                                ,[AskMinimum]
                                                ,[AskMaximum]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_HtmlInputType
                                                 ,@W_HtmlInputAlign
                                                 ,@W_AskEncrypted
                                                 ,@W_AskMask
                                                 ,@W_AskListable
                                                 ,@W_AskDefault
                                                 ,@W_AskMinimum
                                                 ,@W_AskMaximum
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Categories] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[HtmlInputType] = @W_HtmlInputType
                                              ,[HtmlInputAlign] = @W_HtmlInputAlign
                                              ,[AskEncrypted] = @W_AskEncrypted
                                              ,[AskMask] = @W_AskMask
                                              ,[AskListable] = @W_AskListable
                                              ,[AskDefault] = @W_AskDefault
                                              ,[AskMinimum] = @W_AskMinimum
                                              ,[AskMaximum] = @W_AskMaximum
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[CategoriesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[CategoriesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[CategoriesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[CategoriesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [CategoriesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id tinyint = CAST(JSON_QUERY(@Parameters, '$.Id') AS tinyint)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_AskEncrypted bit = CAST(JSON_QUERY(@Parameters, '$.AskEncrypted') AS bit)
                ,@W_AskMask bit = CAST(JSON_QUERY(@Parameters, '$.AskMask') AS bit)
                ,@W_AskListable bit = CAST(JSON_QUERY(@Parameters, '$.AskListable') AS bit)
                ,@W_AskDefault bit = CAST(JSON_QUERY(@Parameters, '$.AskDefault') AS bit)
                ,@W_AskMinimum bit = CAST(JSON_QUERY(@Parameters, '$.AskMinimum') AS bit)
                ,@W_AskMaximum bit = CAST(JSON_QUERY(@Parameters, '$.AskMaximum') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('255' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''255''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[HtmlInputType]
              ,[HtmlInputAlign]
              ,[AskEncrypted]
              ,[AskMask]
              ,[AskListable]
              ,[AskDefault]
              ,[AskMinimum]
              ,[AskMaximum]
            INTO [dbo].[#tmp]
            FROM [dbo].[Categories]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [AskEncrypted] = ISNULL(@W_AskEncrypted, [AskEncrypted])
                  AND [AskMask] = ISNULL(@W_AskMask, [AskMask])
                  AND [AskListable] = ISNULL(@W_AskListable, [AskListable])
                  AND [AskDefault] = ISNULL(@W_AskDefault, [AskDefault])
                  AND [AskMinimum] = ISNULL(@W_AskMinimum, [AskMinimum])
                  AND [AskMaximum] = ISNULL(@W_AskMaximum, [AskMaximum])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS tinyint) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS tinyint) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.HtmlInputType') AS varchar(10)) AS [HtmlInputType]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.HtmlInputAlign') AS varchar(6)) AS [HtmlInputAlign]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskEncrypted') AS bit) AS [AskEncrypted]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskMask') AS bit) AS [AskMask]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskListable') AS bit) AS [AskListable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskDefault') AS bit) AS [AskDefault]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskMinimum') AS bit) AS [AskMinimum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskMaximum') AS bit) AS [AskMaximum]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Categories'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[HtmlInputType] = CAST(JSON_QUERY([ope].[ActualRecord], '$.HtmlInputType') AS varchar(10))
               ,[tmp].[HtmlInputAlign] = CAST(JSON_QUERY([ope].[ActualRecord], '$.HtmlInputAlign') AS varchar(6))
               ,[tmp].[AskEncrypted] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskEncrypted') AS bit)
               ,[tmp].[AskMask] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskMask') AS bit)
               ,[tmp].[AskListable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskListable') AS bit)
               ,[tmp].[AskDefault] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskDefault') AS bit)
               ,[tmp].[AskMinimum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskMinimum') AS bit)
               ,[tmp].[AskMaximum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskMaximum') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS tinyint) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Categories'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordCategory'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TypeValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TypeValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TypeValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TypeValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TypeValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.CategoryId'), JSON_QUERY(@LastRecord, '$.CategoryId'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Minimum'), JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Maximum'), JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskLength'), JSON_QUERY(@LastRecord, '$.AskLength'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskDecimals'), JSON_QUERY(@LastRecord, '$.AskDecimals'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskPrimarykey'), JSON_QUERY(@LastRecord, '$.AskPrimarykey'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskAutoincrement'), JSON_QUERY(@LastRecord, '$.AskAutoincrement'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskFilterable'), JSON_QUERY(@LastRecord, '$.AskFilterable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskBrowseable'), JSON_QUERY(@LastRecord, '$.AskBrowseable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskCodification'), JSON_QUERY(@LastRecord, '$.AskCodification'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AskFormula'), JSON_QUERY(@LastRecord, '$.AskFormula'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.AllowMaxLength'), JSON_QUERY(@LastRecord, '$.AllowMaxLength'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsActive'), JSON_QUERY(@LastRecord, '$.IsActive'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Types]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [CategoryId] = JSON_QUERY(@LastRecord, '$.CategoryId')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [cruda].[IsEquals]([Minimum], JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Maximum], JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                                  AND [AskLength] = JSON_QUERY(@LastRecord, '$.AskLength')
                                  AND [AskDecimals] = JSON_QUERY(@LastRecord, '$.AskDecimals')
                                  AND [AskPrimarykey] = JSON_QUERY(@LastRecord, '$.AskPrimarykey')
                                  AND [AskAutoincrement] = JSON_QUERY(@LastRecord, '$.AskAutoincrement')
                                  AND [AskFilterable] = JSON_QUERY(@LastRecord, '$.AskFilterable')
                                  AND [AskBrowseable] = JSON_QUERY(@LastRecord, '$.AskBrowseable')
                                  AND [AskCodification] = JSON_QUERY(@LastRecord, '$.AskCodification')
                                  AND [AskFormula] = JSON_QUERY(@LastRecord, '$.AskFormula')
                                  AND [AllowMaxLength] = JSON_QUERY(@LastRecord, '$.AllowMaxLength')
                                  AND [IsActive] = JSON_QUERY(@LastRecord, '$.IsActive')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Types alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('255' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 255';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Types] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Types';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Types';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_CategoryId tinyint = CAST(JSON_QUERY(@ActualRecord, '$.CategoryId') AS tinyint)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_AskLength bit = CAST(JSON_QUERY(@ActualRecord, '$.AskLength') AS bit)
                   ,@W_AskDecimals bit = CAST(JSON_QUERY(@ActualRecord, '$.AskDecimals') AS bit)
                   ,@W_AskPrimarykey bit = CAST(JSON_QUERY(@ActualRecord, '$.AskPrimarykey') AS bit)
                   ,@W_AskAutoincrement bit = CAST(JSON_QUERY(@ActualRecord, '$.AskAutoincrement') AS bit)
                   ,@W_AskFilterable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskFilterable') AS bit)
                   ,@W_AskBrowseable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskBrowseable') AS bit)
                   ,@W_AskCodification bit = CAST(JSON_QUERY(@ActualRecord, '$.AskCodification') AS bit)
                   ,@W_AskFormula bit = CAST(JSON_QUERY(@ActualRecord, '$.AskFormula') AS bit)
                   ,@W_AllowMaxLength bit = CAST(JSON_QUERY(@ActualRecord, '$.AllowMaxLength') AS bit)
                   ,@W_IsActive bit = CAST(JSON_QUERY(@ActualRecord, '$.IsActive') AS bit)

            IF @W_CategoryId IS NOT NULL AND @W_CategoryId < CAST('0' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de CategoryId em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_CategoryId IS NOT NULL AND @W_CategoryId < CAST('255' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de CategoryId em @ActualRecord deve ser menor que ou igual à 255';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Categories] WHERE [Id] = @W_CategoryId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Categories';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Types] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Types_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Types] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Types_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TypePersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TypePersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TypePersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TypePersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TypePersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[TypeValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS tinyint) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Types'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TypeCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TypeCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TypeCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TypeCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TypeCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Types' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[TypeValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS tinyint)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Types] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_CategoryId tinyint = CAST(JSON_QUERY(@ActualRecord, '$.CategoryId') AS tinyint)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_AskLength bit = CAST(JSON_QUERY(@ActualRecord, '$.AskLength') AS bit)
                   ,@W_AskDecimals bit = CAST(JSON_QUERY(@ActualRecord, '$.AskDecimals') AS bit)
                   ,@W_AskPrimarykey bit = CAST(JSON_QUERY(@ActualRecord, '$.AskPrimarykey') AS bit)
                   ,@W_AskAutoincrement bit = CAST(JSON_QUERY(@ActualRecord, '$.AskAutoincrement') AS bit)
                   ,@W_AskFilterable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskFilterable') AS bit)
                   ,@W_AskBrowseable bit = CAST(JSON_QUERY(@ActualRecord, '$.AskBrowseable') AS bit)
                   ,@W_AskCodification bit = CAST(JSON_QUERY(@ActualRecord, '$.AskCodification') AS bit)
                   ,@W_AskFormula bit = CAST(JSON_QUERY(@ActualRecord, '$.AskFormula') AS bit)
                   ,@W_AllowMaxLength bit = CAST(JSON_QUERY(@ActualRecord, '$.AllowMaxLength') AS bit)
                   ,@W_IsActive bit = CAST(JSON_QUERY(@ActualRecord, '$.IsActive') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Types] ([Id]
                                                ,[CategoryId]
                                                ,[Name]
                                                ,[Minimum]
                                                ,[Maximum]
                                                ,[AskLength]
                                                ,[AskDecimals]
                                                ,[AskPrimarykey]
                                                ,[AskAutoincrement]
                                                ,[AskFilterable]
                                                ,[AskBrowseable]
                                                ,[AskCodification]
                                                ,[AskFormula]
                                                ,[AllowMaxLength]
                                                ,[IsActive]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_CategoryId
                                                 ,@W_Name
                                                 ,@W_Minimum
                                                 ,@W_Maximum
                                                 ,@W_AskLength
                                                 ,@W_AskDecimals
                                                 ,@W_AskPrimarykey
                                                 ,@W_AskAutoincrement
                                                 ,@W_AskFilterable
                                                 ,@W_AskBrowseable
                                                 ,@W_AskCodification
                                                 ,@W_AskFormula
                                                 ,@W_AllowMaxLength
                                                 ,@W_IsActive
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Types] SET [Id] = @W_Id
                                              ,[CategoryId] = @W_CategoryId
                                              ,[Name] = @W_Name
                                              ,[Minimum] = @W_Minimum
                                              ,[Maximum] = @W_Maximum
                                              ,[AskLength] = @W_AskLength
                                              ,[AskDecimals] = @W_AskDecimals
                                              ,[AskPrimarykey] = @W_AskPrimarykey
                                              ,[AskAutoincrement] = @W_AskAutoincrement
                                              ,[AskFilterable] = @W_AskFilterable
                                              ,[AskBrowseable] = @W_AskBrowseable
                                              ,[AskCodification] = @W_AskCodification
                                              ,[AskFormula] = @W_AskFormula
                                              ,[AllowMaxLength] = @W_AllowMaxLength
                                              ,[IsActive] = @W_IsActive
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TypesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TypesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TypesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TypesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TypesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id tinyint = CAST(JSON_QUERY(@Parameters, '$.Id') AS tinyint)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_AskLength bit = CAST(JSON_QUERY(@Parameters, '$.AskLength') AS bit)
                ,@W_AskDecimals bit = CAST(JSON_QUERY(@Parameters, '$.AskDecimals') AS bit)
                ,@W_AskPrimarykey bit = CAST(JSON_QUERY(@Parameters, '$.AskPrimarykey') AS bit)
                ,@W_AskAutoincrement bit = CAST(JSON_QUERY(@Parameters, '$.AskAutoincrement') AS bit)
                ,@W_AskFilterable bit = CAST(JSON_QUERY(@Parameters, '$.AskFilterable') AS bit)
                ,@W_AskBrowseable bit = CAST(JSON_QUERY(@Parameters, '$.AskBrowseable') AS bit)
                ,@W_AskCodification bit = CAST(JSON_QUERY(@Parameters, '$.AskCodification') AS bit)
                ,@W_AskFormula bit = CAST(JSON_QUERY(@Parameters, '$.AskFormula') AS bit)
                ,@W_AllowMaxLength bit = CAST(JSON_QUERY(@Parameters, '$.AllowMaxLength') AS bit)
                ,@W_IsActive bit = CAST(JSON_QUERY(@Parameters, '$.IsActive') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('255' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''255''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[CategoryId]
              ,[Name]
              ,[Minimum]
              ,[Maximum]
              ,[AskLength]
              ,[AskDecimals]
              ,[AskPrimarykey]
              ,[AskAutoincrement]
              ,[AskFilterable]
              ,[AskBrowseable]
              ,[AskCodification]
              ,[AskFormula]
              ,[AllowMaxLength]
              ,[IsActive]
            INTO [dbo].[#tmp]
            FROM [dbo].[Types]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [AskLength] = ISNULL(@W_AskLength, [AskLength])
                  AND [AskDecimals] = ISNULL(@W_AskDecimals, [AskDecimals])
                  AND [AskPrimarykey] = ISNULL(@W_AskPrimarykey, [AskPrimarykey])
                  AND [AskAutoincrement] = ISNULL(@W_AskAutoincrement, [AskAutoincrement])
                  AND [AskFilterable] = ISNULL(@W_AskFilterable, [AskFilterable])
                  AND [AskBrowseable] = ISNULL(@W_AskBrowseable, [AskBrowseable])
                  AND [AskCodification] = ISNULL(@W_AskCodification, [AskCodification])
                  AND [AskFormula] = ISNULL(@W_AskFormula, [AskFormula])
                  AND [AllowMaxLength] = ISNULL(@W_AllowMaxLength, [AllowMaxLength])
                  AND [IsActive] = ISNULL(@W_IsActive, [IsActive])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS tinyint) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS tinyint) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.CategoryId') AS tinyint) AS [CategoryId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Minimum') AS nvarchar(MAX)) AS [Minimum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Maximum') AS nvarchar(MAX)) AS [Maximum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskLength') AS bit) AS [AskLength]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskDecimals') AS bit) AS [AskDecimals]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskPrimarykey') AS bit) AS [AskPrimarykey]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskAutoincrement') AS bit) AS [AskAutoincrement]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskFilterable') AS bit) AS [AskFilterable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskBrowseable') AS bit) AS [AskBrowseable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskCodification') AS bit) AS [AskCodification]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AskFormula') AS bit) AS [AskFormula]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.AllowMaxLength') AS bit) AS [AllowMaxLength]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsActive') AS bit) AS [IsActive]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Types'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[CategoryId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.CategoryId') AS tinyint)
               ,[tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Minimum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Minimum') AS nvarchar(MAX))
               ,[tmp].[Maximum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Maximum') AS nvarchar(MAX))
               ,[tmp].[AskLength] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskLength') AS bit)
               ,[tmp].[AskDecimals] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskDecimals') AS bit)
               ,[tmp].[AskPrimarykey] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskPrimarykey') AS bit)
               ,[tmp].[AskAutoincrement] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskAutoincrement') AS bit)
               ,[tmp].[AskFilterable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskFilterable') AS bit)
               ,[tmp].[AskBrowseable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskBrowseable') AS bit)
               ,[tmp].[AskCodification] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskCodification') AS bit)
               ,[tmp].[AskFormula] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AskFormula') AS bit)
               ,[tmp].[AllowMaxLength] = CAST(JSON_QUERY([ope].[ActualRecord], '$.AllowMaxLength') AS bit)
               ,[tmp].[IsActive] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsActive') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS tinyint) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Types'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordType'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MaskValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MaskValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MaskValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MaskValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MaskValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Mask'), JSON_QUERY(@LastRecord, '$.Mask'), 'varchar(MAX)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Masks]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Mask] = JSON_QUERY(@LastRecord, '$.Mask')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Masks alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('-2147483648' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à -2147483648';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Masks] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Masks';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Masks';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Mask varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Mask') AS varchar(MAX))

            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Masks] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Masks_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Masks] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Masks_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MaskPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MaskPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MaskPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MaskPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MaskPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[MaskValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Masks'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MaskCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MaskCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MaskCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MaskCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MaskCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Masks' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[MaskValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Masks] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Mask varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Mask') AS varchar(MAX))

            IF @Action = 'create'
                INSERT INTO [dbo].[Masks] ([Id]
                                                ,[Name]
                                                ,[Mask]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_Mask
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Masks] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[Mask] = @W_Mask
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MasksRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MasksRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MasksRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MasksRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MasksRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('-2147483648' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''-2147483648''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[Mask]
            INTO [dbo].[#tmp]
            FROM [dbo].[Masks]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Mask') AS varchar(MAX)) AS [Mask]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Masks'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Mask] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Mask') AS varchar(MAX))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Masks'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordMask'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DomainValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DomainValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DomainValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DomainValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DomainValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.TypeId'), JSON_QUERY(@LastRecord, '$.TypeId'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.MaskId'), JSON_QUERY(@LastRecord, '$.MaskId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Length'), JSON_QUERY(@LastRecord, '$.Length'), 'smallint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Decimals'), JSON_QUERY(@LastRecord, '$.Decimals'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ValidValues'), JSON_QUERY(@LastRecord, '$.ValidValues'), 'varchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Default'), JSON_QUERY(@LastRecord, '$.Default'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Minimum'), JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Maximum'), JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Codification'), JSON_QUERY(@LastRecord, '$.Codification'), 'varchar(5)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Domains]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [TypeId] = JSON_QUERY(@LastRecord, '$.TypeId')
                                  AND [cruda].[IsEquals]([MaskId], JSON_QUERY(@LastRecord, '$.MaskId'), 'int') = 1
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [cruda].[IsEquals]([Length], JSON_QUERY(@LastRecord, '$.Length'), 'smallint') = 1
                                  AND [cruda].[IsEquals]([Decimals], JSON_QUERY(@LastRecord, '$.Decimals'), 'tinyint') = 1
                                  AND [cruda].[IsEquals]([ValidValues], JSON_QUERY(@LastRecord, '$.ValidValues'), 'varchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Default], JSON_QUERY(@LastRecord, '$.Default'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Minimum], JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Maximum], JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Codification], JSON_QUERY(@LastRecord, '$.Codification'), 'varchar(5)') = 1) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Domains alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Domains] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Domains';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Domains';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_TypeId tinyint = CAST(JSON_QUERY(@ActualRecord, '$.TypeId') AS tinyint)
                   ,@W_MaskId int = CAST(JSON_QUERY(@ActualRecord, '$.MaskId') AS int)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Length smallint = CAST(JSON_QUERY(@ActualRecord, '$.Length') AS smallint)
                   ,@W_Decimals tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Decimals') AS tinyint)
                   ,@W_ValidValues varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.ValidValues') AS varchar(MAX))
                   ,@W_Default nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Default') AS nvarchar(MAX))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_Codification varchar(5) = CAST(JSON_QUERY(@ActualRecord, '$.Codification') AS varchar(5))

            IF @W_TypeId IS NOT NULL AND @W_TypeId < CAST('1' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TypeId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TypeId IS NOT NULL AND @W_TypeId < CAST('255' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TypeId em @ActualRecord deve ser menor que ou igual à 255';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Types] WHERE [Id] = @W_TypeId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Types';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_MaskId IS NOT NULL AND @W_MaskId < CAST('-2147483648' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de MaskId em @ActualRecord deve ser maior que ou igual à -2147483648';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_MaskId IS NOT NULL AND @W_MaskId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de MaskId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Masks] WHERE [Id] = @W_MaskId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Masks';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Length IS NOT NULL AND @W_Length < CAST('0' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Length em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Length IS NOT NULL AND @W_Length < CAST('32767' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Length em @ActualRecord deve ser menor que ou igual à 32767';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Decimals IS NOT NULL AND @W_Decimals < CAST('0' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Decimals em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Decimals IS NOT NULL AND @W_Decimals < CAST('255' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Decimals em @ActualRecord deve ser menor que ou igual à 255';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Domains] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Domains_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Domains] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Domains_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DomainPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DomainPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DomainPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DomainPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DomainPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[DomainValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Domains'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DomainCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DomainCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DomainCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DomainCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DomainCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Domains' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[DomainValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Domains] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_TypeId tinyint = CAST(JSON_QUERY(@ActualRecord, '$.TypeId') AS tinyint)
                   ,@W_MaskId int = CAST(JSON_QUERY(@ActualRecord, '$.MaskId') AS int)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Length smallint = CAST(JSON_QUERY(@ActualRecord, '$.Length') AS smallint)
                   ,@W_Decimals tinyint = CAST(JSON_QUERY(@ActualRecord, '$.Decimals') AS tinyint)
                   ,@W_ValidValues varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.ValidValues') AS varchar(MAX))
                   ,@W_Default nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Default') AS nvarchar(MAX))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_Codification varchar(5) = CAST(JSON_QUERY(@ActualRecord, '$.Codification') AS varchar(5))

            IF @Action = 'create'
                INSERT INTO [dbo].[Domains] ([Id]
                                                ,[TypeId]
                                                ,[MaskId]
                                                ,[Name]
                                                ,[Length]
                                                ,[Decimals]
                                                ,[ValidValues]
                                                ,[Default]
                                                ,[Minimum]
                                                ,[Maximum]
                                                ,[Codification]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_TypeId
                                                 ,@W_MaskId
                                                 ,@W_Name
                                                 ,@W_Length
                                                 ,@W_Decimals
                                                 ,@W_ValidValues
                                                 ,@W_Default
                                                 ,@W_Minimum
                                                 ,@W_Maximum
                                                 ,@W_Codification
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Domains] SET [Id] = @W_Id
                                              ,[TypeId] = @W_TypeId
                                              ,[MaskId] = @W_MaskId
                                              ,[Name] = @W_Name
                                              ,[Length] = @W_Length
                                              ,[Decimals] = @W_Decimals
                                              ,[ValidValues] = @W_ValidValues
                                              ,[Default] = @W_Default
                                              ,[Minimum] = @W_Minimum
                                              ,[Maximum] = @W_Maximum
                                              ,[Codification] = @W_Codification
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DomainsRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DomainsRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DomainsRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DomainsRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DomainsRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_TypeId tinyint = CAST(JSON_QUERY(@Parameters, '$.TypeId') AS tinyint)
                ,@W_MaskId int = CAST(JSON_QUERY(@Parameters, '$.MaskId') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_ValidValues varchar(MAX) = CAST(JSON_QUERY(@Parameters, '$.ValidValues') AS varchar(MAX))
                ,@W_Codification varchar(5) = CAST(JSON_QUERY(@Parameters, '$.Codification') AS varchar(5))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TypeId IS NOT NULL AND @W_TypeId < CAST('1' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TypeId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TypeId IS NOT NULL AND @W_TypeId > CAST('255' AS tinyint) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TypeId deve ser menor que ou igual à ''255''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_MaskId IS NOT NULL AND @W_MaskId < CAST('-2147483648' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de MaskId deve ser maior que ou igual à ''-2147483648''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_MaskId IS NOT NULL AND @W_MaskId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de MaskId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[TypeId]
              ,[MaskId]
              ,[Name]
              ,[Length]
              ,[Decimals]
              ,[ValidValues]
              ,[Default]
              ,[Minimum]
              ,[Maximum]
              ,[Codification]
            INTO [dbo].[#tmp]
            FROM [dbo].[Domains]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [TypeId] = ISNULL(@W_TypeId, [TypeId])
                  AND (@W_MaskId IS NULL OR [MaskId] = @W_MaskId)
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND (@W_ValidValues IS NULL OR [ValidValues] = @W_ValidValues)
                  AND (@W_Codification IS NULL OR [Codification] = @W_Codification)
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.TypeId') AS tinyint) AS [TypeId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.MaskId') AS int) AS [MaskId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Length') AS smallint) AS [Length]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Decimals') AS tinyint) AS [Decimals]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ValidValues') AS varchar(MAX)) AS [ValidValues]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Default') AS nvarchar(MAX)) AS [Default]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Minimum') AS nvarchar(MAX)) AS [Minimum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Maximum') AS nvarchar(MAX)) AS [Maximum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Codification') AS varchar(5)) AS [Codification]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Domains'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[TypeId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.TypeId') AS tinyint)
               ,[tmp].[MaskId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.MaskId') AS int)
               ,[tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Length] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Length') AS smallint)
               ,[tmp].[Decimals] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Decimals') AS tinyint)
               ,[tmp].[ValidValues] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ValidValues') AS varchar(MAX))
               ,[tmp].[Default] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Default') AS nvarchar(MAX))
               ,[tmp].[Minimum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Minimum') AS nvarchar(MAX))
               ,[tmp].[Maximum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Maximum') AS nvarchar(MAX))
               ,[tmp].[Codification] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Codification') AS varchar(5))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Domains'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordDomain'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ClientName'), JSON_QUERY(@LastRecord, '$.ClientName'), 'varchar(15)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.MaxRetryLogins'), JSON_QUERY(@LastRecord, '$.MaxRetryLogins'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsOffAir'), JSON_QUERY(@LastRecord, '$.IsOffAir'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Systems]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')
                                  AND [ClientName] = JSON_QUERY(@LastRecord, '$.ClientName')
                                  AND [MaxRetryLogins] = JSON_QUERY(@LastRecord, '$.MaxRetryLogins')
                                  AND [IsOffAir] = JSON_QUERY(@LastRecord, '$.IsOffAir')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Systems alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Systems';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Systems';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_ClientName varchar(15) = CAST(JSON_QUERY(@ActualRecord, '$.ClientName') AS varchar(15))
                   ,@W_MaxRetryLogins tinyint = CAST(JSON_QUERY(@ActualRecord, '$.MaxRetryLogins') AS tinyint)
                   ,@W_IsOffAir bit = CAST(JSON_QUERY(@ActualRecord, '$.IsOffAir') AS bit)

            IF @W_MaxRetryLogins IS NOT NULL AND @W_MaxRetryLogins < CAST('1' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de MaxRetryLogins em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_MaxRetryLogins IS NOT NULL AND @W_MaxRetryLogins < CAST('255' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de MaxRetryLogins em @ActualRecord deve ser menor que ou igual à 255';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Systems_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Systems_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[SystemValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Systems'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Systems' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[SystemValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Systems] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_ClientName varchar(15) = CAST(JSON_QUERY(@ActualRecord, '$.ClientName') AS varchar(15))
                   ,@W_MaxRetryLogins tinyint = CAST(JSON_QUERY(@ActualRecord, '$.MaxRetryLogins') AS tinyint)
                   ,@W_IsOffAir bit = CAST(JSON_QUERY(@ActualRecord, '$.IsOffAir') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Systems] ([Id]
                                                ,[Name]
                                                ,[Description]
                                                ,[ClientName]
                                                ,[MaxRetryLogins]
                                                ,[IsOffAir]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_Description
                                                 ,@W_ClientName
                                                 ,@W_MaxRetryLogins
                                                 ,@W_IsOffAir
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Systems] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[Description] = @W_Description
                                              ,[ClientName] = @W_ClientName
                                              ,[MaxRetryLogins] = @W_MaxRetryLogins
                                              ,[IsOffAir] = @W_IsOffAir
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemsRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemsRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemsRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemsRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemsRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_ClientName varchar(15) = CAST(JSON_QUERY(@Parameters, '$.ClientName') AS varchar(15))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[Description]
              ,[ClientName]
              ,[MaxRetryLogins]
              ,[IsOffAir]
            INTO [dbo].[#tmp]
            FROM [dbo].[Systems]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [ClientName] = ISNULL(@W_ClientName, [ClientName])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ClientName') AS varchar(15)) AS [ClientName]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.MaxRetryLogins') AS tinyint) AS [MaxRetryLogins]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsOffAir') AS bit) AS [IsOffAir]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Systems'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
               ,[tmp].[ClientName] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ClientName') AS varchar(15))
               ,[tmp].[MaxRetryLogins] = CAST(JSON_QUERY([ope].[ActualRecord], '$.MaxRetryLogins') AS tinyint)
               ,[tmp].[IsOffAir] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsOffAir') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Systems'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordSystem'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MenuValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MenuValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MenuValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MenuValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MenuValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.SystemId'), JSON_QUERY(@LastRecord, '$.SystemId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Sequence'), JSON_QUERY(@LastRecord, '$.Sequence'), 'smallint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Caption'), JSON_QUERY(@LastRecord, '$.Caption'), 'varchar(20)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Message'), JSON_QUERY(@LastRecord, '$.Message'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Action'), JSON_QUERY(@LastRecord, '$.Action'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ParentMenuId'), JSON_QUERY(@LastRecord, '$.ParentMenuId'), 'int') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Menus]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [SystemId] = JSON_QUERY(@LastRecord, '$.SystemId')
                                  AND [Sequence] = JSON_QUERY(@LastRecord, '$.Sequence')
                                  AND [Caption] = JSON_QUERY(@LastRecord, '$.Caption')
                                  AND [Message] = JSON_QUERY(@LastRecord, '$.Message')
                                  AND [cruda].[IsEquals]([Action], JSON_QUERY(@LastRecord, '$.Action'), 'varchar(50)') = 1
                                  AND [cruda].[IsEquals]([ParentMenuId], JSON_QUERY(@LastRecord, '$.ParentMenuId'), 'int') = 1) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Menus alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Menus';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Menus';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action = 'delete' BEGIN
            IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [ParentMenuId] = @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave-primária referenciada em Menus';
                THROW 51000, @ErrorMessage, 1
            END
        END ELSE BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_Caption varchar(20) = CAST(JSON_QUERY(@ActualRecord, '$.Caption') AS varchar(20))
                   ,@W_Message varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Message') AS varchar(50))
                   ,@W_Action varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Action') AS varchar(50))
                   ,@W_ParentMenuId int = CAST(JSON_QUERY(@ActualRecord, '$.ParentMenuId') AS int)

            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Id] = @W_SystemId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Systems';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('1' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('32767' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser menor que ou igual à 32767';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ParentMenuId IS NOT NULL AND @W_ParentMenuId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ParentMenuId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ParentMenuId IS NOT NULL AND @W_ParentMenuId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ParentMenuId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [Id] = @W_ParentMenuId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Menus';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [SystemId] = @W_SystemId AND [Sequence] = @W_Sequence) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Menus_SystemId_Sequence já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [SystemId] = @W_SystemId AND [Caption] = @W_Caption) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Menus_SystemId_Caption já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [SystemId] = @W_SystemId AND [Sequence] = @W_Sequence AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Menus_SystemId_Sequence inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Menus] WHERE [SystemId] = @W_SystemId AND [Caption] = @W_Caption AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Menus_SystemId_Caption inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MenuPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MenuPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MenuPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MenuPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MenuPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[MenuValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Menus'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MenuCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MenuCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MenuCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MenuCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MenuCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Menus' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[MenuValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Menus] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_Caption varchar(20) = CAST(JSON_QUERY(@ActualRecord, '$.Caption') AS varchar(20))
                   ,@W_Message varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Message') AS varchar(50))
                   ,@W_Action varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Action') AS varchar(50))
                   ,@W_ParentMenuId int = CAST(JSON_QUERY(@ActualRecord, '$.ParentMenuId') AS int)

            IF @Action = 'create'
                INSERT INTO [dbo].[Menus] ([Id]
                                                ,[SystemId]
                                                ,[Sequence]
                                                ,[Caption]
                                                ,[Message]
                                                ,[Action]
                                                ,[ParentMenuId]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_SystemId
                                                 ,@W_Sequence
                                                 ,@W_Caption
                                                 ,@W_Message
                                                 ,@W_Action
                                                 ,@W_ParentMenuId
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Menus] SET [Id] = @W_Id
                                              ,[SystemId] = @W_SystemId
                                              ,[Sequence] = @W_Sequence
                                              ,[Caption] = @W_Caption
                                              ,[Message] = @W_Message
                                              ,[Action] = @W_Action
                                              ,[ParentMenuId] = @W_ParentMenuId
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[MenusRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[MenusRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[MenusRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[MenusRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [MenusRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_SystemId int = CAST(JSON_QUERY(@Parameters, '$.SystemId') AS int)
                ,@W_Caption varchar(20) = CAST(JSON_QUERY(@Parameters, '$.Caption') AS varchar(20))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[SystemId]
              ,[Sequence]
              ,[Caption]
              ,[Message]
              ,[Action]
              ,[ParentMenuId]
            INTO [dbo].[#tmp]
            FROM [dbo].[Menus]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [SystemId] = ISNULL(@W_SystemId, [SystemId])
                  AND [Caption] = ISNULL(@W_Caption, [Caption])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.SystemId') AS int) AS [SystemId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Sequence') AS smallint) AS [Sequence]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Caption') AS varchar(20)) AS [Caption]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Message') AS varchar(50)) AS [Message]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Action') AS varchar(50)) AS [Action]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ParentMenuId') AS int) AS [ParentMenuId]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Menus'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[SystemId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.SystemId') AS int)
               ,[tmp].[Sequence] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Sequence') AS smallint)
               ,[tmp].[Caption] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Caption') AS varchar(20))
               ,[tmp].[Message] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Message') AS varchar(50))
               ,[tmp].[Action] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Action') AS varchar(50))
               ,[tmp].[ParentMenuId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ParentMenuId') AS int)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Menus'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordMenu'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[UserValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[UserValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[UserValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[UserValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [UserValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Password'), JSON_QUERY(@LastRecord, '$.Password'), 'varchar(256)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.FullName'), JSON_QUERY(@LastRecord, '$.FullName'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.RetryLogins'), JSON_QUERY(@LastRecord, '$.RetryLogins'), 'tinyint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsActive'), JSON_QUERY(@LastRecord, '$.IsActive'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Users]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Password] = JSON_QUERY(@LastRecord, '$.Password')
                                  AND [FullName] = JSON_QUERY(@LastRecord, '$.FullName')
                                  AND [RetryLogins] = JSON_QUERY(@LastRecord, '$.RetryLogins')
                                  AND [IsActive] = JSON_QUERY(@LastRecord, '$.IsActive')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Users alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Users] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Users';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Users';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Password varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Password') AS varchar(256))
                   ,@W_FullName varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.FullName') AS varchar(50))
                   ,@W_RetryLogins tinyint = CAST(JSON_QUERY(@ActualRecord, '$.RetryLogins') AS tinyint)
                   ,@W_IsActive bit = CAST(JSON_QUERY(@ActualRecord, '$.IsActive') AS bit)

            IF @W_RetryLogins IS NOT NULL AND @W_RetryLogins < CAST('0' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de RetryLogins em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_RetryLogins IS NOT NULL AND @W_RetryLogins < CAST('255' AS tinyint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de RetryLogins em @ActualRecord deve ser menor que ou igual à 255';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Users] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Users_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Users] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Users_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[UserPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[UserPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[UserPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[UserPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [UserPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[UserValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Users'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[UserCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[UserCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[UserCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[UserCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [UserCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Users' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[UserValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Users] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Password varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Password') AS varchar(256))
                   ,@W_FullName varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.FullName') AS varchar(50))
                   ,@W_RetryLogins tinyint = CAST(JSON_QUERY(@ActualRecord, '$.RetryLogins') AS tinyint)
                   ,@W_IsActive bit = CAST(JSON_QUERY(@ActualRecord, '$.IsActive') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Users] ([Id]
                                                ,[Name]
                                                ,[Password]
                                                ,[FullName]
                                                ,[RetryLogins]
                                                ,[IsActive]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_Password
                                                 ,@W_FullName
                                                 ,@W_RetryLogins
                                                 ,@W_IsActive
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Users] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[Password] = @W_Password
                                              ,[FullName] = @W_FullName
                                              ,[RetryLogins] = @W_RetryLogins
                                              ,[IsActive] = @W_IsActive
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[UsersRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[UsersRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[UsersRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[UsersRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [UsersRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_FullName varchar(50) = CAST(JSON_QUERY(@Parameters, '$.FullName') AS varchar(50))
                ,@W_IsActive bit = CAST(JSON_QUERY(@Parameters, '$.IsActive') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[Password]
              ,[FullName]
              ,[RetryLogins]
              ,[IsActive]
            INTO [dbo].[#tmp]
            FROM [dbo].[Users]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [FullName] = ISNULL(@W_FullName, [FullName])
                  AND [IsActive] = ISNULL(@W_IsActive, [IsActive])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Password') AS varchar(256)) AS [Password]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.FullName') AS varchar(50)) AS [FullName]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.RetryLogins') AS tinyint) AS [RetryLogins]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsActive') AS bit) AS [IsActive]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Users'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Password] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Password') AS varchar(256))
               ,[tmp].[FullName] = CAST(JSON_QUERY([ope].[ActualRecord], '$.FullName') AS varchar(50))
               ,[tmp].[RetryLogins] = CAST(JSON_QUERY([ope].[ActualRecord], '$.RetryLogins') AS tinyint)
               ,[tmp].[IsActive] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsActive') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Users'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordUser'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemUserValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemUserValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemUserValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemUserValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemUserValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.SystemId'), JSON_QUERY(@LastRecord, '$.SystemId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.UserId'), JSON_QUERY(@LastRecord, '$.UserId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[SystemsUsers]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [SystemId] = JSON_QUERY(@LastRecord, '$.SystemId')
                                  AND [UserId] = JSON_QUERY(@LastRecord, '$.UserId')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de SystemsUsers alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[SystemsUsers] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em SystemsUsers';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em SystemsUsers';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_UserId int = CAST(JSON_QUERY(@ActualRecord, '$.UserId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Id] = @W_SystemId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Systems';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_UserId IS NOT NULL AND @W_UserId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de UserId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_UserId IS NOT NULL AND @W_UserId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de UserId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Users] WHERE [Id] = @W_UserId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Users';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[SystemsUsers] WHERE [SystemId] = @W_SystemId AND [UserId] = @W_UserId) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsUsers_SystemId_UserId já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[SystemsUsers] WHERE [Description] = @W_Description) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsUsers_Description já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[SystemsUsers] WHERE [SystemId] = @W_SystemId AND [UserId] = @W_UserId AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsUsers_SystemId_UserId inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[SystemsUsers] WHERE [Description] = @W_Description AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsUsers_Description inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemUserPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemUserPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemUserPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemUserPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemUserPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[SystemUserValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'SystemsUsers'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemUserCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemUserCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemUserCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemUserCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemUserCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'SystemsUsers' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[SystemUserValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[SystemsUsers] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_UserId int = CAST(JSON_QUERY(@ActualRecord, '$.UserId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @Action = 'create'
                INSERT INTO [dbo].[SystemsUsers] ([Id]
                                                ,[SystemId]
                                                ,[UserId]
                                                ,[Description]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_SystemId
                                                 ,@W_UserId
                                                 ,@W_Description
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[SystemsUsers] SET [Id] = @W_Id
                                              ,[SystemId] = @W_SystemId
                                              ,[UserId] = @W_UserId
                                              ,[Description] = @W_Description
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemsUsersRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemsUsersRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemsUsersRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemsUsersRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemsUsersRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_SystemId int = CAST(JSON_QUERY(@Parameters, '$.SystemId') AS int)
                ,@W_UserId int = CAST(JSON_QUERY(@Parameters, '$.UserId') AS int)
                ,@W_Description varchar(50) = CAST(JSON_QUERY(@Parameters, '$.Description') AS varchar(50))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_UserId IS NOT NULL AND @W_UserId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de UserId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_UserId IS NOT NULL AND @W_UserId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de UserId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[SystemId]
              ,[UserId]
              ,[Description]
            INTO [dbo].[#tmp]
            FROM [dbo].[SystemsUsers]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [SystemId] = ISNULL(@W_SystemId, [SystemId])
                  AND [UserId] = ISNULL(@W_UserId, [UserId])
                  AND [Description] = ISNULL(@W_Description, [Description])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.SystemId') AS int) AS [SystemId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.UserId') AS int) AS [UserId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'SystemsUsers'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[SystemId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.SystemId') AS int)
               ,[tmp].[UserId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.UserId') AS int)
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'SystemsUsers'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordSystemUser'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabaseValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabaseValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabaseValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabaseValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabaseValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Alias'), JSON_QUERY(@LastRecord, '$.Alias'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ServerName'), JSON_QUERY(@LastRecord, '$.ServerName'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.HostName'), JSON_QUERY(@LastRecord, '$.HostName'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Port'), JSON_QUERY(@LastRecord, '$.Port'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Logon'), JSON_QUERY(@LastRecord, '$.Logon'), 'varchar(256)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Password'), JSON_QUERY(@LastRecord, '$.Password'), 'varchar(256)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Folder'), JSON_QUERY(@LastRecord, '$.Folder'), 'varchar(256)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Databases]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')
                                  AND [Alias] = JSON_QUERY(@LastRecord, '$.Alias')
                                  AND [cruda].[IsEquals]([ServerName], JSON_QUERY(@LastRecord, '$.ServerName'), 'varchar(50)') = 1
                                  AND [cruda].[IsEquals]([HostName], JSON_QUERY(@LastRecord, '$.HostName'), 'varchar(25)') = 1
                                  AND [cruda].[IsEquals]([Port], JSON_QUERY(@LastRecord, '$.Port'), 'int') = 1
                                  AND [cruda].[IsEquals]([Logon], JSON_QUERY(@LastRecord, '$.Logon'), 'varchar(256)') = 1
                                  AND [cruda].[IsEquals]([Password], JSON_QUERY(@LastRecord, '$.Password'), 'varchar(256)') = 1
                                  AND [cruda].[IsEquals]([Folder], JSON_QUERY(@LastRecord, '$.Folder'), 'varchar(256)') = 1) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Databases alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Databases';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Databases';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_Alias varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Alias') AS varchar(25))
                   ,@W_ServerName varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.ServerName') AS varchar(50))
                   ,@W_HostName varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.HostName') AS varchar(25))
                   ,@W_Port int = CAST(JSON_QUERY(@ActualRecord, '$.Port') AS int)
                   ,@W_Logon varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Logon') AS varchar(256))
                   ,@W_Password varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Password') AS varchar(256))
                   ,@W_Folder varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Folder') AS varchar(256))

            IF @W_Port IS NOT NULL AND @W_Port < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Port em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Port IS NOT NULL AND @W_Port < CAST('65535' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Port em @ActualRecord deve ser menor que ou igual à 65535';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Databases_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Alias] = @W_Alias) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Databases_Alias já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Databases_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Alias] = @W_Alias AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Databases_Alias inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabasePersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabasePersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabasePersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabasePersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabasePersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[DatabaseValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Databases'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabaseCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabaseCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabaseCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabaseCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabaseCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Databases' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[DatabaseValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Databases] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_Alias varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Alias') AS varchar(25))
                   ,@W_ServerName varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.ServerName') AS varchar(50))
                   ,@W_HostName varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.HostName') AS varchar(25))
                   ,@W_Port int = CAST(JSON_QUERY(@ActualRecord, '$.Port') AS int)
                   ,@W_Logon varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Logon') AS varchar(256))
                   ,@W_Password varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Password') AS varchar(256))
                   ,@W_Folder varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.Folder') AS varchar(256))

            IF @Action = 'create'
                INSERT INTO [dbo].[Databases] ([Id]
                                                ,[Name]
                                                ,[Description]
                                                ,[Alias]
                                                ,[ServerName]
                                                ,[HostName]
                                                ,[Port]
                                                ,[Logon]
                                                ,[Password]
                                                ,[Folder]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_Description
                                                 ,@W_Alias
                                                 ,@W_ServerName
                                                 ,@W_HostName
                                                 ,@W_Port
                                                 ,@W_Logon
                                                 ,@W_Password
                                                 ,@W_Folder
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Databases] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[Description] = @W_Description
                                              ,[Alias] = @W_Alias
                                              ,[ServerName] = @W_ServerName
                                              ,[HostName] = @W_HostName
                                              ,[Port] = @W_Port
                                              ,[Logon] = @W_Logon
                                              ,[Password] = @W_Password
                                              ,[Folder] = @W_Folder
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabasesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabasesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabasesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabasesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabasesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_Alias varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Alias') AS varchar(25))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[Description]
              ,[Alias]
              ,[ServerName]
              ,[HostName]
              ,[Port]
              ,[Logon]
              ,[Password]
              ,[Folder]
            INTO [dbo].[#tmp]
            FROM [dbo].[Databases]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [Alias] = ISNULL(@W_Alias, [Alias])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Alias') AS varchar(25)) AS [Alias]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ServerName') AS varchar(50)) AS [ServerName]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.HostName') AS varchar(25)) AS [HostName]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Port') AS int) AS [Port]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Logon') AS varchar(256)) AS [Logon]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Password') AS varchar(256)) AS [Password]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Folder') AS varchar(256)) AS [Folder]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Databases'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
               ,[tmp].[Alias] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Alias') AS varchar(25))
               ,[tmp].[ServerName] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ServerName') AS varchar(50))
               ,[tmp].[HostName] = CAST(JSON_QUERY([ope].[ActualRecord], '$.HostName') AS varchar(25))
               ,[tmp].[Port] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Port') AS int)
               ,[tmp].[Logon] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Logon') AS varchar(256))
               ,[tmp].[Password] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Password') AS varchar(256))
               ,[tmp].[Folder] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Folder') AS varchar(256))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Databases'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordDatabase'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemDatabaseValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemDatabaseValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemDatabaseValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemDatabaseValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemDatabaseValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.SystemId'), JSON_QUERY(@LastRecord, '$.SystemId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.DatabaseId'), JSON_QUERY(@LastRecord, '$.DatabaseId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[SystemsDatabases]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [SystemId] = JSON_QUERY(@LastRecord, '$.SystemId')
                                  AND [DatabaseId] = JSON_QUERY(@LastRecord, '$.DatabaseId')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de SystemsDatabases alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[SystemsDatabases] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em SystemsDatabases';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em SystemsDatabases';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Id] = @W_SystemId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Systems';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Id] = @W_DatabaseId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Databases';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[SystemsDatabases] WHERE [SystemId] = @W_SystemId AND [DatabaseId] = @W_DatabaseId) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsDatabases_SystemId_DatabaseId já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[SystemsDatabases] WHERE [Description] = @W_Description) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsDatabases_Description já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[SystemsDatabases] WHERE [SystemId] = @W_SystemId AND [DatabaseId] = @W_DatabaseId AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsDatabases_SystemId_DatabaseId inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[SystemsDatabases] WHERE [Description] = @W_Description AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_SystemsDatabases_Description inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemDatabasePersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemDatabasePersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemDatabasePersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemDatabasePersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemDatabasePersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[SystemDatabaseValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'SystemsDatabases'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemDatabaseCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemDatabaseCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemDatabaseCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemDatabaseCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemDatabaseCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'SystemsDatabases' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[SystemDatabaseValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[SystemsDatabases] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @Action = 'create'
                INSERT INTO [dbo].[SystemsDatabases] ([Id]
                                                ,[SystemId]
                                                ,[DatabaseId]
                                                ,[Description]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_SystemId
                                                 ,@W_DatabaseId
                                                 ,@W_Description
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[SystemsDatabases] SET [Id] = @W_Id
                                              ,[SystemId] = @W_SystemId
                                              ,[DatabaseId] = @W_DatabaseId
                                              ,[Description] = @W_Description
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[SystemsDatabasesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[SystemsDatabasesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[SystemsDatabasesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[SystemsDatabasesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [SystemsDatabasesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_SystemId int = CAST(JSON_QUERY(@Parameters, '$.SystemId') AS int)
                ,@W_DatabaseId int = CAST(JSON_QUERY(@Parameters, '$.DatabaseId') AS int)
                ,@W_Description varchar(50) = CAST(JSON_QUERY(@Parameters, '$.Description') AS varchar(50))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[SystemId]
              ,[DatabaseId]
              ,[Description]
            INTO [dbo].[#tmp]
            FROM [dbo].[SystemsDatabases]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [SystemId] = ISNULL(@W_SystemId, [SystemId])
                  AND [DatabaseId] = ISNULL(@W_DatabaseId, [DatabaseId])
                  AND [Description] = ISNULL(@W_Description, [Description])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.SystemId') AS int) AS [SystemId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.DatabaseId') AS int) AS [DatabaseId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'SystemsDatabases'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[SystemId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.SystemId') AS int)
               ,[tmp].[DatabaseId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.DatabaseId') AS int)
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'SystemsDatabases'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordSystemDatabase'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TableValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TableValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TableValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TableValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TableValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Alias'), JSON_QUERY(@LastRecord, '$.Alias'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ParentTableId'), JSON_QUERY(@LastRecord, '$.ParentTableId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsPaged'), JSON_QUERY(@LastRecord, '$.IsPaged'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.CurrentId'), JSON_QUERY(@LastRecord, '$.CurrentId'), 'int') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Tables]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Alias] = JSON_QUERY(@LastRecord, '$.Alias')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')
                                  AND [cruda].[IsEquals]([ParentTableId], JSON_QUERY(@LastRecord, '$.ParentTableId'), 'int') = 1
                                  AND [IsPaged] = JSON_QUERY(@LastRecord, '$.IsPaged')
                                  AND [CurrentId] = JSON_QUERY(@LastRecord, '$.CurrentId')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Tables alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Tables';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Tables';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Alias varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Alias') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_ParentTableId int = CAST(JSON_QUERY(@ActualRecord, '$.ParentTableId') AS int)
                   ,@W_IsPaged bit = CAST(JSON_QUERY(@ActualRecord, '$.IsPaged') AS bit)
                   ,@W_CurrentId int = CAST(JSON_QUERY(@ActualRecord, '$.CurrentId') AS int)

            IF @W_ParentTableId IS NOT NULL AND @W_ParentTableId < CAST('0' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ParentTableId em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ParentTableId IS NOT NULL AND @W_ParentTableId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ParentTableId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_CurrentId IS NOT NULL AND @W_CurrentId < CAST('0' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de CurrentId em @ActualRecord deve ser maior que ou igual à 0';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_CurrentId IS NOT NULL AND @W_CurrentId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de CurrentId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Tables_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Alias] = @W_Alias) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Tables_Alias já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Tables_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Alias] = @W_Alias AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Tables_Alias inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TablePersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TablePersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TablePersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TablePersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TablePersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[TableValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Tables'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TableCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TableCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TableCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TableCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TableCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Tables' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[TableValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Tables] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Alias varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Alias') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_ParentTableId int = CAST(JSON_QUERY(@ActualRecord, '$.ParentTableId') AS int)
                   ,@W_IsPaged bit = CAST(JSON_QUERY(@ActualRecord, '$.IsPaged') AS bit)
                   ,@W_CurrentId int = CAST(JSON_QUERY(@ActualRecord, '$.CurrentId') AS int)

            IF @Action = 'create'
                INSERT INTO [dbo].[Tables] ([Id]
                                                ,[Name]
                                                ,[Alias]
                                                ,[Description]
                                                ,[ParentTableId]
                                                ,[IsPaged]
                                                ,[CurrentId]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_Name
                                                 ,@W_Alias
                                                 ,@W_Description
                                                 ,@W_ParentTableId
                                                 ,@W_IsPaged
                                                 ,@W_CurrentId
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Tables] SET [Id] = @W_Id
                                              ,[Name] = @W_Name
                                              ,[Alias] = @W_Alias
                                              ,[Description] = @W_Description
                                              ,[ParentTableId] = @W_ParentTableId
                                              ,[IsPaged] = @W_IsPaged
                                              ,[CurrentId] = @W_CurrentId
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[TablesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[TablesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[TablesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[TablesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [TablesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_Alias varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Alias') AS varchar(25))
                ,@W_IsPaged bit = CAST(JSON_QUERY(@Parameters, '$.IsPaged') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[Name]
              ,[Alias]
              ,[Description]
              ,[ParentTableId]
              ,[IsPaged]
              ,[CurrentId]
            INTO [dbo].[#tmp]
            FROM [dbo].[Tables]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [Alias] = ISNULL(@W_Alias, [Alias])
                  AND [IsPaged] = ISNULL(@W_IsPaged, [IsPaged])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Alias') AS varchar(25)) AS [Alias]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ParentTableId') AS int) AS [ParentTableId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsPaged') AS bit) AS [IsPaged]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.CurrentId') AS int) AS [CurrentId]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Tables'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Alias] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Alias') AS varchar(25))
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
               ,[tmp].[ParentTableId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ParentTableId') AS int)
               ,[tmp].[IsPaged] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsPaged') AS bit)
               ,[tmp].[CurrentId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.CurrentId') AS int)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Tables'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordTable'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabaseTableValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabaseTableValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabaseTableValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabaseTableValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabaseTableValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.DatabaseId'), JSON_QUERY(@LastRecord, '$.DatabaseId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.TableId'), JSON_QUERY(@LastRecord, '$.TableId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[DatabasesTables]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [DatabaseId] = JSON_QUERY(@LastRecord, '$.DatabaseId')
                                  AND [TableId] = JSON_QUERY(@LastRecord, '$.TableId')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de DatabasesTables alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[DatabasesTables] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em DatabasesTables';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em DatabasesTables';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Id] = @W_DatabaseId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Databases';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Id] = @W_TableId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Tables';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[DatabasesTables] WHERE [Id] = @W_Id AND [TableId] = @W_TableId) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_DatabasesTables_DatabaseId_TableId já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[DatabasesTables] WHERE [Description] = @W_Description) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_DatabasesTables_Description já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[DatabasesTables] WHERE [Id] = @W_Id AND [TableId] = @W_TableId AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_DatabasesTables_DatabaseId_TableId inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[DatabasesTables] WHERE [Description] = @W_Description AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_DatabasesTables_Description inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabaseTablePersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabaseTablePersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabaseTablePersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabaseTablePersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabaseTablePersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[DatabaseTableValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'DatabasesTables'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabaseTableCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabaseTableCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabaseTableCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabaseTableCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabaseTableCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'DatabasesTables' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[DatabaseTableValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[DatabasesTables] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))

            IF @Action = 'create'
                INSERT INTO [dbo].[DatabasesTables] ([Id]
                                                ,[DatabaseId]
                                                ,[TableId]
                                                ,[Description]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_DatabaseId
                                                 ,@W_TableId
                                                 ,@W_Description
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[DatabasesTables] SET [Id] = @W_Id
                                              ,[DatabaseId] = @W_DatabaseId
                                              ,[TableId] = @W_TableId
                                              ,[Description] = @W_Description
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[DatabasesTablesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[DatabasesTablesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[DatabasesTablesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[DatabasesTablesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [DatabasesTablesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_DatabaseId int = CAST(JSON_QUERY(@Parameters, '$.DatabaseId') AS int)
                ,@W_TableId int = CAST(JSON_QUERY(@Parameters, '$.TableId') AS int)
                ,@W_Description varchar(50) = CAST(JSON_QUERY(@Parameters, '$.Description') AS varchar(50))

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[DatabaseId]
              ,[TableId]
              ,[Description]
            INTO [dbo].[#tmp]
            FROM [dbo].[DatabasesTables]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [DatabaseId] = ISNULL(@W_DatabaseId, [DatabaseId])
                  AND [TableId] = ISNULL(@W_TableId, [TableId])
                  AND [Description] = ISNULL(@W_Description, [Description])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.DatabaseId') AS int) AS [DatabaseId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.TableId') AS int) AS [TableId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'DatabasesTables'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[DatabaseId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.DatabaseId') AS int)
               ,[tmp].[TableId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.TableId') AS int)
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'DatabasesTables'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordDatabaseTable'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[ColumnValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[ColumnValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[ColumnValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[ColumnValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [ColumnValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.TableId'), JSON_QUERY(@LastRecord, '$.TableId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Sequence'), JSON_QUERY(@LastRecord, '$.Sequence'), 'smallint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.DomainId'), JSON_QUERY(@LastRecord, '$.DomainId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ReferenceTableId'), JSON_QUERY(@LastRecord, '$.ReferenceTableId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Description'), JSON_QUERY(@LastRecord, '$.Description'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Title'), JSON_QUERY(@LastRecord, '$.Title'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Caption'), JSON_QUERY(@LastRecord, '$.Caption'), 'varchar(25)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ValidValues'), JSON_QUERY(@LastRecord, '$.ValidValues'), 'varchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Default'), JSON_QUERY(@LastRecord, '$.Default'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Minimum'), JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Maximum'), JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsPrimarykey'), JSON_QUERY(@LastRecord, '$.IsPrimarykey'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsAutoIncrement'), JSON_QUERY(@LastRecord, '$.IsAutoIncrement'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsRequired'), JSON_QUERY(@LastRecord, '$.IsRequired'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsListable'), JSON_QUERY(@LastRecord, '$.IsListable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsFilterable'), JSON_QUERY(@LastRecord, '$.IsFilterable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsEditable'), JSON_QUERY(@LastRecord, '$.IsEditable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsBrowseable'), JSON_QUERY(@LastRecord, '$.IsBrowseable'), 'bit') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsEncrypted'), JSON_QUERY(@LastRecord, '$.IsEncrypted'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Columns]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [TableId] = JSON_QUERY(@LastRecord, '$.TableId')
                                  AND [Sequence] = JSON_QUERY(@LastRecord, '$.Sequence')
                                  AND [DomainId] = JSON_QUERY(@LastRecord, '$.DomainId')
                                  AND [cruda].[IsEquals]([ReferenceTableId], JSON_QUERY(@LastRecord, '$.ReferenceTableId'), 'int') = 1
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [Description] = JSON_QUERY(@LastRecord, '$.Description')
                                  AND [Title] = JSON_QUERY(@LastRecord, '$.Title')
                                  AND [Caption] = JSON_QUERY(@LastRecord, '$.Caption')
                                  AND [cruda].[IsEquals]([ValidValues], JSON_QUERY(@LastRecord, '$.ValidValues'), 'varchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Default], JSON_QUERY(@LastRecord, '$.Default'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Minimum], JSON_QUERY(@LastRecord, '$.Minimum'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([Maximum], JSON_QUERY(@LastRecord, '$.Maximum'), 'nvarchar(MAX)') = 1
                                  AND [cruda].[IsEquals]([IsPrimarykey], JSON_QUERY(@LastRecord, '$.IsPrimarykey'), 'bit') = 1
                                  AND [cruda].[IsEquals]([IsAutoIncrement], JSON_QUERY(@LastRecord, '$.IsAutoIncrement'), 'bit') = 1
                                  AND [IsRequired] = JSON_QUERY(@LastRecord, '$.IsRequired')
                                  AND [cruda].[IsEquals]([IsListable], JSON_QUERY(@LastRecord, '$.IsListable'), 'bit') = 1
                                  AND [cruda].[IsEquals]([IsFilterable], JSON_QUERY(@LastRecord, '$.IsFilterable'), 'bit') = 1
                                  AND [cruda].[IsEquals]([IsEditable], JSON_QUERY(@LastRecord, '$.IsEditable'), 'bit') = 1
                                  AND [cruda].[IsEquals]([IsBrowseable], JSON_QUERY(@LastRecord, '$.IsBrowseable'), 'bit') = 1
                                  AND [cruda].[IsEquals]([IsEncrypted], JSON_QUERY(@LastRecord, '$.IsEncrypted'), 'bit') = 1) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Columns alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Columns';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Columns';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_DomainId int = CAST(JSON_QUERY(@ActualRecord, '$.DomainId') AS int)
                   ,@W_ReferenceTableId int = CAST(JSON_QUERY(@ActualRecord, '$.ReferenceTableId') AS int)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_Title varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Title') AS varchar(25))
                   ,@W_Caption varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Caption') AS varchar(25))
                   ,@W_ValidValues varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.ValidValues') AS varchar(MAX))
                   ,@W_Default nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Default') AS nvarchar(MAX))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_IsPrimarykey bit = CAST(JSON_QUERY(@ActualRecord, '$.IsPrimarykey') AS bit)
                   ,@W_IsAutoIncrement bit = CAST(JSON_QUERY(@ActualRecord, '$.IsAutoIncrement') AS bit)
                   ,@W_IsRequired bit = CAST(JSON_QUERY(@ActualRecord, '$.IsRequired') AS bit)
                   ,@W_IsListable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsListable') AS bit)
                   ,@W_IsFilterable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsFilterable') AS bit)
                   ,@W_IsEditable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsEditable') AS bit)
                   ,@W_IsBrowseable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsBrowseable') AS bit)
                   ,@W_IsEncrypted bit = CAST(JSON_QUERY(@ActualRecord, '$.IsEncrypted') AS bit)

            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Id] = @W_TableId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Tables';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('1' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('32767' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser menor que ou igual à 32767';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DomainId IS NOT NULL AND @W_DomainId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DomainId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DomainId IS NOT NULL AND @W_DomainId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DomainId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Domains] WHERE [Id] = @W_DomainId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Domains';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ReferenceTableId IS NOT NULL AND @W_ReferenceTableId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ReferenceTableId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ReferenceTableId IS NOT NULL AND @W_ReferenceTableId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ReferenceTableId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Id] = @W_ReferenceTableId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Tables';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE [TableId] = @W_TableId AND [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Columns_TableId_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE [TableId] = @W_TableId AND [Sequence] = @W_Sequence) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Columns_TableId_Sequence já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE [TableId] = @W_TableId AND [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Columns_TableId_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE [TableId] = @W_TableId AND [Sequence] = @W_Sequence AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Columns_TableId_Sequence inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[ColumnPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[ColumnPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[ColumnPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[ColumnPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [ColumnPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[ColumnValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Columns'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[ColumnCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[ColumnCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[ColumnCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[ColumnCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [ColumnCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Columns' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[ColumnValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Columns] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_DomainId int = CAST(JSON_QUERY(@ActualRecord, '$.DomainId') AS int)
                   ,@W_ReferenceTableId int = CAST(JSON_QUERY(@ActualRecord, '$.ReferenceTableId') AS int)
                   ,@W_Name varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(25))
                   ,@W_Description varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Description') AS varchar(50))
                   ,@W_Title varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Title') AS varchar(25))
                   ,@W_Caption varchar(25) = CAST(JSON_QUERY(@ActualRecord, '$.Caption') AS varchar(25))
                   ,@W_ValidValues varchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.ValidValues') AS varchar(MAX))
                   ,@W_Default nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Default') AS nvarchar(MAX))
                   ,@W_Minimum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Minimum') AS nvarchar(MAX))
                   ,@W_Maximum nvarchar(MAX) = CAST(JSON_QUERY(@ActualRecord, '$.Maximum') AS nvarchar(MAX))
                   ,@W_IsPrimarykey bit = CAST(JSON_QUERY(@ActualRecord, '$.IsPrimarykey') AS bit)
                   ,@W_IsAutoIncrement bit = CAST(JSON_QUERY(@ActualRecord, '$.IsAutoIncrement') AS bit)
                   ,@W_IsRequired bit = CAST(JSON_QUERY(@ActualRecord, '$.IsRequired') AS bit)
                   ,@W_IsListable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsListable') AS bit)
                   ,@W_IsFilterable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsFilterable') AS bit)
                   ,@W_IsEditable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsEditable') AS bit)
                   ,@W_IsBrowseable bit = CAST(JSON_QUERY(@ActualRecord, '$.IsBrowseable') AS bit)
                   ,@W_IsEncrypted bit = CAST(JSON_QUERY(@ActualRecord, '$.IsEncrypted') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Columns] ([Id]
                                                ,[TableId]
                                                ,[Sequence]
                                                ,[DomainId]
                                                ,[ReferenceTableId]
                                                ,[Name]
                                                ,[Description]
                                                ,[Title]
                                                ,[Caption]
                                                ,[ValidValues]
                                                ,[Default]
                                                ,[Minimum]
                                                ,[Maximum]
                                                ,[IsPrimarykey]
                                                ,[IsAutoIncrement]
                                                ,[IsRequired]
                                                ,[IsListable]
                                                ,[IsFilterable]
                                                ,[IsEditable]
                                                ,[IsBrowseable]
                                                ,[IsEncrypted]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_TableId
                                                 ,@W_Sequence
                                                 ,@W_DomainId
                                                 ,@W_ReferenceTableId
                                                 ,@W_Name
                                                 ,@W_Description
                                                 ,@W_Title
                                                 ,@W_Caption
                                                 ,@W_ValidValues
                                                 ,@W_Default
                                                 ,@W_Minimum
                                                 ,@W_Maximum
                                                 ,@W_IsPrimarykey
                                                 ,@W_IsAutoIncrement
                                                 ,@W_IsRequired
                                                 ,@W_IsListable
                                                 ,@W_IsFilterable
                                                 ,@W_IsEditable
                                                 ,@W_IsBrowseable
                                                 ,@W_IsEncrypted
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Columns] SET [Id] = @W_Id
                                              ,[TableId] = @W_TableId
                                              ,[Sequence] = @W_Sequence
                                              ,[DomainId] = @W_DomainId
                                              ,[ReferenceTableId] = @W_ReferenceTableId
                                              ,[Name] = @W_Name
                                              ,[Description] = @W_Description
                                              ,[Title] = @W_Title
                                              ,[Caption] = @W_Caption
                                              ,[ValidValues] = @W_ValidValues
                                              ,[Default] = @W_Default
                                              ,[Minimum] = @W_Minimum
                                              ,[Maximum] = @W_Maximum
                                              ,[IsPrimarykey] = @W_IsPrimarykey
                                              ,[IsAutoIncrement] = @W_IsAutoIncrement
                                              ,[IsRequired] = @W_IsRequired
                                              ,[IsListable] = @W_IsListable
                                              ,[IsFilterable] = @W_IsFilterable
                                              ,[IsEditable] = @W_IsEditable
                                              ,[IsBrowseable] = @W_IsBrowseable
                                              ,[IsEncrypted] = @W_IsEncrypted
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[ColumnsRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[ColumnsRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[ColumnsRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[ColumnsRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [ColumnsRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_TableId int = CAST(JSON_QUERY(@Parameters, '$.TableId') AS int)
                ,@W_DomainId int = CAST(JSON_QUERY(@Parameters, '$.DomainId') AS int)
                ,@W_ReferenceTableId int = CAST(JSON_QUERY(@Parameters, '$.ReferenceTableId') AS int)
                ,@W_Name varchar(25) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(25))
                ,@W_IsAutoIncrement bit = CAST(JSON_QUERY(@Parameters, '$.IsAutoIncrement') AS bit)
                ,@W_IsRequired bit = CAST(JSON_QUERY(@Parameters, '$.IsRequired') AS bit)
                ,@W_IsListable bit = CAST(JSON_QUERY(@Parameters, '$.IsListable') AS bit)
                ,@W_IsFilterable bit = CAST(JSON_QUERY(@Parameters, '$.IsFilterable') AS bit)
                ,@W_IsEditable bit = CAST(JSON_QUERY(@Parameters, '$.IsEditable') AS bit)
                ,@W_IsBrowseable bit = CAST(JSON_QUERY(@Parameters, '$.IsBrowseable') AS bit)
                ,@W_IsEncrypted bit = CAST(JSON_QUERY(@Parameters, '$.IsEncrypted') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DomainId IS NOT NULL AND @W_DomainId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DomainId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_DomainId IS NOT NULL AND @W_DomainId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de DomainId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_ReferenceTableId IS NOT NULL AND @W_ReferenceTableId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de ReferenceTableId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_ReferenceTableId IS NOT NULL AND @W_ReferenceTableId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de ReferenceTableId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[TableId]
              ,[Sequence]
              ,[DomainId]
              ,[ReferenceTableId]
              ,[Name]
              ,[Description]
              ,[Title]
              ,[Caption]
              ,[ValidValues]
              ,[Default]
              ,[Minimum]
              ,[Maximum]
              ,[IsPrimarykey]
              ,[IsAutoIncrement]
              ,[IsRequired]
              ,[IsListable]
              ,[IsFilterable]
              ,[IsEditable]
              ,[IsBrowseable]
              ,[IsEncrypted]
            INTO [dbo].[#tmp]
            FROM [dbo].[Columns]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [TableId] = ISNULL(@W_TableId, [TableId])
                  AND [DomainId] = ISNULL(@W_DomainId, [DomainId])
                  AND (@W_ReferenceTableId IS NULL OR [ReferenceTableId] = @W_ReferenceTableId)
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND (@W_IsAutoIncrement IS NULL OR [IsAutoIncrement] = @W_IsAutoIncrement)
                  AND [IsRequired] = ISNULL(@W_IsRequired, [IsRequired])
                  AND (@W_IsListable IS NULL OR [IsListable] = @W_IsListable)
                  AND (@W_IsFilterable IS NULL OR [IsFilterable] = @W_IsFilterable)
                  AND (@W_IsEditable IS NULL OR [IsEditable] = @W_IsEditable)
                  AND (@W_IsBrowseable IS NULL OR [IsBrowseable] = @W_IsBrowseable)
                  AND (@W_IsEncrypted IS NULL OR [IsEncrypted] = @W_IsEncrypted)
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.TableId') AS int) AS [TableId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Sequence') AS smallint) AS [Sequence]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.DomainId') AS int) AS [DomainId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ReferenceTableId') AS int) AS [ReferenceTableId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(25)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Description') AS varchar(50)) AS [Description]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Title') AS varchar(25)) AS [Title]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Caption') AS varchar(25)) AS [Caption]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ValidValues') AS varchar(MAX)) AS [ValidValues]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Default') AS nvarchar(MAX)) AS [Default]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Minimum') AS nvarchar(MAX)) AS [Minimum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Maximum') AS nvarchar(MAX)) AS [Maximum]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsPrimarykey') AS bit) AS [IsPrimarykey]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsAutoIncrement') AS bit) AS [IsAutoIncrement]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsRequired') AS bit) AS [IsRequired]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsListable') AS bit) AS [IsListable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsFilterable') AS bit) AS [IsFilterable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsEditable') AS bit) AS [IsEditable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsBrowseable') AS bit) AS [IsBrowseable]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsEncrypted') AS bit) AS [IsEncrypted]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[TableId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.TableId') AS int)
               ,[tmp].[Sequence] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Sequence') AS smallint)
               ,[tmp].[DomainId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.DomainId') AS int)
               ,[tmp].[ReferenceTableId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ReferenceTableId') AS int)
               ,[tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(25))
               ,[tmp].[Description] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Description') AS varchar(50))
               ,[tmp].[Title] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Title') AS varchar(25))
               ,[tmp].[Caption] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Caption') AS varchar(25))
               ,[tmp].[ValidValues] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ValidValues') AS varchar(MAX))
               ,[tmp].[Default] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Default') AS nvarchar(MAX))
               ,[tmp].[Minimum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Minimum') AS nvarchar(MAX))
               ,[tmp].[Maximum] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Maximum') AS nvarchar(MAX))
               ,[tmp].[IsPrimarykey] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsPrimarykey') AS bit)
               ,[tmp].[IsAutoIncrement] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsAutoIncrement') AS bit)
               ,[tmp].[IsRequired] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsRequired') AS bit)
               ,[tmp].[IsListable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsListable') AS bit)
               ,[tmp].[IsFilterable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsFilterable') AS bit)
               ,[tmp].[IsEditable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsEditable') AS bit)
               ,[tmp].[IsBrowseable] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsBrowseable') AS bit)
               ,[tmp].[IsEncrypted] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsEncrypted') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordColumn'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.DatabaseId'), JSON_QUERY(@LastRecord, '$.DatabaseId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.TableId'), JSON_QUERY(@LastRecord, '$.TableId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Name'), JSON_QUERY(@LastRecord, '$.Name'), 'varchar(50)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsUnique'), JSON_QUERY(@LastRecord, '$.IsUnique'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Indexes]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [DatabaseId] = JSON_QUERY(@LastRecord, '$.DatabaseId')
                                  AND [TableId] = JSON_QUERY(@LastRecord, '$.TableId')
                                  AND [Name] = JSON_QUERY(@LastRecord, '$.Name')
                                  AND [IsUnique] = JSON_QUERY(@LastRecord, '$.IsUnique')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Indexes alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Indexes] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Indexes';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Indexes';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Name varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(50))
                   ,@W_IsUnique bit = CAST(JSON_QUERY(@ActualRecord, '$.IsUnique') AS bit)

            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_DatabaseId IS NOT NULL AND @W_DatabaseId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de DatabaseId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Databases] WHERE [Id] = @W_DatabaseId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Databases';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_TableId IS NOT NULL AND @W_TableId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de TableId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Tables] WHERE [Id] = @W_TableId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Tables';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Indexes] WHERE [DatabaseId] = @W_DatabaseId AND [Name] = @W_Name) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexes_DatabaseId_Name já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Indexes] WHERE [DatabaseId] = @W_DatabaseId AND [Name] = @W_Name AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexes_DatabaseId_Name inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[IndexValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Indexes'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Indexes' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[IndexValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Indexes] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_DatabaseId int = CAST(JSON_QUERY(@ActualRecord, '$.DatabaseId') AS int)
                   ,@W_TableId int = CAST(JSON_QUERY(@ActualRecord, '$.TableId') AS int)
                   ,@W_Name varchar(50) = CAST(JSON_QUERY(@ActualRecord, '$.Name') AS varchar(50))
                   ,@W_IsUnique bit = CAST(JSON_QUERY(@ActualRecord, '$.IsUnique') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Indexes] ([Id]
                                                ,[DatabaseId]
                                                ,[TableId]
                                                ,[Name]
                                                ,[IsUnique]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_DatabaseId
                                                 ,@W_TableId
                                                 ,@W_Name
                                                 ,@W_IsUnique
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Indexes] SET [Id] = @W_Id
                                              ,[DatabaseId] = @W_DatabaseId
                                              ,[TableId] = @W_TableId
                                              ,[Name] = @W_Name
                                              ,[IsUnique] = @W_IsUnique
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexesRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexesRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexesRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexesRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexesRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_TableId int = CAST(JSON_QUERY(@Parameters, '$.TableId') AS int)
                ,@W_Name varchar(50) = CAST(JSON_QUERY(@Parameters, '$.Name') AS varchar(50))
                ,@W_IsUnique bit = CAST(JSON_QUERY(@Parameters, '$.IsUnique') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_TableId IS NOT NULL AND @W_TableId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de TableId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[DatabaseId]
              ,[TableId]
              ,[Name]
              ,[IsUnique]
            INTO [dbo].[#tmp]
            FROM [dbo].[Indexes]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [TableId] = ISNULL(@W_TableId, [TableId])
                  AND [Name] = ISNULL(@W_Name, [Name])
                  AND [IsUnique] = ISNULL(@W_IsUnique, [IsUnique])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.DatabaseId') AS int) AS [DatabaseId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.TableId') AS int) AS [TableId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Name') AS varchar(50)) AS [Name]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsUnique') AS bit) AS [IsUnique]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Indexes'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[DatabaseId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.DatabaseId') AS int)
               ,[tmp].[TableId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.TableId') AS int)
               ,[tmp].[Name] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Name') AS varchar(50))
               ,[tmp].[IsUnique] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsUnique') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Indexes'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordIndex'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexkeyValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexkeyValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexkeyValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexkeyValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexkeyValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IndexId'), JSON_QUERY(@LastRecord, '$.IndexId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Sequence'), JSON_QUERY(@LastRecord, '$.Sequence'), 'smallint') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.ColumnId'), JSON_QUERY(@LastRecord, '$.ColumnId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsDescending'), JSON_QUERY(@LastRecord, '$.IsDescending'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Indexkeys]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [IndexId] = JSON_QUERY(@LastRecord, '$.IndexId')
                                  AND [Sequence] = JSON_QUERY(@LastRecord, '$.Sequence')
                                  AND [ColumnId] = JSON_QUERY(@LastRecord, '$.ColumnId')
                                  AND [IsDescending] = JSON_QUERY(@LastRecord, '$.IsDescending')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Indexkeys alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Indexkeys] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Indexkeys';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Indexkeys';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_IndexId int = CAST(JSON_QUERY(@ActualRecord, '$.IndexId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_ColumnId int = CAST(JSON_QUERY(@ActualRecord, '$.ColumnId') AS int)
                   ,@W_IsDescending bit = CAST(JSON_QUERY(@ActualRecord, '$.IsDescending') AS bit)

            IF @W_IndexId IS NOT NULL AND @W_IndexId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de IndexId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_IndexId IS NOT NULL AND @W_IndexId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de IndexId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Indexes] WHERE [Id] = @W_IndexId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Indexes';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('1' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_Sequence IS NOT NULL AND @W_Sequence < CAST('32767' AS smallint) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Sequence em @ActualRecord deve ser menor que ou igual à 32767';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ColumnId IS NOT NULL AND @W_ColumnId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ColumnId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_ColumnId IS NOT NULL AND @W_ColumnId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de ColumnId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Columns] WHERE [Id] = @W_ColumnId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Columns';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'create' BEGIN
                IF EXISTS(SELECT 1 FROM [dbo].[Indexkeys] WHERE [IndexId] = @W_IndexId AND [Sequence] = @W_Sequence) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexkeys_IndexId_Sequence já existe';
                    THROW 51000, @ErrorMessage, 1
                END
                IF EXISTS(SELECT 1 FROM [dbo].[Indexkeys] WHERE [IndexId] = @W_IndexId AND [ColumnId] = @W_ColumnId) BEGIN
                    SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexkeys_IndexId_ColumnId já existe';
                    THROW 51000, @ErrorMessage, 1
                END
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Indexkeys] WHERE [IndexId] = @W_IndexId AND [Sequence] = @W_Sequence AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexkeys_IndexId_Sequence inexiste';
                THROW 51000, @ErrorMessage, 1
            END ELSE IF EXISTS(SELECT 1 FROM [dbo].[Indexkeys] WHERE [IndexId] = @W_IndexId AND [ColumnId] = @W_ColumnId AND [Id] <> @W_Id) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Chave única de UNQ_Indexkeys_IndexId_ColumnId inexiste';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexkeyPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexkeyPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexkeyPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexkeyPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexkeyPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[IndexkeyValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Indexkeys'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexkeyCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexkeyCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexkeyCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexkeyCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexkeyCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Indexkeys' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[IndexkeyValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Indexkeys] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_IndexId int = CAST(JSON_QUERY(@ActualRecord, '$.IndexId') AS int)
                   ,@W_Sequence smallint = CAST(JSON_QUERY(@ActualRecord, '$.Sequence') AS smallint)
                   ,@W_ColumnId int = CAST(JSON_QUERY(@ActualRecord, '$.ColumnId') AS int)
                   ,@W_IsDescending bit = CAST(JSON_QUERY(@ActualRecord, '$.IsDescending') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Indexkeys] ([Id]
                                                ,[IndexId]
                                                ,[Sequence]
                                                ,[ColumnId]
                                                ,[IsDescending]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_IndexId
                                                 ,@W_Sequence
                                                 ,@W_ColumnId
                                                 ,@W_IsDescending
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Indexkeys] SET [Id] = @W_Id
                                              ,[IndexId] = @W_IndexId
                                              ,[Sequence] = @W_Sequence
                                              ,[ColumnId] = @W_ColumnId
                                              ,[IsDescending] = @W_IsDescending
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[IndexkeysRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[IndexkeysRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[IndexkeysRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[IndexkeysRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [IndexkeysRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_IndexId int = CAST(JSON_QUERY(@Parameters, '$.IndexId') AS int)
                ,@W_ColumnId int = CAST(JSON_QUERY(@Parameters, '$.ColumnId') AS int)
                ,@W_IsDescending bit = CAST(JSON_QUERY(@Parameters, '$.IsDescending') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_IndexId IS NOT NULL AND @W_IndexId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de IndexId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_IndexId IS NOT NULL AND @W_IndexId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de IndexId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_ColumnId IS NOT NULL AND @W_ColumnId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de ColumnId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_ColumnId IS NOT NULL AND @W_ColumnId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de ColumnId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[IndexId]
              ,[Sequence]
              ,[ColumnId]
              ,[IsDescending]
            INTO [dbo].[#tmp]
            FROM [dbo].[Indexkeys]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [IndexId] = ISNULL(@W_IndexId, [IndexId])
                  AND [ColumnId] = ISNULL(@W_ColumnId, [ColumnId])
                  AND [IsDescending] = ISNULL(@W_IsDescending, [IsDescending])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IndexId') AS int) AS [IndexId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.Sequence') AS smallint) AS [Sequence]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.ColumnId') AS int) AS [ColumnId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsDescending') AS bit) AS [IsDescending]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Indexkeys'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[IndexId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IndexId') AS int)
               ,[tmp].[Sequence] = CAST(JSON_QUERY([ope].[ActualRecord], '$.Sequence') AS smallint)
               ,[tmp].[ColumnId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.ColumnId') AS int)
               ,[tmp].[IsDescending] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsDescending') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Indexkeys'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordIndexkey'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[LoginValidate]
**********************************************************************************/
IF(SELECT object_id('[dbo].[LoginValidate]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[LoginValidate] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[LoginValidate](@LoginId BIGINT
                                               ,@UserName VARCHAR(25)
                                               ,@Action VARCHAR(15)
                                               ,@LastRecord VARCHAR(max)
                                               ,@ActualRecord VARCHAR(max)) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [LoginValidate]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action NOT IN ('create', 'update', 'delete') BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Action é inválido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @ActualRecord IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@ActualRecord) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'create' BEGIN
            IF @LastRecord IS NULL BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord é requerido';
                THROW 51000, @ErrorMessage, 1
            END
            IF ISJSON(@LastRecord) = 0 BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de @LastRecord não está no formato JSON';
                THROW 51000, @ErrorMessage, 1
            END
            IF @Action = 'update'
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.Id'), JSON_QUERY(@LastRecord, '$.Id'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.SystemId'), JSON_QUERY(@LastRecord, '$.SystemId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.UserId'), JSON_QUERY(@LastRecord, '$.UserId'), 'int') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.PublicKey'), JSON_QUERY(@LastRecord, '$.PublicKey'), 'varchar(256)') = 1
                AND [cruda].[IsEquals](JSON_QUERY(@ActualRecord, '$.IsLogged'), JSON_QUERY(@LastRecord, '$.IsLogged'), 'bit') = 1
                RETURN 0
            IF NOT EXISTS(SELECT 1
                            FROM [dbo].[Logins]
                            WHERE [Id] = JSON_QUERY(@LastRecord, '$.Id')
                                  AND [SystemId] = JSON_QUERY(@LastRecord, '$.SystemId')
                                  AND [UserId] = JSON_QUERY(@LastRecord, '$.UserId')
                                  AND [PublicKey] = JSON_QUERY(@LastRecord, '$.PublicKey')
                                  AND [IsLogged] = JSON_QUERY(@LastRecord, '$.IsLogged')) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Registro de Logins alterado por outro usuário';
                THROW 51000, @ErrorMessage, 1
            END
        END

        DECLARE @TransactionId INT
                ,@IsConfirmed BIT
                ,@CreatedBy VARCHAR(25)

        SELECT @TransactionId = [Id]
               ,@IsConfirmed = [IsConfirmed]
               ,@CreatedBy = [CreatedBy]
            FROM [cruda].[Transactions]
            WHERE [Id] = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Não existe transação para valor de @LoginId';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @W_Id IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord é requerido.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser maior que ou igual à 1';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id < CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord deve ser menor que ou igual à 2147483647';
            THROW 51000, @ErrorMessage, 1
        END
        IF EXISTS(SELECT 1 FROM [dbo].[Logins] WHERE Id = @W_Id) BEGIN
            IF @Action = 'create' BEGIN
               SET @ErrorMessage = @ErrorMessage + 'Chave-primária já existe em Logins';
               THROW 51000, @ErrorMessage, 1
            END
        END ELSE IF @Action <> 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Chave-primária não existe em Logins';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Action <> 'delete' BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_UserId int = CAST(JSON_QUERY(@ActualRecord, '$.UserId') AS int)
                   ,@W_PublicKey varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.PublicKey') AS varchar(256))
                   ,@W_IsLogged bit = CAST(JSON_QUERY(@ActualRecord, '$.IsLogged') AS bit)

            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Systems] WHERE [Id] = @W_SystemId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Systems';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_UserId IS NOT NULL AND @W_UserId < CAST('1' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de UserId em @ActualRecord deve ser maior que ou igual à 1';
                THROW 51000, @ErrorMessage, 1
            END
            IF @W_UserId IS NOT NULL AND @W_UserId < CAST('2147483647' AS int) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de UserId em @ActualRecord deve ser menor que ou igual à 2147483647';
                THROW 51000, @ErrorMessage, 1
            END
            IF NOT EXISTS(SELECT 1 FROM [dbo].[Users] WHERE [Id] = @W_UserId) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Valor de Id em @ActualRecord inexiste em Users';
                THROW 51000, @ErrorMessage, 1
            END
        END

        RETURN @TransactionId
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[LoginPersist]
**********************************************************************************/
IF(SELECT object_id('[dbo].[LoginPersist]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[LoginPersist] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[LoginPersist](@LoginId BIGINT
                                              ,@UserName VARCHAR(25)
                                              ,@Action VARCHAR(15)
                                              ,@LastRecord VARCHAR(max)
                                              ,@ActualRecord VARCHAR(max)) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [LoginPersist]: '
               ,@TransactionId INT
               ,@OperationId INT
               ,@CreatedBy VARCHAR(25)
               ,@ActionAux VARCHAR(15)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        EXEC @TransactionId = [dbo].[LoginValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE

        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        SELECT @OperationId = [Id]
              ,@CreatedBy = [CreatedBy]
              ,@ActionAux = [Action]
              ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Columns'
                  AND [IsConfirmed] IS NULL
                  AND CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) = @W_Id
        IF @@ROWCOUNT = 0 BEGIN
            INSERT INTO [cruda].[Operations] ([TransactionId]
                                             ,[TableName]
                                             ,[Action]
                                             ,[LastRecord]
                                             ,[ActualRecord]
                                             ,[IsConfirmed]
                                             ,[CreatedAt]
                                             ,[CreatedBy])
                                       VALUES(@TransactionId
                                             ,'Logins'
                                             ,@Action
                                             ,@LastRecord
                                             ,@ActualRecord
                                             ,NULL
                                             ,GETDATE()
                                             ,@UserName)
            SET @OperationId = @@IDENTITY
        END IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @ActionAux = 'delete' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro excluído nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'create' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Registro já existe nesta transação';
            THROW 51000, @ErrorMessage, 1
        END ELSE IF @Action = 'update' BEGIN
            UPDATE [cruda].[Operations]
                SET [ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE IF @ActionAux = 'create' BEGIN
            UPDATE [cruda].[Operations] 
                SET [IsConfirmed] = 0
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END ELSE BEGIN
            UPDATE [cruda].[Operations]
                SET [Action] = 'delete'
                   ,[LastRecord] = @LastRecord
                   ,[ActualRecord] = @ActualRecord
                   ,[UpdatedAt] = GETDATE()
                   ,[UpdatedBy] = @UserName
                WHERE [Id] = @OperationId
        END

        EXIT_PROCEDURE:

        COMMIT TRANSACTION

        RETURN CAST(@OperationId AS INT)
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[LoginCommit]
**********************************************************************************/
IF(SELECT object_id('[dbo].[LoginCommit]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[LoginCommit] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[LoginCommit](@LoginId BIGINT
                                             ,@UserName VARCHAR(25)
                                             ,@OperationId INT) AS BEGIN
    DECLARE @TRANCOUNT INT = @@TRANCOUNT

    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [LoginCommit]: '
               ,@TransactionId INT
               ,@TransactionIdAux INT
               ,@TableName VARCHAR(25)
               ,@Action VARCHAR(15)
               ,@CreatedBy VARCHAR(25)
               ,@LastRecord VARCHAR(max)
               ,@ActualRecord VARCHAR(max)
               ,@IsConfirmed BIT

        BEGIN TRANSACTION
        SAVE TRANSACTION [SavePoint]
        IF @OperationId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @OperationId requerido';
            THROW 51000, @ErrorMessage, 1
        END
        SELECT @TransactionIdAux = [TransactionId]
               ,@TableName = [TableName]
               ,@Action = [Action]
               ,@CreatedBy = [CreatedBy]
               ,@LastRecord = [LastRecord]
               ,@ActualRecord = [ActualRecord]
               ,@IsConfirmed = [IsConfirmed]
            FROM [cruda].[Operations]
            WHERE [Id] = @OperationId
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        IF @TableName <> 'Logins' BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Tabela da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        IF @IsConfirmed IS NOT NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação já ' + CASE WHEN @IsConfirmed = 0 THEN 'cancelada' ELSE 'concluída' END;
            THROW 51000, @ErrorMessage, 1
        END
        IF @UserName <> @CreatedBy BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Erro grave de segurança';
            THROW 51000, @ErrorMessage, 1
        END
        IF @@ROWCOUNT = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Operação inexistente';
            THROW 51000, @ErrorMessage, 1
        END
        EXEC @TransactionId = [dbo].[LoginValidate] @LoginId, @UserName, @Action, @LastRecord, @ActualRecord
        IF @TransactionId = 0
            GOTO EXIT_PROCEDURE
        IF @TransactionIdAux <> @TransactionId BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Transação da operação é inválida';
            THROW 51000, @ErrorMessage, 1
        END
        DECLARE @W_Id int = CAST(JSON_QUERY(@ActualRecord, '$.Id') AS int)

        IF @Action = 'delete'
            DELETE FROM [dbo].[Logins] WHERE [Id] = @W_Id
        ELSE BEGIN

            DECLARE @W_SystemId int = CAST(JSON_QUERY(@ActualRecord, '$.SystemId') AS int)
                   ,@W_UserId int = CAST(JSON_QUERY(@ActualRecord, '$.UserId') AS int)
                   ,@W_PublicKey varchar(256) = CAST(JSON_QUERY(@ActualRecord, '$.PublicKey') AS varchar(256))
                   ,@W_IsLogged bit = CAST(JSON_QUERY(@ActualRecord, '$.IsLogged') AS bit)

            IF @Action = 'create'
                INSERT INTO [dbo].[Logins] ([Id]
                                                ,[SystemId]
                                                ,[UserId]
                                                ,[PublicKey]
                                                ,[IsLogged]
                                                ,[CreatedAt]
                                                ,[CreatedBy])
                                          VALUES (@W_Id
                                                 ,@W_SystemId
                                                 ,@W_UserId
                                                 ,@W_PublicKey
                                                 ,@W_IsLogged
                                                 ,GETDATE()
                                                 ,@UserName)
            ELSE
                UPDATE [dbo].[Logins] SET [Id] = @W_Id
                                              ,[SystemId] = @W_SystemId
                                              ,[UserId] = @W_UserId
                                              ,[PublicKey] = @W_PublicKey
                                              ,[IsLogged] = @W_IsLogged
                                              ,[UpdatedAt] = GETDATE()
                                              ,[UpdatedBy] = @UserName
                    WHERE [Id] = @W_Id
        END

        EXIT_PROCEDURE:

        UPDATE [cruda].[Operations]
            SET [IsConfirmed] = 1
                ,[UpdatedAt] = GETDATE()
                ,[UpdatedBy] = @UserName
            WHERE [Id] = @OperationId
        COMMIT TRANSACTION

        RETURN 1
    END TRY
    BEGIN CATCH
        IF @@TRANCOUNT > @TRANCOUNT BEGIN
            ROLLBACK TRANSACTION [SavePoint];
            COMMIT TRANSACTION
        END;
        THROW
    END CATCH
END
GO
/**********************************************************************************
Criar stored procedure [dbo].[LoginsRead]
**********************************************************************************/
IF(SELECT object_id('[dbo].[LoginsRead]', 'P')) IS NULL
    EXEC('CREATE PROCEDURE [dbo].[LoginsRead] AS PRINT 1')
GO
ALTER PROCEDURE[dbo].[LoginsRead](@LoginId INT
                                          ,@Parameters VARCHAR(MAX)
                                          ,@OrderBy VARCHAR(MAX)
                                          ,@PaddingBrowseLastPage BIT
                                          ,@PageNumber BIGINT OUT
                                          ,@LimitRows BIGINT OUT
                                          ,@MaxPage BIGINT OUT) AS BEGIN
    BEGIN TRY
        SET NOCOUNT ON
        SET TRANSACTION ISOLATION LEVEL READ COMMITTED

        DECLARE @ErrorMessage VARCHAR(255) = 'Stored Procedure [LoginsRead]: '

        IF @LoginId IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @LoginId é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF @Parameters IS NULL BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @Parameters é requerido';
            THROW 51000, @ErrorMessage, 1
        END
        IF ISJSON(@Parameters) = 0 BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de @ActualRecord não está no formato JSON';
            THROW 51000, @ErrorMessage, 1
        END
        IF @OrderBy IS NULL BEGIN
            SET @OrderBy = '[Id]'
        END ELSE IF EXISTS(SELECT 1 
                          FROM (SELECT CASE WHEN CHARINDEX(' ', TRIM([value])) > 0
                                            THEN LEFT(TRIM([value]), CHARINDEX(' ', TRIM([value])) - 1)
                                            ELSE TRIM([value])
                                       END AS [ColumnName]
                                   FROM STRING_SPLIT(@OrderBy, ',')) AS [O]
                               LEFT JOIN (SELECT [COLUMN_NAME] AS [ColumnName]
                                             FROM [INFORMATION_SCHEMA].[COLUMNS]
                                             WHERE [TABLE_NAME] = 'Categories') AS [T] ON [T].[ColumnName] = [O].[ColumnName]
                          WHERE [T].[ColumnName] IS NULL) BEGIN
                SET @ErrorMessage = @ErrorMessage + 'Nome de coluna em @OrderBy é inválido';
                THROW 51000, @ErrorMessage, 1
        END

        DECLARE @TransactionId INT = (SELECT MAX([Id]) FROM [cruda].[Transactions] WHERE [LoginId] = @LoginId)
                ,@W_Id int = CAST(JSON_QUERY(@Parameters, '$.Id') AS int)
                ,@W_SystemId int = CAST(JSON_QUERY(@Parameters, '$.SystemId') AS int)
                ,@W_UserId int = CAST(JSON_QUERY(@Parameters, '$.UserId') AS int)
                ,@W_IsLogged bit = CAST(JSON_QUERY(@Parameters, '$.IsLogged') AS bit)

        IF @W_Id IS NOT NULL AND @W_Id < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_Id IS NOT NULL AND @W_Id > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de Id deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_SystemId IS NOT NULL AND @W_SystemId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de SystemId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_UserId IS NOT NULL AND @W_UserId < CAST('1' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de UserId deve ser maior que ou igual à ''1''.';
            THROW 51000, @ErrorMessage, 1
        END
        IF @W_UserId IS NOT NULL AND @W_UserId > CAST('2147483647' AS int) BEGIN
            SET @ErrorMessage = @ErrorMessage + 'Valor de UserId deve ser menor que ou igual à ''2147483647''.';
            THROW 51000, @ErrorMessage, 1
        END

        DECLARE @ROWCOUNT BIGINT
               ,@OffSet BIGINT

        SELECT [Id]
              ,[SystemId]
              ,[UserId]
              ,[PublicKey]
              ,[IsLogged]
            INTO [dbo].[#tmp]
            FROM [dbo].[Logins]
            WHERE [Id] = ISNULL(@W_Id, [Id])
                  AND [SystemId] = ISNULL(@W_SystemId, [SystemId])
                  AND [UserId] = ISNULL(@W_UserId, [UserId])
                  AND [IsLogged] = ISNULL(@W_IsLogged, [IsLogged])
            ORDER BY [Id]
        SET @ROWCOUNT = @@ROWCOUNT
        DELETE [tmp]
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Columns'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'delete'
        SET @ROWCOUNT = @ROWCOUNT - @@ROWCOUNT
        INSERT [dbo].[#tmp] SELECT CAST(JSON_QUERY([ActualRecord], '$.Id') AS int) AS [Id]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.SystemId') AS int) AS [SystemId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.UserId') AS int) AS [UserId]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.PublicKey') AS varchar(256)) AS [PublicKey]
                                  ,CAST(JSON_QUERY([ActualRecord], '$.IsLogged') AS bit) AS [IsLogged]
            FROM [cruda].[Operations]
            WHERE [TransactionId] = @TransactionId
                  AND [TableName] = 'Logins'
                  AND [IsConfirmed] IS NULL
                  AND [Action] = 'create'
        SET @ROWCOUNT = @ROWCOUNT + @@ROWCOUNT
        UPDATE [tmp]
            SET [tmp].[SystemId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.SystemId') AS int)
               ,[tmp].[UserId] = CAST(JSON_QUERY([ope].[ActualRecord], '$.UserId') AS int)
               ,[tmp].[PublicKey] = CAST(JSON_QUERY([ope].[ActualRecord], '$.PublicKey') AS varchar(256))
               ,[tmp].[IsLogged] = CAST(JSON_QUERY([ope].[ActualRecord], '$.IsLogged') AS bit)
            FROM [dbo].[#tmp] [tmp]
                INNER JOIN [cruda].[Operations] [ope] ON CAST(JSON_QUERY([ope].[ActualRecord], '$.Id') AS int) = [tmp].[Id]
            WHERE [ope].[TransactionId] = @TransactionId
                  AND [ope].[TableName] = 'Logins'
                  AND [ope].[IsConfirmed] IS NULL
                  AND [ope].[Action] = 'update'
        IF @ROWCOUNT = 0 OR ISNULL(@PageNumber, 0) = 0 OR ISNULL(@LimitRows, 0) <= 0 BEGIN
            SET @offset = 0
            SET @LimitRows = CASE WHEN @ROWCOUNT = 0 THEN 1 ELSE @ROWCOUNT END
            SET @PageNumber = 1
            SET @MaxPage = 1
        END ELSE BEGIN
            SET @MaxPage = @ROWCOUNT / @LimitRows + CASE WHEN @ROWCOUNT % @LimitRows = 0 THEN 0 ELSE 1 END
            IF ABS(@PageNumber) > @MaxPage
                SET @PageNumber = CASE WHEN @PageNumber < 0 THEN -@MaxPage ELSE @MaxPage END
            IF @PageNumber < 0
                SET @PageNumber = @MaxPage - ABS(@PageNumber) + 1
            SET @offset = (@PageNumber - 1) * @LimitRows
            IF @PaddingBrowseLastPage = 1 AND @offset + @LimitRows > @ROWCOUNT
                SET @offset = CASE WHEN @ROWCOUNT > @LimitRows THEN @ROWCOUNT - @LimitRows ELSE 0 END
        END

        DECLARE @sql VARCHAR(MAX)
                ,@className VARCHAR(50) = 'RecordLogin'


        SELECT TOP 0 @className AS [ClassName], * INTO [dbo].[#view] FROM [dbo].[#tmp]
        SET @sql = 'INSERT INTO [dbo].[#view]
                        SELECT ''' + @className + ''', *
                            FROM [dbo].[#tmp]
                            ORDER BY ' + @OrderBy + '
                            OFFSET ' + CAST(@offset AS VARCHAR(20)) + ' ROWS
                            FETCH NEXT ' + CAST(@LimitRows AS VARCHAR(20)) + ' ROWS ONLY'
        EXEC @sql
        SELECT * FROM [dbo].[#view]

        RETURN @ROWCOUNT
    END TRY
    BEGIN CATCH
        THROW
    END CATCH
END
GO
